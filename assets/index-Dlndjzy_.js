(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();function $m(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Yc={exports:{}},Ko={},Jc={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ip;function V_(){if(Ip)return Ie;Ip=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.iterator;function D(C){return C===null||typeof C!="object"?null:(C=N&&C[N]||C["@@iterator"],typeof C=="function"?C:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,X={};function $(C,b,re){this.props=C,this.context=b,this.refs=X,this.updater=re||z}$.prototype.isReactComponent={},$.prototype.setState=function(C,b){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,b,"setState")},$.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function _e(){}_e.prototype=$.prototype;function Z(C,b,re){this.props=C,this.context=b,this.refs=X,this.updater=re||z}var se=Z.prototype=new _e;se.constructor=Z,K(se,$.prototype),se.isPureReactComponent=!0;var ge=Array.isArray,Fe=Object.prototype.hasOwnProperty,Te={current:null},V={key:!0,ref:!0,__self:!0,__source:!0};function T(C,b,re){var de,we={},De=null,Ve=null;if(b!=null)for(de in b.ref!==void 0&&(Ve=b.ref),b.key!==void 0&&(De=""+b.key),b)Fe.call(b,de)&&!V.hasOwnProperty(de)&&(we[de]=b[de]);var xe=arguments.length-2;if(xe===1)we.children=re;else if(1<xe){for(var Oe=Array(xe),kt=0;kt<xe;kt++)Oe[kt]=arguments[kt+2];we.children=Oe}if(C&&C.defaultProps)for(de in xe=C.defaultProps,xe)we[de]===void 0&&(we[de]=xe[de]);return{$$typeof:i,type:C,key:De,ref:Ve,props:we,_owner:Te.current}}function A(C,b){return{$$typeof:i,type:C.type,key:b,ref:C.ref,props:C.props,_owner:C._owner}}function k(C){return typeof C=="object"&&C!==null&&C.$$typeof===i}function x(C){var b={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(re){return b[re]})}var O=/\/+/g;function I(C,b){return typeof C=="object"&&C!==null&&C.key!=null?x(""+C.key):b.toString(36)}function Ze(C,b,re,de,we){var De=typeof C;(De==="undefined"||De==="boolean")&&(C=null);var Ve=!1;if(C===null)Ve=!0;else switch(De){case"string":case"number":Ve=!0;break;case"object":switch(C.$$typeof){case i:case e:Ve=!0}}if(Ve)return Ve=C,we=we(Ve),C=de===""?"."+I(Ve,0):de,ge(we)?(re="",C!=null&&(re=C.replace(O,"$&/")+"/"),Ze(we,b,re,"",function(kt){return kt})):we!=null&&(k(we)&&(we=A(we,re+(!we.key||Ve&&Ve.key===we.key?"":(""+we.key).replace(O,"$&/")+"/")+C)),b.push(we)),1;if(Ve=0,de=de===""?".":de+":",ge(C))for(var xe=0;xe<C.length;xe++){De=C[xe];var Oe=de+I(De,xe);Ve+=Ze(De,b,re,Oe,we)}else if(Oe=D(C),typeof Oe=="function")for(C=Oe.call(C),xe=0;!(De=C.next()).done;)De=De.value,Oe=de+I(De,xe++),Ve+=Ze(De,b,re,Oe,we);else if(De==="object")throw b=String(C),Error("Objects are not valid as a React child (found: "+(b==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":b)+"). If you meant to render a collection of children, use an array instead.");return Ve}function Rt(C,b,re){if(C==null)return C;var de=[],we=0;return Ze(C,de,"","",function(De){return b.call(re,De,we++)}),de}function Pt(C){if(C._status===-1){var b=C._result;b=b(),b.then(function(re){(C._status===0||C._status===-1)&&(C._status=1,C._result=re)},function(re){(C._status===0||C._status===-1)&&(C._status=2,C._result=re)}),C._status===-1&&(C._status=0,C._result=b)}if(C._status===1)return C._result.default;throw C._result}var je={current:null},J={transition:null},ue={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:J,ReactCurrentOwner:Te};return Ie.Children={map:Rt,forEach:function(C,b,re){Rt(C,function(){b.apply(this,arguments)},re)},count:function(C){var b=0;return Rt(C,function(){b++}),b},toArray:function(C){return Rt(C,function(b){return b})||[]},only:function(C){if(!k(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Ie.Component=$,Ie.Fragment=n,Ie.Profiler=a,Ie.PureComponent=Z,Ie.StrictMode=s,Ie.Suspense=y,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Ie.cloneElement=function(C,b,re){if(C==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+C+".");var de=K({},C.props),we=C.key,De=C.ref,Ve=C._owner;if(b!=null){if(b.ref!==void 0&&(De=b.ref,Ve=Te.current),b.key!==void 0&&(we=""+b.key),C.type&&C.type.defaultProps)var xe=C.type.defaultProps;for(Oe in b)Fe.call(b,Oe)&&!V.hasOwnProperty(Oe)&&(de[Oe]=b[Oe]===void 0&&xe!==void 0?xe[Oe]:b[Oe])}var Oe=arguments.length-2;if(Oe===1)de.children=re;else if(1<Oe){xe=Array(Oe);for(var kt=0;kt<Oe;kt++)xe[kt]=arguments[kt+2];de.children=xe}return{$$typeof:i,type:C.type,key:we,ref:De,props:de,_owner:Ve}},Ie.createContext=function(C){return C={$$typeof:f,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},C.Provider={$$typeof:c,_context:C},C.Consumer=C},Ie.createElement=T,Ie.createFactory=function(C){var b=T.bind(null,C);return b.type=C,b},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(C){return{$$typeof:g,render:C}},Ie.isValidElement=k,Ie.lazy=function(C){return{$$typeof:S,_payload:{_status:-1,_result:C},_init:Pt}},Ie.memo=function(C,b){return{$$typeof:v,type:C,compare:b===void 0?null:b}},Ie.startTransition=function(C){var b=J.transition;J.transition={};try{C()}finally{J.transition=b}},Ie.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},Ie.useCallback=function(C,b){return je.current.useCallback(C,b)},Ie.useContext=function(C){return je.current.useContext(C)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(C){return je.current.useDeferredValue(C)},Ie.useEffect=function(C,b){return je.current.useEffect(C,b)},Ie.useId=function(){return je.current.useId()},Ie.useImperativeHandle=function(C,b,re){return je.current.useImperativeHandle(C,b,re)},Ie.useInsertionEffect=function(C,b){return je.current.useInsertionEffect(C,b)},Ie.useLayoutEffect=function(C,b){return je.current.useLayoutEffect(C,b)},Ie.useMemo=function(C,b){return je.current.useMemo(C,b)},Ie.useReducer=function(C,b,re){return je.current.useReducer(C,b,re)},Ie.useRef=function(C){return je.current.useRef(C)},Ie.useState=function(C){return je.current.useState(C)},Ie.useSyncExternalStore=function(C,b,re){return je.current.useSyncExternalStore(C,b,re)},Ie.useTransition=function(){return je.current.useTransition()},Ie.version="18.2.0",Ie}var Sp;function xh(){return Sp||(Sp=1,Jc.exports=V_()),Jc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap;function N_(){if(Ap)return Ko;Ap=1;var i=xh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(g,y,v){var S,N={},D=null,z=null;v!==void 0&&(D=""+v),y.key!==void 0&&(D=""+y.key),y.ref!==void 0&&(z=y.ref);for(S in y)s.call(y,S)&&!c.hasOwnProperty(S)&&(N[S]=y[S]);if(g&&g.defaultProps)for(S in y=g.defaultProps,y)N[S]===void 0&&(N[S]=y[S]);return{$$typeof:e,type:g,key:D,ref:z,props:N,_owner:a.current}}return Ko.Fragment=n,Ko.jsx=f,Ko.jsxs=f,Ko}var Cp;function D_(){return Cp||(Cp=1,Yc.exports=N_()),Yc.exports}var Ee=D_(),gn=xh();const x_=$m(gn);var xl={},Zc={exports:{}},Kt={},eh={exports:{}},th={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function O_(){return Rp||(Rp=1,function(i){function e(J,ue){var C=J.length;J.push(ue);e:for(;0<C;){var b=C-1>>>1,re=J[b];if(0<a(re,ue))J[b]=ue,J[C]=re,C=b;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ue=J[0],C=J.pop();if(C!==ue){J[0]=C;e:for(var b=0,re=J.length,de=re>>>1;b<de;){var we=2*(b+1)-1,De=J[we],Ve=we+1,xe=J[Ve];if(0>a(De,C))Ve<re&&0>a(xe,De)?(J[b]=xe,J[Ve]=C,b=Ve):(J[b]=De,J[we]=C,b=we);else if(Ve<re&&0>a(xe,C))J[b]=xe,J[Ve]=C,b=Ve;else break e}}return ue}function a(J,ue){var C=J.sortIndex-ue.sortIndex;return C!==0?C:J.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var f=Date,g=f.now();i.unstable_now=function(){return f.now()-g}}var y=[],v=[],S=1,N=null,D=3,z=!1,K=!1,X=!1,$=typeof setTimeout=="function"?setTimeout:null,_e=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function se(J){for(var ue=n(v);ue!==null;){if(ue.callback===null)s(v);else if(ue.startTime<=J)s(v),ue.sortIndex=ue.expirationTime,e(y,ue);else break;ue=n(v)}}function ge(J){if(X=!1,se(J),!K)if(n(y)!==null)K=!0,Pt(Fe);else{var ue=n(v);ue!==null&&je(ge,ue.startTime-J)}}function Fe(J,ue){K=!1,X&&(X=!1,_e(T),T=-1),z=!0;var C=D;try{for(se(ue),N=n(y);N!==null&&(!(N.expirationTime>ue)||J&&!x());){var b=N.callback;if(typeof b=="function"){N.callback=null,D=N.priorityLevel;var re=b(N.expirationTime<=ue);ue=i.unstable_now(),typeof re=="function"?N.callback=re:N===n(y)&&s(y),se(ue)}else s(y);N=n(y)}if(N!==null)var de=!0;else{var we=n(v);we!==null&&je(ge,we.startTime-ue),de=!1}return de}finally{N=null,D=C,z=!1}}var Te=!1,V=null,T=-1,A=5,k=-1;function x(){return!(i.unstable_now()-k<A)}function O(){if(V!==null){var J=i.unstable_now();k=J;var ue=!0;try{ue=V(!0,J)}finally{ue?I():(Te=!1,V=null)}}else Te=!1}var I;if(typeof Z=="function")I=function(){Z(O)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,Rt=Ze.port2;Ze.port1.onmessage=O,I=function(){Rt.postMessage(null)}}else I=function(){$(O,0)};function Pt(J){V=J,Te||(Te=!0,I())}function je(J,ue){T=$(function(){J(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){K||z||(K=!0,Pt(Fe))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return D},i.unstable_getFirstCallbackNode=function(){return n(y)},i.unstable_next=function(J){switch(D){case 1:case 2:case 3:var ue=3;break;default:ue=D}var C=D;D=ue;try{return J()}finally{D=C}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var C=D;D=J;try{return ue()}finally{D=C}},i.unstable_scheduleCallback=function(J,ue,C){var b=i.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?b+C:b):C=b,J){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=C+re,J={id:S++,callback:ue,priorityLevel:J,startTime:C,expirationTime:re,sortIndex:-1},C>b?(J.sortIndex=C,e(v,J),n(y)===null&&J===n(v)&&(X?(_e(T),T=-1):X=!0,je(ge,C-b))):(J.sortIndex=re,e(y,J),K||z||(K=!0,Pt(Fe))),J},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(J){var ue=D;return function(){var C=D;D=ue;try{return J.apply(this,arguments)}finally{D=C}}}}(th)),th}var Pp;function M_(){return Pp||(Pp=1,eh.exports=O_()),eh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kp;function L_(){if(kp)return Kt;kp=1;var i=xh(),e=M_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){f(t,r),f(t+"Capture",r)}function f(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var g=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},N={};function D(t){return y.call(N,t)?!0:y.call(S,t)?!1:v.test(t)?N[t]=!0:(S[t]=!0,!1)}function z(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function K(t,r,o,u){if(r===null||typeof r>"u"||z(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function X(t,r,o,u,h,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$[t]=new X(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];$[r]=new X(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){$[t]=new X(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$[t]=new X(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$[t]=new X(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){$[t]=new X(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){$[t]=new X(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){$[t]=new X(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){$[t]=new X(t,5,!1,t.toLowerCase(),null,!1,!1)});var _e=/[\-:]([a-z])/g;function Z(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(_e,Z);$[r]=new X(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(_e,Z);$[r]=new X(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(_e,Z);$[r]=new X(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){$[t]=new X(t,1,!1,t.toLowerCase(),null,!1,!1)}),$.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){$[t]=new X(t,1,!1,t.toLowerCase(),null,!0,!0)});function se(t,r,o,u){var h=$.hasOwnProperty(r)?$[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(K(r,o,h,u)&&(o=null),u||h===null?D(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var ge=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fe=Symbol.for("react.element"),Te=Symbol.for("react.portal"),V=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),Rt=Symbol.for("react.memo"),Pt=Symbol.for("react.lazy"),je=Symbol.for("react.offscreen"),J=Symbol.iterator;function ue(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var C=Object.assign,b;function re(t){if(b===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);b=r&&r[1]||""}return`
`+b+t}var de=!1;function we(t,r){if(!t||de)return"";de=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=u.stack.split(`
`),_=h.length-1,w=p.length-1;1<=_&&0<=w&&h[_]!==p[w];)w--;for(;1<=_&&0<=w;_--,w--)if(h[_]!==p[w]){if(_!==1||w!==1)do if(_--,w--,0>w||h[_]!==p[w]){var R=`
`+h[_].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=_&&0<=w);break}}}finally{de=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?re(t):""}function De(t){switch(t.tag){case 5:return re(t.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return t=we(t.type,!1),t;case 11:return t=we(t.type.render,!1),t;case 1:return t=we(t.type,!0),t;default:return""}}function Ve(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case V:return"Fragment";case Te:return"Portal";case A:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case Ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case O:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Rt:return r=t.displayName||null,r!==null?r:Ve(t.type)||"Memo";case Pt:r=t._payload,t=t._init;try{return Ve(t(r))}catch{}}return null}function xe(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(r);case 8:return r===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Oe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kt(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Bi(t){var r=kt(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Jn(t){t._valueTracker||(t._valueTracker=Bi(t))}function bi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=kt(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Er(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function si(t,r){var o=r.checked;return C({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function $i(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Oe(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Zs(t,r){r=r.checked,r!=null&&se(t,"checked",r,!1)}function eo(t,r){Zs(t,r);var o=Oe(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?qi(t,r.type,o):r.hasOwnProperty("defaultValue")&&qi(t,r.type,Oe(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function _a(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function qi(t,r,o){(r!=="number"||Er(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Zn=Array.isArray;function er(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Oe(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function to(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return C({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(Zn(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Oe(o)}}function Wi(t,r){var o=Oe(r.value),u=Oe(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function no(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?at(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tr,ro=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(tr=tr||document.createElement("div"),tr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=tr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function wr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ai=["Webkit","ms","Moz","O"];Object.keys(oi).forEach(function(t){ai.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),oi[r]=oi[t]})});function io(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||oi.hasOwnProperty(t)&&oi[t]?(""+r).trim():r+"px"}function so(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=io(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var oo=C({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ao(t,r){if(r){if(oo[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function lo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function Qi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ki=null,on=null,On=null;function Gi(t){if(t=xo(t)){if(typeof Ki!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Ka(r),Ki(t.stateNode,t.type,r))}}function Mn(t){on?On?On.push(t):On=[t]:on=t}function uo(){if(on){var t=on,r=On;if(On=on=null,Gi(t),r)for(t=0;t<r.length;t++)Gi(r[t])}}function ui(t,r){return t(r)}function co(){}var nr=!1;function ho(t,r,o){if(nr)return t(r,o);nr=!0;try{return ui(t,r,o)}finally{nr=!1,(on!==null||On!==null)&&(co(),uo())}}function et(t,r){var o=t.stateNode;if(o===null)return null;var u=Ka(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Xi=!1;if(g)try{var _n={};Object.defineProperty(_n,"passive",{get:function(){Xi=!0}}),window.addEventListener("test",_n,_n),window.removeEventListener("test",_n,_n)}catch{Xi=!1}function ci(t,r,o,u,h,p,_,w,R){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(W){this.onError(W)}}var hi=!1,Yi=null,vn=!1,fo=null,Au={onError:function(t){hi=!0,Yi=t}};function Ji(t,r,o,u,h,p,_,w,R){hi=!1,Yi=null,ci.apply(Au,arguments)}function va(t,r,o,u,h,p,_,w,R){if(Ji.apply(this,arguments),hi){if(hi){var U=Yi;hi=!1,Yi=null}else throw Error(n(198));vn||(vn=!0,fo=U)}}function En(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function fi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function wn(t){if(En(t)!==t)throw Error(n(188))}function Ea(t){var r=t.alternate;if(!r){if(r=En(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return wn(h),t;if(p===u)return wn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var _=!1,w=h.child;w;){if(w===o){_=!0,o=h,u=p;break}if(w===u){_=!0,u=h,o=p;break}w=w.sibling}if(!_){for(w=p.child;w;){if(w===o){_=!0,o=p,u=h;break}if(w===u){_=!0,u=p,o=h;break}w=w.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function po(t){return t=Ea(t),t!==null?Zi(t):null}function Zi(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Zi(t);if(r!==null)return r;t=t.sibling}return null}var es=e.unstable_scheduleCallback,mo=e.unstable_cancelCallback,wa=e.unstable_shouldYield,Cu=e.unstable_requestPaint,Be=e.unstable_now,Ta=e.unstable_getCurrentPriorityLevel,di=e.unstable_ImmediatePriority,Tr=e.unstable_UserBlockingPriority,an=e.unstable_NormalPriority,go=e.unstable_LowPriority,Ia=e.unstable_IdlePriority,pi=null,Yt=null;function Sa(t){if(Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(pi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:Ca,yo=Math.log,Aa=Math.LN2;function Ca(t){return t>>>=0,t===0?32:31-(yo(t)/Aa|0)|0}var ts=64,ns=4194304;function Ir(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mi(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var w=_&~h;w!==0?u=Ir(w):(p&=_,p!==0&&(u=Ir(p)))}else _=o&~h,_!==0?u=Ir(_):p!==0&&(u=Ir(p));if(u===0)return 0;if(r!==0&&r!==u&&(r&h)===0&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((u&4)!==0&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Ft(r),h=1<<o,u|=t[o],r&=~h;return u}function Ru(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rr(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Ft(p),w=1<<_,R=h[_];R===-1?((w&o)===0||(w&u)!==0)&&(h[_]=Ru(w,r)):R<=r&&(t.expiredLanes|=w),p&=~w}}function Jt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gi(){var t=ts;return ts<<=1,(ts&4194240)===0&&(ts=64),t}function Sr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Ar(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ft(r),t[r]=o}function ze(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Ft(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Cr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Ft(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Ce=0;function Rr(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ra,rs,Pa,ka,Va,_o=!1,Ln=[],Et=null,Tn=null,In=null,Pr=new Map,ln=new Map,Fn=[],Pu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Na(t,r){switch(t){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":In=null;break;case"pointerover":case"pointerout":Pr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ln.delete(r.pointerId)}}function Bt(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=xo(r),r!==null&&rs(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function ku(t,r,o,u,h){switch(r){case"focusin":return Et=Bt(Et,t,r,o,u,h),!0;case"dragenter":return Tn=Bt(Tn,t,r,o,u,h),!0;case"mouseover":return In=Bt(In,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Pr.set(p,Bt(Pr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,ln.set(p,Bt(ln.get(p)||null,t,r,o,u,h)),!0}return!1}function Da(t){var r=wi(t.target);if(r!==null){var o=En(r);if(o!==null){if(r=o.tag,r===13){if(r=fi(o),r!==null){t.blockedOn=r,Va(t.priority,function(){Pa(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ir(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=is(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);li=u,o.target.dispatchEvent(u),li=null}else return r=xo(o),r!==null&&rs(r),t.blockedOn=o,!1;r.shift()}return!0}function yi(t,r,o){ir(t)&&o.delete(r)}function xa(){_o=!1,Et!==null&&ir(Et)&&(Et=null),Tn!==null&&ir(Tn)&&(Tn=null),In!==null&&ir(In)&&(In=null),Pr.forEach(yi),ln.forEach(yi)}function Sn(t,r){t.blockedOn===r&&(t.blockedOn=null,_o||(_o=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xa)))}function An(t){function r(h){return Sn(h,t)}if(0<Ln.length){Sn(Ln[0],t);for(var o=1;o<Ln.length;o++){var u=Ln[o];u.blockedOn===t&&(u.blockedOn=null)}}for(Et!==null&&Sn(Et,t),Tn!==null&&Sn(Tn,t),In!==null&&Sn(In,t),Pr.forEach(r),ln.forEach(r),o=0;o<Fn.length;o++)u=Fn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<Fn.length&&(o=Fn[0],o.blockedOn===null);)Da(o),o.blockedOn===null&&Fn.shift()}var sr=ge.ReactCurrentBatchConfig,kr=!0;function Qe(t,r,o,u){var h=Ce,p=sr.transition;sr.transition=null;try{Ce=1,vo(t,r,o,u)}finally{Ce=h,sr.transition=p}}function Vu(t,r,o,u){var h=Ce,p=sr.transition;sr.transition=null;try{Ce=4,vo(t,r,o,u)}finally{Ce=h,sr.transition=p}}function vo(t,r,o,u){if(kr){var h=is(t,r,o,u);if(h===null)Bu(t,r,u,_i,o),Na(t,u);else if(ku(h,t,r,o,u))u.stopPropagation();else if(Na(t,u),r&4&&-1<Pu.indexOf(t)){for(;h!==null;){var p=xo(h);if(p!==null&&Ra(p),p=is(t,r,o,u),p===null&&Bu(t,r,u,_i,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Bu(t,r,u,null,o)}}var _i=null;function is(t,r,o,u){if(_i=null,t=Qi(u),t=wi(t),t!==null)if(r=En(t),r===null)t=null;else if(o=r.tag,o===13){if(t=fi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return _i=t,null}function Eo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ta()){case di:return 1;case Tr:return 4;case an:case go:return 16;case Ia:return 536870912;default:return 16}default:return 16}}var Zt=null,ss=null,bt=null;function wo(){if(bt)return bt;var t,r=ss,o=r.length,u,h="value"in Zt?Zt.value:Zt.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[p-u];u++);return bt=h.slice(t,1<u?1-u:void 0)}function os(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Un(){return!0}function To(){return!1}function wt(t){function r(o,u,h,p,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var w in t)t.hasOwnProperty(w)&&(o=t[w],this[w]=o?o(p):p[w]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Un:To,this.isPropagationStopped=To,this}return C(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Un)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Un)},persist:function(){},isPersistent:Un}),r}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},as=wt(Cn),jn=C({},Cn,{view:0,detail:0}),Nu=wt(jn),ls,or,Vr,vi=C({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vr&&(Vr&&t.type==="mousemove"?(ls=t.screenX-Vr.screenX,or=t.screenY-Vr.screenY):or=ls=0,Vr=t),ls)},movementY:function(t){return"movementY"in t?t.movementY:or}}),us=wt(vi),Io=C({},vi,{dataTransfer:0}),Oa=wt(Io),cs=C({},jn,{relatedTarget:0}),hs=wt(cs),Ma=C({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),ar=wt(Ma),La=C({},Cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fa=wt(La),Ua=C({},Cn,{data:0}),So=wt(Ua),fs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ut={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ja={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function za(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=ja[t])?!!r[t]:!1}function zn(){return za}var l=C({},jn,{key:function(t){if(t.key){var r=fs[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=os(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ut[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zn,charCode:function(t){return t.type==="keypress"?os(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?os(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),d=wt(l),m=C({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=wt(m),M=C({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zn}),j=wt(M),Y=C({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=wt(Y),ut=C({},vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Re=wt(ut),mt=[9,13,27,32],rt=g&&"CompositionEvent"in window,un=null;g&&"documentMode"in document&&(un=document.documentMode);var en=g&&"TextEvent"in window&&!un,Ei=g&&(!rt||un&&8<un&&11>=un),ds=" ",gf=!1;function yf(t,r){switch(t){case"keyup":return mt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _f(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ps=!1;function Ry(t,r){switch(t){case"compositionend":return _f(r);case"keypress":return r.which!==32?null:(gf=!0,ds);case"textInput":return t=r.data,t===ds&&gf?null:t;default:return null}}function Py(t,r){if(ps)return t==="compositionend"||!rt&&yf(t,r)?(t=wo(),bt=ss=Zt=null,ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ei&&r.locale!=="ko"?null:r.data;default:return null}}var ky={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vf(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!ky[t.type]:r==="textarea"}function Ef(t,r,o,u){Mn(u),r=Ha(r,"onChange"),0<r.length&&(o=new as("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Ao=null,Co=null;function Vy(t){Uf(t,0)}function Ba(t){var r=vs(t);if(bi(r))return t}function Ny(t,r){if(t==="change")return r}var wf=!1;if(g){var Du;if(g){var xu="oninput"in document;if(!xu){var Tf=document.createElement("div");Tf.setAttribute("oninput","return;"),xu=typeof Tf.oninput=="function"}Du=xu}else Du=!1;wf=Du&&(!document.documentMode||9<document.documentMode)}function If(){Ao&&(Ao.detachEvent("onpropertychange",Sf),Co=Ao=null)}function Sf(t){if(t.propertyName==="value"&&Ba(Co)){var r=[];Ef(r,Co,t,Qi(t)),ho(Vy,r)}}function Dy(t,r,o){t==="focusin"?(If(),Ao=r,Co=o,Ao.attachEvent("onpropertychange",Sf)):t==="focusout"&&If()}function xy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ba(Co)}function Oy(t,r){if(t==="click")return Ba(r)}function My(t,r){if(t==="input"||t==="change")return Ba(r)}function Ly(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Rn=typeof Object.is=="function"?Object.is:Ly;function Ro(t,r){if(Rn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(r,h)||!Rn(t[h],r[h]))return!1}return!0}function Af(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cf(t,r){var o=Af(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Af(o)}}function Rf(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Rf(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Pf(){for(var t=window,r=Er();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Er(t.document)}return r}function Ou(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function Fy(t){var r=Pf(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&Rf(o.ownerDocument.documentElement,o)){if(u!==null&&Ou(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=Cf(o,p);var _=Cf(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Uy=g&&"documentMode"in document&&11>=document.documentMode,ms=null,Mu=null,Po=null,Lu=!1;function kf(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Lu||ms==null||ms!==Er(u)||(u=ms,"selectionStart"in u&&Ou(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Po&&Ro(Po,u)||(Po=u,u=Ha(Mu,"onSelect"),0<u.length&&(r=new as("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=ms)))}function ba(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var gs={animationend:ba("Animation","AnimationEnd"),animationiteration:ba("Animation","AnimationIteration"),animationstart:ba("Animation","AnimationStart"),transitionend:ba("Transition","TransitionEnd")},Fu={},Vf={};g&&(Vf=document.createElement("div").style,"AnimationEvent"in window||(delete gs.animationend.animation,delete gs.animationiteration.animation,delete gs.animationstart.animation),"TransitionEvent"in window||delete gs.transitionend.transition);function $a(t){if(Fu[t])return Fu[t];if(!gs[t])return t;var r=gs[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Vf)return Fu[t]=r[o];return t}var Nf=$a("animationend"),Df=$a("animationiteration"),xf=$a("animationstart"),Of=$a("transitionend"),Mf=new Map,Lf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,r){Mf.set(t,r),c(r,[t])}for(var Uu=0;Uu<Lf.length;Uu++){var ju=Lf[Uu],jy=ju.toLowerCase(),zy=ju[0].toUpperCase()+ju.slice(1);Nr(jy,"on"+zy)}Nr(Nf,"onAnimationEnd"),Nr(Df,"onAnimationIteration"),Nr(xf,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Of,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),By=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function Ff(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,va(u,r,void 0,t),t.currentTarget=null}function Uf(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var w=u[_],R=w.instance,U=w.currentTarget;if(w=w.listener,R!==p&&h.isPropagationStopped())break e;Ff(h,w,U),p=R}else for(_=0;_<u.length;_++){if(w=u[_],R=w.instance,U=w.currentTarget,w=w.listener,R!==p&&h.isPropagationStopped())break e;Ff(h,w,U),p=R}}}if(vn)throw t=fo,vn=!1,fo=null,t}function $e(t,r){var o=r[Qu];o===void 0&&(o=r[Qu]=new Set);var u=t+"__bubble";o.has(u)||(jf(r,t,2,!1),o.add(u))}function zu(t,r,o){var u=0;r&&(u|=4),jf(o,t,u,r)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Vo(t){if(!t[qa]){t[qa]=!0,s.forEach(function(o){o!=="selectionchange"&&(By.has(o)||zu(o,!1,t),zu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[qa]||(r[qa]=!0,zu("selectionchange",!1,r))}}function jf(t,r,o,u){switch(Eo(r)){case 1:var h=Qe;break;case 4:h=Vu;break;default:h=vo}o=h.bind(null,r,o,t),h=void 0,!Xi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Bu(t,r,o,u,h){var p=u;if((r&1)===0&&(r&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var w=u.stateNode.containerInfo;if(w===h||w.nodeType===8&&w.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var R=_.tag;if((R===3||R===4)&&(R=_.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;_=_.return}for(;w!==null;){if(_=wi(w),_===null)return;if(R=_.tag,R===5||R===6){u=p=_;continue e}w=w.parentNode}}u=u.return}ho(function(){var U=p,W=Qi(o),Q=[];e:{var q=Mf.get(t);if(q!==void 0){var ee=as,ie=t;switch(t){case"keypress":if(os(o)===0)break e;case"keydown":case"keyup":ee=d;break;case"focusin":ie="focus",ee=hs;break;case"focusout":ie="blur",ee=hs;break;case"beforeblur":case"afterblur":ee=hs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=us;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=Oa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=j;break;case Nf:case Df:case xf:ee=ar;break;case Of:ee=Ue;break;case"scroll":ee=Nu;break;case"wheel":ee=Re;break;case"copy":case"cut":case"paste":ee=Fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=E}var oe=(r&4)!==0,tt=!oe&&t==="scroll",L=oe?q!==null?q+"Capture":null:q;oe=[];for(var P=U,F;P!==null;){F=P;var G=F.stateNode;if(F.tag===5&&G!==null&&(F=G,L!==null&&(G=et(P,L),G!=null&&oe.push(No(P,G,F)))),tt)break;P=P.return}0<oe.length&&(q=new ee(q,ie,null,o,W),Q.push({event:q,listeners:oe}))}}if((r&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",ee=t==="mouseout"||t==="pointerout",q&&o!==li&&(ie=o.relatedTarget||o.fromElement)&&(wi(ie)||ie[lr]))break e;if((ee||q)&&(q=W.window===W?W:(q=W.ownerDocument)?q.defaultView||q.parentWindow:window,ee?(ie=o.relatedTarget||o.toElement,ee=U,ie=ie?wi(ie):null,ie!==null&&(tt=En(ie),ie!==tt||ie.tag!==5&&ie.tag!==6)&&(ie=null)):(ee=null,ie=U),ee!==ie)){if(oe=us,G="onMouseLeave",L="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(oe=E,G="onPointerLeave",L="onPointerEnter",P="pointer"),tt=ee==null?q:vs(ee),F=ie==null?q:vs(ie),q=new oe(G,P+"leave",ee,o,W),q.target=tt,q.relatedTarget=F,G=null,wi(W)===U&&(oe=new oe(L,P+"enter",ie,o,W),oe.target=F,oe.relatedTarget=tt,G=oe),tt=G,ee&&ie)t:{for(oe=ee,L=ie,P=0,F=oe;F;F=ys(F))P++;for(F=0,G=L;G;G=ys(G))F++;for(;0<P-F;)oe=ys(oe),P--;for(;0<F-P;)L=ys(L),F--;for(;P--;){if(oe===L||L!==null&&oe===L.alternate)break t;oe=ys(oe),L=ys(L)}oe=null}else oe=null;ee!==null&&zf(Q,q,ee,oe,!1),ie!==null&&tt!==null&&zf(Q,tt,ie,oe,!0)}}e:{if(q=U?vs(U):window,ee=q.nodeName&&q.nodeName.toLowerCase(),ee==="select"||ee==="input"&&q.type==="file")var ae=Ny;else if(vf(q))if(wf)ae=My;else{ae=xy;var he=Dy}else(ee=q.nodeName)&&ee.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ae=Oy);if(ae&&(ae=ae(t,U))){Ef(Q,ae,o,W);break e}he&&he(t,q,U),t==="focusout"&&(he=q._wrapperState)&&he.controlled&&q.type==="number"&&qi(q,"number",q.value)}switch(he=U?vs(U):window,t){case"focusin":(vf(he)||he.contentEditable==="true")&&(ms=he,Mu=U,Po=null);break;case"focusout":Po=Mu=ms=null;break;case"mousedown":Lu=!0;break;case"contextmenu":case"mouseup":case"dragend":Lu=!1,kf(Q,o,W);break;case"selectionchange":if(Uy)break;case"keydown":case"keyup":kf(Q,o,W)}var fe;if(rt)e:{switch(t){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e}me=void 0}else ps?yf(t,o)&&(me="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(me="onCompositionStart");me&&(Ei&&o.locale!=="ko"&&(ps||me!=="onCompositionStart"?me==="onCompositionEnd"&&ps&&(fe=wo()):(Zt=W,ss="value"in Zt?Zt.value:Zt.textContent,ps=!0)),he=Ha(U,me),0<he.length&&(me=new So(me,t,null,o,W),Q.push({event:me,listeners:he}),fe?me.data=fe:(fe=_f(o),fe!==null&&(me.data=fe)))),(fe=en?Ry(t,o):Py(t,o))&&(U=Ha(U,"onBeforeInput"),0<U.length&&(W=new So("onBeforeInput","beforeinput",null,o,W),Q.push({event:W,listeners:U}),W.data=fe))}Uf(Q,r)})}function No(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ha(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=et(t,o),p!=null&&u.unshift(No(t,p,h)),p=et(t,r),p!=null&&u.push(No(t,p,h))),t=t.return}return u}function ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zf(t,r,o,u,h){for(var p=r._reactName,_=[];o!==null&&o!==u;){var w=o,R=w.alternate,U=w.stateNode;if(R!==null&&R===u)break;w.tag===5&&U!==null&&(w=U,h?(R=et(o,p),R!=null&&_.unshift(No(o,R,w))):h||(R=et(o,p),R!=null&&_.push(No(o,R,w)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var by=/\r\n?/g,$y=/\u0000|\uFFFD/g;function Bf(t){return(typeof t=="string"?t:""+t).replace(by,`
`).replace($y,"")}function Wa(t,r,o){if(r=Bf(r),Bf(t)!==r&&o)throw Error(n(425))}function Qa(){}var bu=null,$u=null;function qu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Hu=typeof setTimeout=="function"?setTimeout:void 0,qy=typeof clearTimeout=="function"?clearTimeout:void 0,bf=typeof Promise=="function"?Promise:void 0,Hy=typeof queueMicrotask=="function"?queueMicrotask:typeof bf<"u"?function(t){return bf.resolve(null).then(t).catch(Wy)}:Hu;function Wy(t){setTimeout(function(){throw t})}function Wu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),An(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);An(r)}function Dr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function $f(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var _s=Math.random().toString(36).slice(2),Bn="__reactFiber$"+_s,Do="__reactProps$"+_s,lr="__reactContainer$"+_s,Qu="__reactEvents$"+_s,Qy="__reactListeners$"+_s,Ky="__reactHandles$"+_s;function wi(t){var r=t[Bn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[lr]||o[Bn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=$f(t);t!==null;){if(o=t[Bn])return o;t=$f(t)}return r}t=o,o=t.parentNode}return null}function xo(t){return t=t[Bn]||t[lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Ka(t){return t[Do]||null}var Ku=[],Es=-1;function xr(t){return{current:t}}function qe(t){0>Es||(t.current=Ku[Es],Ku[Es]=null,Es--)}function be(t,r){Es++,Ku[Es]=t.current,t.current=r}var Or={},Vt=xr(Or),$t=xr(!1),Ti=Or;function ws(t,r){var o=t.type.contextTypes;if(!o)return Or;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function qt(t){return t=t.childContextTypes,t!=null}function Ga(){qe($t),qe(Vt)}function qf(t,r,o){if(Vt.current!==Or)throw Error(n(168));be(Vt,r),be($t,o)}function Hf(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,xe(t)||"Unknown",h));return C({},o,u)}function Xa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Or,Ti=Vt.current,be(Vt,t),be($t,$t.current),!0}function Wf(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Hf(t,r,Ti),u.__reactInternalMemoizedMergedChildContext=t,qe($t),qe(Vt),be(Vt,t)):qe($t),be($t,o)}var ur=null,Ya=!1,Gu=!1;function Qf(t){ur===null?ur=[t]:ur.push(t)}function Gy(t){Ya=!0,Qf(t)}function Mr(){if(!Gu&&ur!==null){Gu=!0;var t=0,r=Ce;try{var o=ur;for(Ce=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}ur=null,Ya=!1}catch(h){throw ur!==null&&(ur=ur.slice(t+1)),es(di,Mr),h}finally{Ce=r,Gu=!1}}return null}var Ts=[],Is=0,Ja=null,Za=0,cn=[],hn=0,Ii=null,cr=1,hr="";function Si(t,r){Ts[Is++]=Za,Ts[Is++]=Ja,Ja=t,Za=r}function Kf(t,r,o){cn[hn++]=cr,cn[hn++]=hr,cn[hn++]=Ii,Ii=t;var u=cr;t=hr;var h=32-Ft(u)-1;u&=~(1<<h),o+=1;var p=32-Ft(r)+h;if(30<p){var _=h-h%5;p=(u&(1<<_)-1).toString(32),u>>=_,h-=_,cr=1<<32-Ft(r)+h|o<<h|u,hr=p+t}else cr=1<<p|o<<h|u,hr=t}function Xu(t){t.return!==null&&(Si(t,1),Kf(t,1,0))}function Yu(t){for(;t===Ja;)Ja=Ts[--Is],Ts[Is]=null,Za=Ts[--Is],Ts[Is]=null;for(;t===Ii;)Ii=cn[--hn],cn[hn]=null,hr=cn[--hn],cn[hn]=null,cr=cn[--hn],cn[hn]=null}var tn=null,nn=null,Ke=!1,Pn=null;function Gf(t,r){var o=mn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Xf(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,tn=t,nn=Dr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,tn=t,nn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ii!==null?{id:cr,overflow:hr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=mn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,tn=t,nn=null,!0):!1;default:return!1}}function Ju(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zu(t){if(Ke){var r=nn;if(r){var o=r;if(!Xf(t,r)){if(Ju(t))throw Error(n(418));r=Dr(o.nextSibling);var u=tn;r&&Xf(t,r)?Gf(u,o):(t.flags=t.flags&-4097|2,Ke=!1,tn=t)}}else{if(Ju(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ke=!1,tn=t}}}function Yf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function el(t){if(t!==tn)return!1;if(!Ke)return Yf(t),Ke=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!qu(t.type,t.memoizedProps)),r&&(r=nn)){if(Ju(t))throw Jf(),Error(n(418));for(;r;)Gf(t,r),r=Dr(r.nextSibling)}if(Yf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){nn=Dr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}nn=null}}else nn=tn?Dr(t.stateNode.nextSibling):null;return!0}function Jf(){for(var t=nn;t;)t=Dr(t.nextSibling)}function Ss(){nn=tn=null,Ke=!1}function ec(t){Pn===null?Pn=[t]:Pn.push(t)}var Xy=ge.ReactCurrentBatchConfig;function kn(t,r){if(t&&t.defaultProps){r=C({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}var tl=xr(null),nl=null,As=null,tc=null;function nc(){tc=As=nl=null}function rc(t){var r=tl.current;qe(tl),t._currentValue=r}function ic(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Cs(t,r){nl=t,tc=As=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Ht=!0),t.firstContext=null)}function fn(t){var r=t._currentValue;if(tc!==t)if(t={context:t,memoizedValue:r,next:null},As===null){if(nl===null)throw Error(n(308));As=t,nl.dependencies={lanes:0,firstContext:t}}else As=As.next=t;return r}var Ai=null;function sc(t){Ai===null?Ai=[t]:Ai.push(t)}function Zf(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,sc(r)):(o.next=h.next,h.next=o),r.interleaved=o,fr(t,u)}function fr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Lr=!1;function oc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ed(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Fr(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Ne&2)!==0){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,fr(t,o)}return h=u.interleaved,h===null?(r.next=r,sc(u)):(r.next=h.next,h.next=r),u.interleaved=r,fr(t,o)}function rl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Cr(t,o)}}function td(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function il(t,r,o,u){var h=t.updateQueue;Lr=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var R=w,U=R.next;R.next=null,_===null?p=U:_.next=U,_=R;var W=t.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==_&&(w===null?W.firstBaseUpdate=U:w.next=U,W.lastBaseUpdate=R))}if(p!==null){var Q=h.baseState;_=0,W=U=R=null,w=p;do{var q=w.lane,ee=w.eventTime;if((u&q)===q){W!==null&&(W=W.next={eventTime:ee,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var ie=t,oe=w;switch(q=r,ee=o,oe.tag){case 1:if(ie=oe.payload,typeof ie=="function"){Q=ie.call(ee,Q,q);break e}Q=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=oe.payload,q=typeof ie=="function"?ie.call(ee,Q,q):ie,q==null)break e;Q=C({},Q,q);break e;case 2:Lr=!0}}w.callback!==null&&w.lane!==0&&(t.flags|=64,q=h.effects,q===null?h.effects=[w]:q.push(w))}else ee={eventTime:ee,lane:q,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(U=W=ee,R=Q):W=W.next=ee,_|=q;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;q=w,w=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);if(W===null&&(R=Q),h.baseState=R,h.firstBaseUpdate=U,h.lastBaseUpdate=W,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Pi|=_,t.lanes=_,t.memoizedState=Q}}function nd(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var rd=new i.Component().refs;function ac(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:C({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var sl={isMounted:function(t){return(t=t._reactInternals)?En(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=zt(),h=Br(t),p=dr(u,h);p.payload=r,o!=null&&(p.callback=o),r=Fr(t,p,h),r!==null&&(Dn(r,t,h,u),rl(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=zt(),h=Br(t),p=dr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Fr(t,p,h),r!==null&&(Dn(r,t,h,u),rl(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=zt(),u=Br(t),h=dr(o,u);h.tag=2,r!=null&&(h.callback=r),r=Fr(t,h,u),r!==null&&(Dn(r,t,u,o),rl(r,t,u))}};function id(t,r,o,u,h,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!Ro(o,u)||!Ro(h,p):!0}function sd(t,r,o){var u=!1,h=Or,p=r.contextType;return typeof p=="object"&&p!==null?p=fn(p):(h=qt(r)?Ti:Vt.current,u=r.contextTypes,p=(u=u!=null)?ws(t,h):Or),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=sl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function od(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&sl.enqueueReplaceState(r,r.state,null)}function lc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs=rd,oc(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=fn(p):(p=qt(r)?Ti:Vt.current,h.context=ws(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(ac(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&sl.enqueueReplaceState(h,h.state,null),il(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Oo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var w=h.refs;w===rd&&(w=h.refs={}),_===null?delete w[p]:w[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function ol(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function ad(t){var r=t._init;return r(t._payload)}function ld(t){function r(L,P){if(t){var F=L.deletions;F===null?(L.deletions=[P],L.flags|=16):F.push(P)}}function o(L,P){if(!t)return null;for(;P!==null;)r(L,P),P=P.sibling;return null}function u(L,P){for(L=new Map;P!==null;)P.key!==null?L.set(P.key,P):L.set(P.index,P),P=P.sibling;return L}function h(L,P){return L=$r(L,P),L.index=0,L.sibling=null,L}function p(L,P,F){return L.index=F,t?(F=L.alternate,F!==null?(F=F.index,F<P?(L.flags|=2,P):F):(L.flags|=2,P)):(L.flags|=1048576,P)}function _(L){return t&&L.alternate===null&&(L.flags|=2),L}function w(L,P,F,G){return P===null||P.tag!==6?(P=Hc(F,L.mode,G),P.return=L,P):(P=h(P,F),P.return=L,P)}function R(L,P,F,G){var ae=F.type;return ae===V?W(L,P,F.props.children,G,F.key):P!==null&&(P.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Pt&&ad(ae)===P.type)?(G=h(P,F.props),G.ref=Oo(L,P,F),G.return=L,G):(G=Al(F.type,F.key,F.props,null,L.mode,G),G.ref=Oo(L,P,F),G.return=L,G)}function U(L,P,F,G){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=Wc(F,L.mode,G),P.return=L,P):(P=h(P,F.children||[]),P.return=L,P)}function W(L,P,F,G,ae){return P===null||P.tag!==7?(P=Di(F,L.mode,G,ae),P.return=L,P):(P=h(P,F),P.return=L,P)}function Q(L,P,F){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Hc(""+P,L.mode,F),P.return=L,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Fe:return F=Al(P.type,P.key,P.props,null,L.mode,F),F.ref=Oo(L,null,P),F.return=L,F;case Te:return P=Wc(P,L.mode,F),P.return=L,P;case Pt:var G=P._init;return Q(L,G(P._payload),F)}if(Zn(P)||ue(P))return P=Di(P,L.mode,F,null),P.return=L,P;ol(L,P)}return null}function q(L,P,F,G){var ae=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ae!==null?null:w(L,P,""+F,G);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Fe:return F.key===ae?R(L,P,F,G):null;case Te:return F.key===ae?U(L,P,F,G):null;case Pt:return ae=F._init,q(L,P,ae(F._payload),G)}if(Zn(F)||ue(F))return ae!==null?null:W(L,P,F,G,null);ol(L,F)}return null}function ee(L,P,F,G,ae){if(typeof G=="string"&&G!==""||typeof G=="number")return L=L.get(F)||null,w(P,L,""+G,ae);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Fe:return L=L.get(G.key===null?F:G.key)||null,R(P,L,G,ae);case Te:return L=L.get(G.key===null?F:G.key)||null,U(P,L,G,ae);case Pt:var he=G._init;return ee(L,P,F,he(G._payload),ae)}if(Zn(G)||ue(G))return L=L.get(F)||null,W(P,L,G,ae,null);ol(P,G)}return null}function ie(L,P,F,G){for(var ae=null,he=null,fe=P,me=P=0,_t=null;fe!==null&&me<F.length;me++){fe.index>me?(_t=fe,fe=null):_t=fe.sibling;var Me=q(L,fe,F[me],G);if(Me===null){fe===null&&(fe=_t);break}t&&fe&&Me.alternate===null&&r(L,fe),P=p(Me,P,me),he===null?ae=Me:he.sibling=Me,he=Me,fe=_t}if(me===F.length)return o(L,fe),Ke&&Si(L,me),ae;if(fe===null){for(;me<F.length;me++)fe=Q(L,F[me],G),fe!==null&&(P=p(fe,P,me),he===null?ae=fe:he.sibling=fe,he=fe);return Ke&&Si(L,me),ae}for(fe=u(L,fe);me<F.length;me++)_t=ee(fe,L,me,F[me],G),_t!==null&&(t&&_t.alternate!==null&&fe.delete(_t.key===null?me:_t.key),P=p(_t,P,me),he===null?ae=_t:he.sibling=_t,he=_t);return t&&fe.forEach(function(qr){return r(L,qr)}),Ke&&Si(L,me),ae}function oe(L,P,F,G){var ae=ue(F);if(typeof ae!="function")throw Error(n(150));if(F=ae.call(F),F==null)throw Error(n(151));for(var he=ae=null,fe=P,me=P=0,_t=null,Me=F.next();fe!==null&&!Me.done;me++,Me=F.next()){fe.index>me?(_t=fe,fe=null):_t=fe.sibling;var qr=q(L,fe,Me.value,G);if(qr===null){fe===null&&(fe=_t);break}t&&fe&&qr.alternate===null&&r(L,fe),P=p(qr,P,me),he===null?ae=qr:he.sibling=qr,he=qr,fe=_t}if(Me.done)return o(L,fe),Ke&&Si(L,me),ae;if(fe===null){for(;!Me.done;me++,Me=F.next())Me=Q(L,Me.value,G),Me!==null&&(P=p(Me,P,me),he===null?ae=Me:he.sibling=Me,he=Me);return Ke&&Si(L,me),ae}for(fe=u(L,fe);!Me.done;me++,Me=F.next())Me=ee(fe,L,me,Me.value,G),Me!==null&&(t&&Me.alternate!==null&&fe.delete(Me.key===null?me:Me.key),P=p(Me,P,me),he===null?ae=Me:he.sibling=Me,he=Me);return t&&fe.forEach(function(k_){return r(L,k_)}),Ke&&Si(L,me),ae}function tt(L,P,F,G){if(typeof F=="object"&&F!==null&&F.type===V&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Fe:e:{for(var ae=F.key,he=P;he!==null;){if(he.key===ae){if(ae=F.type,ae===V){if(he.tag===7){o(L,he.sibling),P=h(he,F.props.children),P.return=L,L=P;break e}}else if(he.elementType===ae||typeof ae=="object"&&ae!==null&&ae.$$typeof===Pt&&ad(ae)===he.type){o(L,he.sibling),P=h(he,F.props),P.ref=Oo(L,he,F),P.return=L,L=P;break e}o(L,he);break}else r(L,he);he=he.sibling}F.type===V?(P=Di(F.props.children,L.mode,G,F.key),P.return=L,L=P):(G=Al(F.type,F.key,F.props,null,L.mode,G),G.ref=Oo(L,P,F),G.return=L,L=G)}return _(L);case Te:e:{for(he=F.key;P!==null;){if(P.key===he)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){o(L,P.sibling),P=h(P,F.children||[]),P.return=L,L=P;break e}else{o(L,P);break}else r(L,P);P=P.sibling}P=Wc(F,L.mode,G),P.return=L,L=P}return _(L);case Pt:return he=F._init,tt(L,P,he(F._payload),G)}if(Zn(F))return ie(L,P,F,G);if(ue(F))return oe(L,P,F,G);ol(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,P!==null&&P.tag===6?(o(L,P.sibling),P=h(P,F),P.return=L,L=P):(o(L,P),P=Hc(F,L.mode,G),P.return=L,L=P),_(L)):o(L,P)}return tt}var Rs=ld(!0),ud=ld(!1),Mo={},bn=xr(Mo),Lo=xr(Mo),Fo=xr(Mo);function Ci(t){if(t===Mo)throw Error(n(174));return t}function uc(t,r){switch(be(Fo,r),be(Lo,t),be(bn,Mo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:lt(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=lt(r,t)}qe(bn),be(bn,r)}function Ps(){qe(bn),qe(Lo),qe(Fo)}function cd(t){Ci(Fo.current);var r=Ci(bn.current),o=lt(r,t.type);r!==o&&(be(Lo,t),be(bn,o))}function cc(t){Lo.current===t&&(qe(bn),qe(Lo))}var Ge=xr(0);function al(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var hc=[];function fc(){for(var t=0;t<hc.length;t++)hc[t]._workInProgressVersionPrimary=null;hc.length=0}var ll=ge.ReactCurrentDispatcher,dc=ge.ReactCurrentBatchConfig,Ri=0,Xe=null,ct=null,gt=null,ul=!1,Uo=!1,jo=0,Yy=0;function Nt(){throw Error(n(321))}function pc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Rn(t[o],r[o]))return!1;return!0}function mc(t,r,o,u,h,p){if(Ri=p,Xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ll.current=t===null||t.memoizedState===null?t_:n_,t=o(u,h),Uo){p=0;do{if(Uo=!1,jo=0,25<=p)throw Error(n(301));p+=1,gt=ct=null,r.updateQueue=null,ll.current=r_,t=o(u,h)}while(Uo)}if(ll.current=fl,r=ct!==null&&ct.next!==null,Ri=0,gt=ct=Xe=null,ul=!1,r)throw Error(n(300));return t}function gc(){var t=jo!==0;return jo=0,t}function $n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Xe.memoizedState=gt=t:gt=gt.next=t,gt}function dn(){if(ct===null){var t=Xe.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var r=gt===null?Xe.memoizedState:gt.next;if(r!==null)gt=r,ct=t;else{if(t===null)throw Error(n(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},gt===null?Xe.memoizedState=gt=t:gt=gt.next=t}return gt}function zo(t,r){return typeof r=="function"?r(t):r}function yc(t){var r=dn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=ct,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var w=_=null,R=null,U=p;do{var W=U.lane;if((Ri&W)===W)R!==null&&(R=R.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var Q={lane:W,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};R===null?(w=R=Q,_=u):R=R.next=Q,Xe.lanes|=W,Pi|=W}U=U.next}while(U!==null&&U!==p);R===null?_=u:R.next=w,Rn(u,r.memoizedState)||(Ht=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=R,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Xe.lanes|=p,Pi|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function _c(t){var r=dn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=t(p,_.action),_=_.next;while(_!==h);Rn(p,r.memoizedState)||(Ht=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function hd(){}function fd(t,r){var o=Xe,u=dn(),h=r(),p=!Rn(u.memoizedState,h);if(p&&(u.memoizedState=h,Ht=!0),u=u.queue,vc(md.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||gt!==null&&gt.memoizedState.tag&1){if(o.flags|=2048,Bo(9,pd.bind(null,o,u,h,r),void 0,null),yt===null)throw Error(n(349));(Ri&30)!==0||dd(o,r,h)}return h}function dd(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function pd(t,r,o,u){r.value=o,r.getSnapshot=u,gd(r)&&yd(t)}function md(t,r,o){return o(function(){gd(r)&&yd(t)})}function gd(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Rn(t,o)}catch{return!0}}function yd(t){var r=fr(t,1);r!==null&&Dn(r,t,1,-1)}function _d(t){var r=$n();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:t},r.queue=t,t=t.dispatch=e_.bind(null,Xe,t),[r.memoizedState,t]}function Bo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Xe.updateQueue,r===null?(r={lastEffect:null,stores:null},Xe.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function vd(){return dn().memoizedState}function cl(t,r,o,u){var h=$n();Xe.flags|=t,h.memoizedState=Bo(1|r,o,void 0,u===void 0?null:u)}function hl(t,r,o,u){var h=dn();u=u===void 0?null:u;var p=void 0;if(ct!==null){var _=ct.memoizedState;if(p=_.destroy,u!==null&&pc(u,_.deps)){h.memoizedState=Bo(r,o,p,u);return}}Xe.flags|=t,h.memoizedState=Bo(1|r,o,p,u)}function Ed(t,r){return cl(8390656,8,t,r)}function vc(t,r){return hl(2048,8,t,r)}function wd(t,r){return hl(4,2,t,r)}function Td(t,r){return hl(4,4,t,r)}function Id(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Sd(t,r,o){return o=o!=null?o.concat([t]):null,hl(4,4,Id.bind(null,r,t),o)}function Ec(){}function Ad(t,r){var o=dn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&pc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function Cd(t,r){var o=dn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&pc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function Rd(t,r,o){return(Ri&21)===0?(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=o):(Rn(o,r)||(o=gi(),Xe.lanes|=o,Pi|=o,t.baseState=!0),r)}function Jy(t,r){var o=Ce;Ce=o!==0&&4>o?o:4,t(!0);var u=dc.transition;dc.transition={};try{t(!1),r()}finally{Ce=o,dc.transition=u}}function Pd(){return dn().memoizedState}function Zy(t,r,o){var u=Br(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},kd(t))Vd(r,o);else if(o=Zf(t,r,o,u),o!==null){var h=zt();Dn(o,t,u,h),Nd(o,r,u)}}function e_(t,r,o){var u=Br(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(kd(t))Vd(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,w=p(_,o);if(h.hasEagerState=!0,h.eagerState=w,Rn(w,_)){var R=r.interleaved;R===null?(h.next=h,sc(r)):(h.next=R.next,R.next=h),r.interleaved=h;return}}catch{}finally{}o=Zf(t,r,h,u),o!==null&&(h=zt(),Dn(o,t,u,h),Nd(o,r,u))}}function kd(t){var r=t.alternate;return t===Xe||r!==null&&r===Xe}function Vd(t,r){Uo=ul=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Nd(t,r,o){if((o&4194240)!==0){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Cr(t,o)}}var fl={readContext:fn,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},t_={readContext:fn,useCallback:function(t,r){return $n().memoizedState=[t,r===void 0?null:r],t},useContext:fn,useEffect:Ed,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,cl(4194308,4,Id.bind(null,r,t),o)},useLayoutEffect:function(t,r){return cl(4194308,4,t,r)},useInsertionEffect:function(t,r){return cl(4,2,t,r)},useMemo:function(t,r){var o=$n();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=$n();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=Zy.bind(null,Xe,t),[u.memoizedState,t]},useRef:function(t){var r=$n();return t={current:t},r.memoizedState=t},useState:_d,useDebugValue:Ec,useDeferredValue:function(t){return $n().memoizedState=t},useTransition:function(){var t=_d(!1),r=t[0];return t=Jy.bind(null,t[1]),$n().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Xe,h=$n();if(Ke){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),yt===null)throw Error(n(349));(Ri&30)!==0||dd(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,Ed(md.bind(null,u,p,t),[t]),u.flags|=2048,Bo(9,pd.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=$n(),r=yt.identifierPrefix;if(Ke){var o=hr,u=cr;o=(u&~(1<<32-Ft(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=jo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Yy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},n_={readContext:fn,useCallback:Ad,useContext:fn,useEffect:vc,useImperativeHandle:Sd,useInsertionEffect:wd,useLayoutEffect:Td,useMemo:Cd,useReducer:yc,useRef:vd,useState:function(){return yc(zo)},useDebugValue:Ec,useDeferredValue:function(t){var r=dn();return Rd(r,ct.memoizedState,t)},useTransition:function(){var t=yc(zo)[0],r=dn().memoizedState;return[t,r]},useMutableSource:hd,useSyncExternalStore:fd,useId:Pd,unstable_isNewReconciler:!1},r_={readContext:fn,useCallback:Ad,useContext:fn,useEffect:vc,useImperativeHandle:Sd,useInsertionEffect:wd,useLayoutEffect:Td,useMemo:Cd,useReducer:_c,useRef:vd,useState:function(){return _c(zo)},useDebugValue:Ec,useDeferredValue:function(t){var r=dn();return ct===null?r.memoizedState=t:Rd(r,ct.memoizedState,t)},useTransition:function(){var t=_c(zo)[0],r=dn().memoizedState;return[t,r]},useMutableSource:hd,useSyncExternalStore:fd,useId:Pd,unstable_isNewReconciler:!1};function ks(t,r){try{var o="",u=r;do o+=De(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function wc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function Tc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var i_=typeof WeakMap=="function"?WeakMap:Map;function Dd(t,r,o){o=dr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){vl||(vl=!0,Fc=u),Tc(t,r)},o}function xd(t,r,o){o=dr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){Tc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){Tc(t,r),typeof u!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Od(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new i_;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=__.bind(null,t,r,o),r.then(t,t))}function Md(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Ld(t,r,o,u,h){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=dr(-1,1),r.tag=2,Fr(o,r,1))),o.lanes|=1),t):(t.flags|=65536,t.lanes=h,t)}var s_=ge.ReactCurrentOwner,Ht=!1;function jt(t,r,o,u){r.child=t===null?ud(r,null,o,u):Rs(r,t.child,o,u)}function Fd(t,r,o,u,h){o=o.render;var p=r.ref;return Cs(r,h),u=mc(t,r,o,u,p,h),o=gc(),t!==null&&!Ht?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,pr(t,r,h)):(Ke&&o&&Xu(r),r.flags|=1,jt(t,r,u,h),r.child)}function Ud(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!qc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,jd(t,r,p,u,h)):(t=Al(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,(t.lanes&h)===0){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:Ro,o(_,u)&&t.ref===r.ref)return pr(t,r,h)}return r.flags|=1,t=$r(p,u),t.ref=r.ref,t.return=r,r.child=t}function jd(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(Ro(p,u)&&t.ref===r.ref)if(Ht=!1,r.pendingProps=u=p,(t.lanes&h)!==0)(t.flags&131072)!==0&&(Ht=!0);else return r.lanes=t.lanes,pr(t,r,h)}return Ic(t,r,o,u,h)}function zd(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},be(Ns,rn),rn|=o;else{if((o&1073741824)===0)return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,be(Ns,rn),rn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,be(Ns,rn),rn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,be(Ns,rn),rn|=u;return jt(t,r,h,o),r.child}function Bd(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function Ic(t,r,o,u,h){var p=qt(o)?Ti:Vt.current;return p=ws(r,p),Cs(r,h),o=mc(t,r,o,u,p,h),u=gc(),t!==null&&!Ht?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,pr(t,r,h)):(Ke&&u&&Xu(r),r.flags|=1,jt(t,r,o,h),r.child)}function bd(t,r,o,u,h){if(qt(o)){var p=!0;Xa(r)}else p=!1;if(Cs(r,h),r.stateNode===null)pl(t,r),sd(r,o,u),lc(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,w=r.memoizedProps;_.props=w;var R=_.context,U=o.contextType;typeof U=="object"&&U!==null?U=fn(U):(U=qt(o)?Ti:Vt.current,U=ws(r,U));var W=o.getDerivedStateFromProps,Q=typeof W=="function"||typeof _.getSnapshotBeforeUpdate=="function";Q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==u||R!==U)&&od(r,_,u,U),Lr=!1;var q=r.memoizedState;_.state=q,il(r,u,_,h),R=r.memoizedState,w!==u||q!==R||$t.current||Lr?(typeof W=="function"&&(ac(r,o,W,u),R=r.memoizedState),(w=Lr||id(r,o,w,u,q,R,U))?(Q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=R),_.props=u,_.state=R,_.context=U,u=w):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,ed(t,r),w=r.memoizedProps,U=r.type===r.elementType?w:kn(r.type,w),_.props=U,Q=r.pendingProps,q=_.context,R=o.contextType,typeof R=="object"&&R!==null?R=fn(R):(R=qt(o)?Ti:Vt.current,R=ws(r,R));var ee=o.getDerivedStateFromProps;(W=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==Q||q!==R)&&od(r,_,u,R),Lr=!1,q=r.memoizedState,_.state=q,il(r,u,_,h);var ie=r.memoizedState;w!==Q||q!==ie||$t.current||Lr?(typeof ee=="function"&&(ac(r,o,ee,u),ie=r.memoizedState),(U=Lr||id(r,o,U,u,q,ie,R)||!1)?(W||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,ie,R),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,ie,R)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||w===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=ie),_.props=u,_.state=ie,_.context=R,u=U):(typeof _.componentDidUpdate!="function"||w===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),u=!1)}return Sc(t,r,o,u,p,h)}function Sc(t,r,o,u,h,p){Bd(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&Wf(r,o,!1),pr(t,r,p);u=r.stateNode,s_.current=r;var w=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=Rs(r,t.child,null,p),r.child=Rs(r,null,w,p)):jt(t,r,w,p),r.memoizedState=u.state,h&&Wf(r,o,!0),r.child}function $d(t){var r=t.stateNode;r.pendingContext?qf(t,r.pendingContext,r.pendingContext!==r.context):r.context&&qf(t,r.context,!1),uc(t,r.containerInfo)}function qd(t,r,o,u,h){return Ss(),ec(h),r.flags|=256,jt(t,r,o,u),r.child}var Ac={dehydrated:null,treeContext:null,retryLane:0};function Cc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hd(t,r,o){var u=r.pendingProps,h=Ge.current,p=!1,_=(r.flags&128)!==0,w;if((w=_)||(w=t!==null&&t.memoizedState===null?!1:(h&2)!==0),w?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),be(Ge,h&1),t===null)return Zu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:t.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},(u&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Cl(_,u,0,null),t=Di(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=Cc(o),r.memoizedState=Ac,t):Rc(r,_));if(h=t.memoizedState,h!==null&&(w=h.dehydrated,w!==null))return o_(t,r,_,u,w,h,o);if(p){p=u.fallback,_=r.mode,h=t.child,w=h.sibling;var R={mode:"hidden",children:u.children};return(_&1)===0&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=R,r.deletions=null):(u=$r(h,R),u.subtreeFlags=h.subtreeFlags&14680064),w!==null?p=$r(w,p):(p=Di(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?Cc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=Ac,u}return p=t.child,t=p.sibling,u=$r(p,{mode:"visible",children:u.children}),(r.mode&1)===0&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function Rc(t,r){return r=Cl({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function dl(t,r,o,u){return u!==null&&ec(u),Rs(r,t.child,null,o),t=Rc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function o_(t,r,o,u,h,p,_){if(o)return r.flags&256?(r.flags&=-257,u=wc(Error(n(422))),dl(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=Cl({mode:"visible",children:u.children},h,0,null),p=Di(p,h,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,(r.mode&1)!==0&&Rs(r,t.child,null,_),r.child.memoizedState=Cc(_),r.memoizedState=Ac,p);if((r.mode&1)===0)return dl(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var w=u.dgst;return u=w,p=Error(n(419)),u=wc(p,u,void 0),dl(t,r,_,u)}if(w=(_&t.childLanes)!==0,Ht||w){if(u=yt,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(u.suspendedLanes|_))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,fr(t,h),Dn(u,t,h,-1))}return $c(),u=wc(Error(n(421))),dl(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=v_.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,nn=Dr(h.nextSibling),tn=r,Ke=!0,Pn=null,t!==null&&(cn[hn++]=cr,cn[hn++]=hr,cn[hn++]=Ii,cr=t.id,hr=t.overflow,Ii=r),r=Rc(r,u.children),r.flags|=4096,r)}function Wd(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),ic(t.return,r,o)}function Pc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function Qd(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(jt(t,r,u.children,o),u=Ge.current,(u&2)!==0)u=u&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wd(t,o,r);else if(t.tag===19)Wd(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(be(Ge,u),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&al(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Pc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&al(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Pc(r,!0,o,null,p);break;case"together":Pc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function pl(t,r){(r.mode&1)===0&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function pr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Pi|=r.lanes,(o&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=$r(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=$r(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function a_(t,r,o){switch(r.tag){case 3:$d(r),Ss();break;case 5:cd(r);break;case 1:qt(r.type)&&Xa(r);break;case 4:uc(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;be(tl,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?(be(Ge,Ge.current&1),r.flags|=128,null):(o&r.child.childLanes)!==0?Hd(t,r,o):(be(Ge,Ge.current&1),t=pr(t,r,o),t!==null?t.sibling:null);be(Ge,Ge.current&1);break;case 19:if(u=(o&r.childLanes)!==0,(t.flags&128)!==0){if(u)return Qd(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),be(Ge,Ge.current),u)break;return null;case 22:case 23:return r.lanes=0,zd(t,r,o)}return pr(t,r,o)}var Kd,kc,Gd,Xd;Kd=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},kc=function(){},Gd=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Ci(bn.current);var p=null;switch(o){case"input":h=si(t,h),u=si(t,u),p=[];break;case"select":h=C({},h,{value:void 0}),u=C({},u,{value:void 0}),p=[];break;case"textarea":h=to(t,h),u=to(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Qa)}ao(o,u);var _;o=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var w=h[U];for(_ in w)w.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var R=u[U];if(w=h?.[U],u.hasOwnProperty(U)&&R!==w&&(R!=null||w!=null))if(U==="style")if(w){for(_ in w)!w.hasOwnProperty(_)||R&&R.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in R)R.hasOwnProperty(_)&&w[_]!==R[_]&&(o||(o={}),o[_]=R[_])}else o||(p||(p=[]),p.push(U,o)),o=R;else U==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,w=w?w.__html:void 0,R!=null&&w!==R&&(p=p||[]).push(U,R)):U==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(U,""+R):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(R!=null&&U==="onScroll"&&$e("scroll",t),p||w===R||(p=[])):(p=p||[]).push(U,R))}o&&(p=p||[]).push("style",o);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},Xd=function(t,r,o,u){o!==u&&(r.flags|=4)};function bo(t,r){if(!Ke)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Dt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function l_(t,r,o){var u=r.pendingProps;switch(Yu(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(r),null;case 1:return qt(r.type)&&Ga(),Dt(r),null;case 3:return u=r.stateNode,Ps(),qe($t),qe(Vt),fc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(el(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Pn!==null&&(zc(Pn),Pn=null))),kc(t,r),Dt(r),null;case 5:cc(r);var h=Ci(Fo.current);if(o=r.type,t!==null&&r.stateNode!=null)Gd(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Dt(r),null}if(t=Ci(bn.current),el(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[Bn]=r,u[Do]=p,t=(r.mode&1)!==0,o){case"dialog":$e("cancel",u),$e("close",u);break;case"iframe":case"object":case"embed":$e("load",u);break;case"video":case"audio":for(h=0;h<ko.length;h++)$e(ko[h],u);break;case"source":$e("error",u);break;case"img":case"image":case"link":$e("error",u),$e("load",u);break;case"details":$e("toggle",u);break;case"input":$i(u,p),$e("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},$e("invalid",u);break;case"textarea":Hi(u,p),$e("invalid",u)}ao(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var w=p[_];_==="children"?typeof w=="string"?u.textContent!==w&&(p.suppressHydrationWarning!==!0&&Wa(u.textContent,w,t),h=["children",w]):typeof w=="number"&&u.textContent!==""+w&&(p.suppressHydrationWarning!==!0&&Wa(u.textContent,w,t),h=["children",""+w]):a.hasOwnProperty(_)&&w!=null&&_==="onScroll"&&$e("scroll",u)}switch(o){case"input":Jn(u),_a(u,p,!0);break;case"textarea":Jn(u),no(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Qa)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=at(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[Bn]=r,t[Do]=u,Kd(t,r,!1,!1),r.stateNode=t;e:{switch(_=lo(o,u),o){case"dialog":$e("cancel",t),$e("close",t),h=u;break;case"iframe":case"object":case"embed":$e("load",t),h=u;break;case"video":case"audio":for(h=0;h<ko.length;h++)$e(ko[h],t);h=u;break;case"source":$e("error",t),h=u;break;case"img":case"image":case"link":$e("error",t),$e("load",t),h=u;break;case"details":$e("toggle",t),h=u;break;case"input":$i(t,u),h=si(t,u),$e("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=C({},u,{value:void 0}),$e("invalid",t);break;case"textarea":Hi(t,u),h=to(t,u),$e("invalid",t);break;default:h=u}ao(o,h),w=h;for(p in w)if(w.hasOwnProperty(p)){var R=w[p];p==="style"?so(t,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&ro(t,R)):p==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&wr(t,R):typeof R=="number"&&wr(t,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?R!=null&&p==="onScroll"&&$e("scroll",t):R!=null&&se(t,p,R,_))}switch(o){case"input":Jn(t),_a(t,u,!1);break;case"textarea":Jn(t),no(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Oe(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?er(t,!!u.multiple,p,!1):u.defaultValue!=null&&er(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Qa)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Dt(r),null;case 6:if(t&&r.stateNode!=null)Xd(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Ci(Fo.current),Ci(bn.current),el(r)){if(u=r.stateNode,o=r.memoizedProps,u[Bn]=r,(p=u.nodeValue!==o)&&(t=tn,t!==null))switch(t.tag){case 3:Wa(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wa(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Bn]=r,r.stateNode=u}return Dt(r),null;case 13:if(qe(Ge),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&nn!==null&&(r.mode&1)!==0&&(r.flags&128)===0)Jf(),Ss(),r.flags|=98560,p=!1;else if(p=el(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Bn]=r}else Ss(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Dt(r),p=!1}else Pn!==null&&(zc(Pn),Pn=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Ge.current&1)!==0?ht===0&&(ht=3):$c())),r.updateQueue!==null&&(r.flags|=4),Dt(r),null);case 4:return Ps(),kc(t,r),t===null&&Vo(r.stateNode.containerInfo),Dt(r),null;case 10:return rc(r.type._context),Dt(r),null;case 17:return qt(r.type)&&Ga(),Dt(r),null;case 19:if(qe(Ge),p=r.memoizedState,p===null)return Dt(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)bo(p,!1);else{if(ht!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(_=al(t),_!==null){for(r.flags|=128,bo(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return be(Ge,Ge.current&1|2),r.child}t=t.sibling}p.tail!==null&&Be()>Ds&&(r.flags|=128,u=!0,bo(p,!1),r.lanes=4194304)}else{if(!u)if(t=al(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),bo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ke)return Dt(r),null}else 2*Be()-p.renderingStartTime>Ds&&o!==1073741824&&(r.flags|=128,u=!0,bo(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=Be(),r.sibling=null,o=Ge.current,be(Ge,u?o&1|2:o&1),r):(Dt(r),null);case 22:case 23:return bc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&(r.mode&1)!==0?(rn&1073741824)!==0&&(Dt(r),r.subtreeFlags&6&&(r.flags|=8192)):Dt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function u_(t,r){switch(Yu(r),r.tag){case 1:return qt(r.type)&&Ga(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ps(),qe($t),qe(Vt),fc(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return cc(r),null;case 13:if(qe(Ge),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Ss()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return qe(Ge),null;case 4:return Ps(),null;case 10:return rc(r.type._context),null;case 22:case 23:return bc(),null;case 24:return null;default:return null}}var ml=!1,xt=!1,c_=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Vs(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Je(t,r,u)}else o.current=null}function Vc(t,r,o){try{o()}catch(u){Je(t,r,u)}}var Yd=!1;function h_(t,r){if(bu=kr,t=Pf(),Ou(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,w=-1,R=-1,U=0,W=0,Q=t,q=null;t:for(;;){for(var ee;Q!==o||h!==0&&Q.nodeType!==3||(w=_+h),Q!==p||u!==0&&Q.nodeType!==3||(R=_+u),Q.nodeType===3&&(_+=Q.nodeValue.length),(ee=Q.firstChild)!==null;)q=Q,Q=ee;for(;;){if(Q===t)break t;if(q===o&&++U===h&&(w=_),q===p&&++W===u&&(R=_),(ee=Q.nextSibling)!==null)break;Q=q,q=Q.parentNode}Q=ee}o=w===-1||R===-1?null:{start:w,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for($u={focusedElem:t,selectionRange:o},kr=!1,ne=r;ne!==null;)if(r=ne,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ne=t;else for(;ne!==null;){r=ne;try{var ie=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(ie!==null){var oe=ie.memoizedProps,tt=ie.memoizedState,L=r.stateNode,P=L.getSnapshotBeforeUpdate(r.elementType===r.type?oe:kn(r.type,oe),tt);L.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(G){Je(r,r.return,G)}if(t=r.sibling,t!==null){t.return=r.return,ne=t;break}ne=r.return}return ie=Yd,Yd=!1,ie}function $o(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Vc(r,o,p)}h=h.next}while(h!==u)}}function gl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Nc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Jd(t){var r=t.alternate;r!==null&&(t.alternate=null,Jd(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Bn],delete r[Do],delete r[Qu],delete r[Qy],delete r[Ky])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zd(t){return t.tag===5||t.tag===3||t.tag===4}function ep(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Qa));else if(u!==4&&(t=t.child,t!==null))for(Dc(t,r,o),t=t.sibling;t!==null;)Dc(t,r,o),t=t.sibling}function xc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(xc(t,r,o),t=t.sibling;t!==null;)xc(t,r,o),t=t.sibling}var Tt=null,Vn=!1;function Ur(t,r,o){for(o=o.child;o!==null;)tp(t,r,o),o=o.sibling}function tp(t,r,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(pi,o)}catch{}switch(o.tag){case 5:xt||Vs(o,r);case 6:var u=Tt,h=Vn;Tt=null,Ur(t,r,o),Tt=u,Vn=h,Tt!==null&&(Vn?(t=Tt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Tt.removeChild(o.stateNode));break;case 18:Tt!==null&&(Vn?(t=Tt,o=o.stateNode,t.nodeType===8?Wu(t.parentNode,o):t.nodeType===1&&Wu(t,o),An(t)):Wu(Tt,o.stateNode));break;case 4:u=Tt,h=Vn,Tt=o.stateNode.containerInfo,Vn=!0,Ur(t,r,o),Tt=u,Vn=h;break;case 0:case 11:case 14:case 15:if(!xt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&Vc(o,r,_),h=h.next}while(h!==u)}Ur(t,r,o);break;case 1:if(!xt&&(Vs(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(w){Je(o,r,w)}Ur(t,r,o);break;case 21:Ur(t,r,o);break;case 22:o.mode&1?(xt=(u=xt)||o.memoizedState!==null,Ur(t,r,o),xt=u):Ur(t,r,o);break;default:Ur(t,r,o)}}function np(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new c_),r.forEach(function(u){var h=E_.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Nn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,_=r,w=_;e:for(;w!==null;){switch(w.tag){case 5:Tt=w.stateNode,Vn=!1;break e;case 3:Tt=w.stateNode.containerInfo,Vn=!0;break e;case 4:Tt=w.stateNode.containerInfo,Vn=!0;break e}w=w.return}if(Tt===null)throw Error(n(160));tp(p,_,h),Tt=null,Vn=!1;var R=h.alternate;R!==null&&(R.return=null),h.return=null}catch(U){Je(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)rp(r,t),r=r.sibling}function rp(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(r,t),qn(t),u&4){try{$o(3,t,t.return),gl(3,t)}catch(oe){Je(t,t.return,oe)}try{$o(5,t,t.return)}catch(oe){Je(t,t.return,oe)}}break;case 1:Nn(r,t),qn(t),u&512&&o!==null&&Vs(o,o.return);break;case 5:if(Nn(r,t),qn(t),u&512&&o!==null&&Vs(o,o.return),t.flags&32){var h=t.stateNode;try{wr(h,"")}catch(oe){Je(t,t.return,oe)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,w=t.type,R=t.updateQueue;if(t.updateQueue=null,R!==null)try{w==="input"&&p.type==="radio"&&p.name!=null&&Zs(h,p),lo(w,_);var U=lo(w,p);for(_=0;_<R.length;_+=2){var W=R[_],Q=R[_+1];W==="style"?so(h,Q):W==="dangerouslySetInnerHTML"?ro(h,Q):W==="children"?wr(h,Q):se(h,W,Q,U)}switch(w){case"input":eo(h,p);break;case"textarea":Wi(h,p);break;case"select":var q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var ee=p.value;ee!=null?er(h,!!p.multiple,ee,!1):q!==!!p.multiple&&(p.defaultValue!=null?er(h,!!p.multiple,p.defaultValue,!0):er(h,!!p.multiple,p.multiple?[]:"",!1))}h[Do]=p}catch(oe){Je(t,t.return,oe)}}break;case 6:if(Nn(r,t),qn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(oe){Je(t,t.return,oe)}}break;case 3:if(Nn(r,t),qn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{An(r.containerInfo)}catch(oe){Je(t,t.return,oe)}break;case 4:Nn(r,t),qn(t);break;case 13:Nn(r,t),qn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Lc=Be())),u&4&&np(t);break;case 22:if(W=o!==null&&o.memoizedState!==null,t.mode&1?(xt=(U=xt)||W,Nn(r,t),xt=U):Nn(r,t),qn(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!W&&(t.mode&1)!==0)for(ne=t,W=t.child;W!==null;){for(Q=ne=W;ne!==null;){switch(q=ne,ee=q.child,q.tag){case 0:case 11:case 14:case 15:$o(4,q,q.return);break;case 1:Vs(q,q.return);var ie=q.stateNode;if(typeof ie.componentWillUnmount=="function"){u=q,o=q.return;try{r=u,ie.props=r.memoizedProps,ie.state=r.memoizedState,ie.componentWillUnmount()}catch(oe){Je(u,o,oe)}}break;case 5:Vs(q,q.return);break;case 22:if(q.memoizedState!==null){op(Q);continue}}ee!==null?(ee.return=q,ne=ee):op(Q)}W=W.sibling}e:for(W=null,Q=t;;){if(Q.tag===5){if(W===null){W=Q;try{h=Q.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(w=Q.stateNode,R=Q.memoizedProps.style,_=R!=null&&R.hasOwnProperty("display")?R.display:null,w.style.display=io("display",_))}catch(oe){Je(t,t.return,oe)}}}else if(Q.tag===6){if(W===null)try{Q.stateNode.nodeValue=U?"":Q.memoizedProps}catch(oe){Je(t,t.return,oe)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===t)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===t)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===t)break e;W===Q&&(W=null),Q=Q.return}W===Q&&(W=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:Nn(r,t),qn(t),u&4&&np(t);break;case 21:break;default:Nn(r,t),qn(t)}}function qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Zd(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(wr(h,""),u.flags&=-33);var p=ep(t);xc(t,p,h);break;case 3:case 4:var _=u.stateNode.containerInfo,w=ep(t);Dc(t,w,_);break;default:throw Error(n(161))}}catch(R){Je(t,t.return,R)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function f_(t,r,o){ne=t,ip(t)}function ip(t,r,o){for(var u=(t.mode&1)!==0;ne!==null;){var h=ne,p=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||ml;if(!_){var w=h.alternate,R=w!==null&&w.memoizedState!==null||xt;w=ml;var U=xt;if(ml=_,(xt=R)&&!U)for(ne=h;ne!==null;)_=ne,R=_.child,_.tag===22&&_.memoizedState!==null?ap(h):R!==null?(R.return=_,ne=R):ap(h);for(;p!==null;)ne=p,ip(p),p=p.sibling;ne=h,ml=w,xt=U}sp(t)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,ne=p):sp(t)}}function sp(t){for(;ne!==null;){var r=ne;if((r.flags&8772)!==0){var o=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:xt||gl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!xt)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:kn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&nd(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}nd(r,_,o)}break;case 5:var w=r.stateNode;if(o===null&&r.flags&4){o=w;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var W=U.memoizedState;if(W!==null){var Q=W.dehydrated;Q!==null&&An(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}xt||r.flags&512&&Nc(r)}catch(q){Je(r,r.return,q)}}if(r===t){ne=null;break}if(o=r.sibling,o!==null){o.return=r.return,ne=o;break}ne=r.return}}function op(t){for(;ne!==null;){var r=ne;if(r===t){ne=null;break}var o=r.sibling;if(o!==null){o.return=r.return,ne=o;break}ne=r.return}}function ap(t){for(;ne!==null;){var r=ne;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{gl(4,r)}catch(R){Je(r,o,R)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(R){Je(r,h,R)}}var p=r.return;try{Nc(r)}catch(R){Je(r,p,R)}break;case 5:var _=r.return;try{Nc(r)}catch(R){Je(r,_,R)}}}catch(R){Je(r,r.return,R)}if(r===t){ne=null;break}var w=r.sibling;if(w!==null){w.return=r.return,ne=w;break}ne=r.return}}var d_=Math.ceil,yl=ge.ReactCurrentDispatcher,Oc=ge.ReactCurrentOwner,pn=ge.ReactCurrentBatchConfig,Ne=0,yt=null,it=null,It=0,rn=0,Ns=xr(0),ht=0,qo=null,Pi=0,_l=0,Mc=0,Ho=null,Wt=null,Lc=0,Ds=1/0,mr=null,vl=!1,Fc=null,jr=null,El=!1,zr=null,wl=0,Wo=0,Uc=null,Tl=-1,Il=0;function zt(){return(Ne&6)!==0?Be():Tl!==-1?Tl:Tl=Be()}function Br(t){return(t.mode&1)===0?1:(Ne&2)!==0&&It!==0?It&-It:Xy.transition!==null?(Il===0&&(Il=gi()),Il):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:Eo(t.type)),t)}function Dn(t,r,o,u){if(50<Wo)throw Wo=0,Uc=null,Error(n(185));Ar(t,o,u),((Ne&2)===0||t!==yt)&&(t===yt&&((Ne&2)===0&&(_l|=o),ht===4&&br(t,It)),Qt(t,u),o===1&&Ne===0&&(r.mode&1)===0&&(Ds=Be()+500,Ya&&Mr()))}function Qt(t,r){var o=t.callbackNode;rr(t,r);var u=mi(t,t===yt?It:0);if(u===0)o!==null&&mo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&mo(o),r===1)t.tag===0?Gy(up.bind(null,t)):Qf(up.bind(null,t)),Hy(function(){(Ne&6)===0&&Mr()}),o=null;else{switch(Rr(u)){case 1:o=di;break;case 4:o=Tr;break;case 16:o=an;break;case 536870912:o=Ia;break;default:o=an}o=yp(o,lp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function lp(t,r){if(Tl=-1,Il=0,(Ne&6)!==0)throw Error(n(327));var o=t.callbackNode;if(xs()&&t.callbackNode!==o)return null;var u=mi(t,t===yt?It:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||r)r=Sl(t,u);else{r=u;var h=Ne;Ne|=2;var p=hp();(yt!==t||It!==r)&&(mr=null,Ds=Be()+500,Vi(t,r));do try{g_();break}catch(w){cp(t,w)}while(!0);nc(),yl.current=p,Ne=h,it!==null?r=0:(yt=null,It=0,r=ht)}if(r!==0){if(r===2&&(h=Jt(t),h!==0&&(u=h,r=jc(t,h))),r===1)throw o=qo,Vi(t,0),br(t,u),Qt(t,Be()),o;if(r===6)br(t,u);else{if(h=t.current.alternate,(u&30)===0&&!p_(h)&&(r=Sl(t,u),r===2&&(p=Jt(t),p!==0&&(u=p,r=jc(t,p))),r===1))throw o=qo,Vi(t,0),br(t,u),Qt(t,Be()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Ni(t,Wt,mr);break;case 3:if(br(t,u),(u&130023424)===u&&(r=Lc+500-Be(),10<r)){if(mi(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){zt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Hu(Ni.bind(null,t,Wt,mr),r);break}Ni(t,Wt,mr);break;case 4:if(br(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-Ft(u);p=1<<_,_=r[_],_>h&&(h=_),u&=~p}if(u=h,u=Be()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*d_(u/1960))-u,10<u){t.timeoutHandle=Hu(Ni.bind(null,t,Wt,mr),u);break}Ni(t,Wt,mr);break;case 5:Ni(t,Wt,mr);break;default:throw Error(n(329))}}}return Qt(t,Be()),t.callbackNode===o?lp.bind(null,t):null}function jc(t,r){var o=Ho;return t.current.memoizedState.isDehydrated&&(Vi(t,r).flags|=256),t=Sl(t,r),t!==2&&(r=Wt,Wt=o,r!==null&&zc(r)),t}function zc(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function p_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Rn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function br(t,r){for(r&=~Mc,r&=~_l,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ft(r),u=1<<o;t[o]=-1,r&=~u}}function up(t){if((Ne&6)!==0)throw Error(n(327));xs();var r=mi(t,0);if((r&1)===0)return Qt(t,Be()),null;var o=Sl(t,r);if(t.tag!==0&&o===2){var u=Jt(t);u!==0&&(r=u,o=jc(t,u))}if(o===1)throw o=qo,Vi(t,0),br(t,r),Qt(t,Be()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Ni(t,Wt,mr),Qt(t,Be()),null}function Bc(t,r){var o=Ne;Ne|=1;try{return t(r)}finally{Ne=o,Ne===0&&(Ds=Be()+500,Ya&&Mr())}}function ki(t){zr!==null&&zr.tag===0&&(Ne&6)===0&&xs();var r=Ne;Ne|=1;var o=pn.transition,u=Ce;try{if(pn.transition=null,Ce=1,t)return t()}finally{Ce=u,pn.transition=o,Ne=r,(Ne&6)===0&&Mr()}}function bc(){rn=Ns.current,qe(Ns)}function Vi(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,qy(o)),it!==null)for(o=it.return;o!==null;){var u=o;switch(Yu(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Ga();break;case 3:Ps(),qe($t),qe(Vt),fc();break;case 5:cc(u);break;case 4:Ps();break;case 13:qe(Ge);break;case 19:qe(Ge);break;case 10:rc(u.type._context);break;case 22:case 23:bc()}o=o.return}if(yt=t,it=t=$r(t.current,null),It=rn=r,ht=0,qo=null,Mc=_l=Pi=0,Wt=Ho=null,Ai!==null){for(r=0;r<Ai.length;r++)if(o=Ai[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,u.next=_}o.pending=u}Ai=null}return t}function cp(t,r){do{var o=it;try{if(nc(),ll.current=fl,ul){for(var u=Xe.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}ul=!1}if(Ri=0,gt=ct=Xe=null,Uo=!1,jo=0,Oc.current=null,o===null||o.return===null){ht=1,qo=r,it=null;break}e:{var p=t,_=o.return,w=o,R=r;if(r=It,w.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var U=R,W=w,Q=W.tag;if((W.mode&1)===0&&(Q===0||Q===11||Q===15)){var q=W.alternate;q?(W.updateQueue=q.updateQueue,W.memoizedState=q.memoizedState,W.lanes=q.lanes):(W.updateQueue=null,W.memoizedState=null)}var ee=Md(_);if(ee!==null){ee.flags&=-257,Ld(ee,_,w,p,r),ee.mode&1&&Od(p,U,r),r=ee,R=U;var ie=r.updateQueue;if(ie===null){var oe=new Set;oe.add(R),r.updateQueue=oe}else ie.add(R);break e}else{if((r&1)===0){Od(p,U,r),$c();break e}R=Error(n(426))}}else if(Ke&&w.mode&1){var tt=Md(_);if(tt!==null){(tt.flags&65536)===0&&(tt.flags|=256),Ld(tt,_,w,p,r),ec(ks(R,w));break e}}p=R=ks(R,w),ht!==4&&(ht=2),Ho===null?Ho=[p]:Ho.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var L=Dd(p,R,r);td(p,L);break e;case 1:w=R;var P=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof P.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(jr===null||!jr.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var G=xd(p,w,r);td(p,G);break e}}p=p.return}while(p!==null)}dp(o)}catch(ae){r=ae,it===o&&o!==null&&(it=o=o.return);continue}break}while(!0)}function hp(){var t=yl.current;return yl.current=fl,t===null?fl:t}function $c(){(ht===0||ht===3||ht===2)&&(ht=4),yt===null||(Pi&268435455)===0&&(_l&268435455)===0||br(yt,It)}function Sl(t,r){var o=Ne;Ne|=2;var u=hp();(yt!==t||It!==r)&&(mr=null,Vi(t,r));do try{m_();break}catch(h){cp(t,h)}while(!0);if(nc(),Ne=o,yl.current=u,it!==null)throw Error(n(261));return yt=null,It=0,ht}function m_(){for(;it!==null;)fp(it)}function g_(){for(;it!==null&&!wa();)fp(it)}function fp(t){var r=gp(t.alternate,t,rn);t.memoizedProps=t.pendingProps,r===null?dp(t):it=r,Oc.current=null}function dp(t){var r=t;do{var o=r.alternate;if(t=r.return,(r.flags&32768)===0){if(o=l_(o,r,rn),o!==null){it=o;return}}else{if(o=u_(o,r),o!==null){o.flags&=32767,it=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,it=null;return}}if(r=r.sibling,r!==null){it=r;return}it=r=t}while(r!==null);ht===0&&(ht=5)}function Ni(t,r,o){var u=Ce,h=pn.transition;try{pn.transition=null,Ce=1,y_(t,r,o,u)}finally{pn.transition=h,Ce=u}return null}function y_(t,r,o,u){do xs();while(zr!==null);if((Ne&6)!==0)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(ze(t,p),t===yt&&(it=yt=null,It=0),(o.subtreeFlags&2064)===0&&(o.flags&2064)===0||El||(El=!0,yp(an,function(){return xs(),null})),p=(o.flags&15990)!==0,(o.subtreeFlags&15990)!==0||p){p=pn.transition,pn.transition=null;var _=Ce;Ce=1;var w=Ne;Ne|=4,Oc.current=null,h_(t,o),rp(o,t),Fy($u),kr=!!bu,$u=bu=null,t.current=o,f_(o),Cu(),Ne=w,Ce=_,pn.transition=p}else t.current=o;if(El&&(El=!1,zr=t,wl=h),p=t.pendingLanes,p===0&&(jr=null),Sa(o.stateNode),Qt(t,Be()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(vl)throw vl=!1,t=Fc,Fc=null,t;return(wl&1)!==0&&t.tag!==0&&xs(),p=t.pendingLanes,(p&1)!==0?t===Uc?Wo++:(Wo=0,Uc=t):Wo=0,Mr(),null}function xs(){if(zr!==null){var t=Rr(wl),r=pn.transition,o=Ce;try{if(pn.transition=null,Ce=16>t?16:t,zr===null)var u=!1;else{if(t=zr,zr=null,wl=0,(Ne&6)!==0)throw Error(n(331));var h=Ne;for(Ne|=4,ne=t.current;ne!==null;){var p=ne,_=p.child;if((ne.flags&16)!==0){var w=p.deletions;if(w!==null){for(var R=0;R<w.length;R++){var U=w[R];for(ne=U;ne!==null;){var W=ne;switch(W.tag){case 0:case 11:case 15:$o(8,W,p)}var Q=W.child;if(Q!==null)Q.return=W,ne=Q;else for(;ne!==null;){W=ne;var q=W.sibling,ee=W.return;if(Jd(W),W===U){ne=null;break}if(q!==null){q.return=ee,ne=q;break}ne=ee}}}var ie=p.alternate;if(ie!==null){var oe=ie.child;if(oe!==null){ie.child=null;do{var tt=oe.sibling;oe.sibling=null,oe=tt}while(oe!==null)}}ne=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,ne=_;else e:for(;ne!==null;){if(p=ne,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:$o(9,p,p.return)}var L=p.sibling;if(L!==null){L.return=p.return,ne=L;break e}ne=p.return}}var P=t.current;for(ne=P;ne!==null;){_=ne;var F=_.child;if((_.subtreeFlags&2064)!==0&&F!==null)F.return=_,ne=F;else e:for(_=P;ne!==null;){if(w=ne,(w.flags&2048)!==0)try{switch(w.tag){case 0:case 11:case 15:gl(9,w)}}catch(ae){Je(w,w.return,ae)}if(w===_){ne=null;break e}var G=w.sibling;if(G!==null){G.return=w.return,ne=G;break e}ne=w.return}}if(Ne=h,Mr(),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(pi,t)}catch{}u=!0}return u}finally{Ce=o,pn.transition=r}}return!1}function pp(t,r,o){r=ks(o,r),r=Dd(t,r,1),t=Fr(t,r,1),r=zt(),t!==null&&(Ar(t,1,r),Qt(t,r))}function Je(t,r,o){if(t.tag===3)pp(t,t,o);else for(;r!==null;){if(r.tag===3){pp(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(jr===null||!jr.has(u))){t=ks(o,t),t=xd(r,t,1),r=Fr(r,t,1),t=zt(),r!==null&&(Ar(r,1,t),Qt(r,t));break}}r=r.return}}function __(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=zt(),t.pingedLanes|=t.suspendedLanes&o,yt===t&&(It&o)===o&&(ht===4||ht===3&&(It&130023424)===It&&500>Be()-Lc?Vi(t,0):Mc|=o),Qt(t,r)}function mp(t,r){r===0&&((t.mode&1)===0?r=1:(r=ns,ns<<=1,(ns&130023424)===0&&(ns=4194304)));var o=zt();t=fr(t,r),t!==null&&(Ar(t,r,o),Qt(t,o))}function v_(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),mp(t,o)}function E_(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),mp(t,o)}var gp;gp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||$t.current)Ht=!0;else{if((t.lanes&o)===0&&(r.flags&128)===0)return Ht=!1,a_(t,r,o);Ht=(t.flags&131072)!==0}else Ht=!1,Ke&&(r.flags&1048576)!==0&&Kf(r,Za,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;pl(t,r),t=r.pendingProps;var h=ws(r,Vt.current);Cs(r,o),h=mc(null,r,u,t,h,o);var p=gc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,qt(u)?(p=!0,Xa(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,oc(r),h.updater=sl,r.stateNode=h,h._reactInternals=r,lc(r,u,t,o),r=Sc(null,r,u,!0,p,o)):(r.tag=0,Ke&&p&&Xu(r),jt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(pl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=T_(u),t=kn(u,t),h){case 0:r=Ic(null,r,u,t,o);break e;case 1:r=bd(null,r,u,t,o);break e;case 11:r=Fd(null,r,u,t,o);break e;case 14:r=Ud(null,r,u,kn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:kn(u,h),Ic(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:kn(u,h),bd(t,r,u,h,o);case 3:e:{if($d(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,ed(t,r),il(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=ks(Error(n(423)),r),r=qd(t,r,u,o,h);break e}else if(u!==h){h=ks(Error(n(424)),r),r=qd(t,r,u,o,h);break e}else for(nn=Dr(r.stateNode.containerInfo.firstChild),tn=r,Ke=!0,Pn=null,o=ud(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ss(),u===h){r=pr(t,r,o);break e}jt(t,r,u,o)}r=r.child}return r;case 5:return cd(r),t===null&&Zu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,_=h.children,qu(u,h)?_=null:p!==null&&qu(u,p)&&(r.flags|=32),Bd(t,r),jt(t,r,_,o),r.child;case 6:return t===null&&Zu(r),null;case 13:return Hd(t,r,o);case 4:return uc(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Rs(r,null,u,o):jt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:kn(u,h),Fd(t,r,u,h,o);case 7:return jt(t,r,r.pendingProps,o),r.child;case 8:return jt(t,r,r.pendingProps.children,o),r.child;case 12:return jt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,_=h.value,be(tl,u._currentValue),u._currentValue=_,p!==null)if(Rn(p.value,_)){if(p.children===h.children&&!$t.current){r=pr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var w=p.dependencies;if(w!==null){_=p.child;for(var R=w.firstContext;R!==null;){if(R.context===u){if(p.tag===1){R=dr(-1,o&-o),R.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var W=U.pending;W===null?R.next=R:(R.next=W.next,W.next=R),U.pending=R}}p.lanes|=o,R=p.alternate,R!==null&&(R.lanes|=o),ic(p.return,o,r),w.lanes|=o;break}R=R.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,w=_.alternate,w!==null&&(w.lanes|=o),ic(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}jt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Cs(r,o),h=fn(h),u=u(h),r.flags|=1,jt(t,r,u,o),r.child;case 14:return u=r.type,h=kn(u,r.pendingProps),h=kn(u.type,h),Ud(t,r,u,h,o);case 15:return jd(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:kn(u,h),pl(t,r),r.tag=1,qt(u)?(t=!0,Xa(r)):t=!1,Cs(r,o),sd(r,u,h),lc(r,u,h,o),Sc(null,r,u,!0,t,o);case 19:return Qd(t,r,o);case 22:return zd(t,r,o)}throw Error(n(156,r.tag))};function yp(t,r){return es(t,r)}function w_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mn(t,r,o,u){return new w_(t,r,o,u)}function qc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function T_(t){if(typeof t=="function")return qc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O)return 11;if(t===Rt)return 14}return 2}function $r(t,r){var o=t.alternate;return o===null?(o=mn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Al(t,r,o,u,h,p){var _=2;if(u=t,typeof t=="function")qc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case V:return Di(o.children,h,p,r);case T:_=8,h|=8;break;case A:return t=mn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case I:return t=mn(13,o,r,h),t.elementType=I,t.lanes=p,t;case Ze:return t=mn(19,o,r,h),t.elementType=Ze,t.lanes=p,t;case je:return Cl(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:_=10;break e;case x:_=9;break e;case O:_=11;break e;case Rt:_=14;break e;case Pt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=mn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Di(t,r,o,u){return t=mn(7,t,u,r),t.lanes=o,t}function Cl(t,r,o,u){return t=mn(22,t,u,r),t.elementType=je,t.lanes=o,t.stateNode={isHidden:!1},t}function Hc(t,r,o){return t=mn(6,t,null,r),t.lanes=o,t}function Wc(t,r,o){return r=mn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function I_(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sr(0),this.expirationTimes=Sr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Qc(t,r,o,u,h,p,_,w,R){return t=new I_(t,r,o,w,R),r===1?(r=1,p===!0&&(r|=8)):r=0,p=mn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},oc(p),t}function S_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function _p(t){if(!t)return Or;t=t._reactInternals;e:{if(En(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(qt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(qt(o))return Hf(t,o,r)}return r}function vp(t,r,o,u,h,p,_,w,R){return t=Qc(o,u,!0,t,h,p,_,w,R),t.context=_p(null),o=t.current,u=zt(),h=Br(o),p=dr(u,h),p.callback=r??null,Fr(o,p,h),t.current.lanes=h,Ar(t,h,u),Qt(t,u),t}function Rl(t,r,o,u){var h=r.current,p=zt(),_=Br(h);return o=_p(o),r.context===null?r.context=o:r.pendingContext=o,r=dr(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Fr(h,r,_),t!==null&&(Dn(t,h,_,p),rl(t,h,_)),_}function Pl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ep(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Kc(t,r){Ep(t,r),(t=t.alternate)&&Ep(t,r)}function A_(){return null}var wp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gc(t){this._internalRoot=t}kl.prototype.render=Gc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Rl(t,r,null,null)},kl.prototype.unmount=Gc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;ki(function(){Rl(null,t,null,null)}),r[lr]=null}};function kl(t){this._internalRoot=t}kl.prototype.unstable_scheduleHydration=function(t){if(t){var r=ka();t={blockedOn:null,target:t,priority:r};for(var o=0;o<Fn.length&&r!==0&&r<Fn[o].priority;o++);Fn.splice(o,0,t),o===0&&Da(t)}};function Xc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Tp(){}function C_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var U=Pl(_);p.call(U)}}var _=vp(r,u,t,0,null,!1,!1,"",Tp);return t._reactRootContainer=_,t[lr]=_.current,Vo(t.nodeType===8?t.parentNode:t),ki(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var w=u;u=function(){var U=Pl(R);w.call(U)}}var R=Qc(t,0,!1,null,null,!1,!1,"",Tp);return t._reactRootContainer=R,t[lr]=R.current,Vo(t.nodeType===8?t.parentNode:t),ki(function(){Rl(r,R,o,u)}),R}function Nl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var w=h;h=function(){var R=Pl(_);w.call(R)}}Rl(r,_,t,h)}else _=C_(o,r,t,h,u);return Pl(_)}Ra=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ir(r.pendingLanes);o!==0&&(Cr(r,o|1),Qt(r,Be()),(Ne&6)===0&&(Ds=Be()+500,Mr()))}break;case 13:ki(function(){var u=fr(t,1);if(u!==null){var h=zt();Dn(u,t,1,h)}}),Kc(t,1)}},rs=function(t){if(t.tag===13){var r=fr(t,134217728);if(r!==null){var o=zt();Dn(r,t,134217728,o)}Kc(t,134217728)}},Pa=function(t){if(t.tag===13){var r=Br(t),o=fr(t,r);if(o!==null){var u=zt();Dn(o,t,r,u)}Kc(t,r)}},ka=function(){return Ce},Va=function(t,r){var o=Ce;try{return Ce=t,r()}finally{Ce=o}},Ki=function(t,r,o){switch(r){case"input":if(eo(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=Ka(u);if(!h)throw Error(n(90));bi(u),eo(u,h)}}}break;case"textarea":Wi(t,o);break;case"select":r=o.value,r!=null&&er(t,!!o.multiple,r,!1)}},ui=Bc,co=ki;var R_={usingClientEntryPoint:!1,Events:[xo,vs,Ka,Mn,uo,Bc]},Qo={findFiberByHostInstance:wi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},P_={bundleType:Qo.bundleType,version:Qo.version,rendererPackageName:Qo.rendererPackageName,rendererConfig:Qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ge.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=po(t),t===null?null:t.stateNode},findFiberByHostInstance:Qo.findFiberByHostInstance||A_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{pi=Dl.inject(P_),Yt=Dl}catch{}}return Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R_,Kt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xc(r))throw Error(n(200));return S_(t,r,null,o)},Kt.createRoot=function(t,r){if(!Xc(t))throw Error(n(299));var o=!1,u="",h=wp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Qc(t,1,!1,null,null,o,!1,u,h),t[lr]=r.current,Vo(t.nodeType===8?t.parentNode:t),new Gc(r)},Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=po(r),t=t===null?null:t.stateNode,t},Kt.flushSync=function(t){return ki(t)},Kt.hydrate=function(t,r,o){if(!Vl(r))throw Error(n(200));return Nl(null,t,r,!0,o)},Kt.hydrateRoot=function(t,r,o){if(!Xc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",_=wp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=vp(r,null,t,1,o??null,h,!1,p,_),t[lr]=r.current,Vo(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new kl(r)},Kt.render=function(t,r,o){if(!Vl(r))throw Error(n(200));return Nl(null,t,r,!1,o)},Kt.unmountComponentAtNode=function(t){if(!Vl(t))throw Error(n(40));return t._reactRootContainer?(ki(function(){Nl(null,null,t,!1,function(){t._reactRootContainer=null,t[lr]=null})}),!0):!1},Kt.unstable_batchedUpdates=Bc,Kt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Vl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Nl(t,r,o,!1,u)},Kt.version="18.2.0-next-9e3b772b8-20220608",Kt}var Vp;function F_(){if(Vp)return Zc.exports;Vp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Zc.exports=L_(),Zc.exports}var Np;function U_(){if(Np)return xl;Np=1;var i=F_();return xl.createRoot=i.createRoot,xl.hydrateRoot=i.hydrateRoot,xl}var j_=U_();const z_=$m(j_);function B_({onAdd:i}){const[e,n]=gn.useState(""),[s,a]=gn.useState("media"),[c,f]=gn.useState(""),g=y=>{y.preventDefault(),e.trim()&&(i({text:e.trim(),priority:s,date:c,completed:!1,createdAt:Date.now()}),n(""),a("media"),f(""))};return Ee.jsxs("form",{onSubmit:g,children:[Ee.jsx("input",{type:"text",placeholder:"Nueva tarea...",value:e,onChange:y=>n(y.target.value),required:!0,autoFocus:!0}),Ee.jsxs("select",{value:s,onChange:y=>a(y.target.value),children:[Ee.jsx("option",{value:"alta",children:"Alta"}),Ee.jsx("option",{value:"media",children:"Media"}),Ee.jsx("option",{value:"baja",children:"Baja"})]}),Ee.jsx("input",{type:"date",value:c,onChange:y=>f(y.target.value)}),Ee.jsx("button",{type:"submit",children:"Agregar"})]})}function b_({task:i,toggleComplete:e,deleteTask:n,editTask:s}){const a=new Date().toISOString().split("T")[0];let c=null;if(i.date)if(i.date<a)c=Ee.jsx("span",{className:"task-alert alert-danger",children:"⚠️ Vencida"});else{const f=(new Date(i.date)-new Date(a))/864e5;f<=1&&f>=0&&(c=Ee.jsx("span",{className:"task-alert alert-warning",children:"🔔 Hoy"}))}return Ee.jsxs("li",{className:`${i.completed?"completed":""} ${i.priority}`,children:[Ee.jsx("span",{onClick:()=>e(i.id,i.completed),children:i.text}),Ee.jsxs("small",{className:"priority-label",children:["(",i.priority,")"]}),c,Ee.jsxs("div",{className:"actions",children:[Ee.jsx("button",{onClick:s,children:"✏️"}),Ee.jsx("button",{onClick:()=>n(i.id),children:"❌"})]})]})}function $_({tasks:i,toggleComplete:e,deleteTask:n,editTask:s}){return Ee.jsx("ul",{children:i.map(a=>{const c=()=>e(a.id,a.completed),f=()=>n(a.id),g=()=>{const y=prompt("Editar tarea:",a.text);y&&y.trim()!==""&&y!==a.text&&s(a.id,y.trim())};return Ee.jsx(b_,{task:a,toggleComplete:c,deleteTask:f,editTask:g},a.id)})})}function q_({filter:i,setFilter:e,order:n,setOrder:s}){return Ee.jsxs("div",{className:"filters",children:[Ee.jsx("button",{className:`filter-btn ${i==="all"?"active":""}`,onClick:()=>e("all"),children:"Todas"}),Ee.jsx("button",{className:`filter-btn ${i==="completed"?"active":""}`,onClick:()=>e("completed"),children:"Completadas"}),Ee.jsx("button",{className:`filter-btn ${i==="pending"?"active":""}`,onClick:()=>e("pending"),children:"Pendientes"}),Ee.jsx("label",{children:"Ordenar por:"}),Ee.jsxs("select",{value:n,onChange:a=>s(a.target.value),children:[Ee.jsx("option",{value:"fecha",children:"Fecha de creación"}),Ee.jsx("option",{value:"prioridad",children:"Prioridad"}),Ee.jsx("option",{value:"vencimiento",children:"Fecha de vencimiento"})]})]})}function H_({search:i,setSearch:e}){return Ee.jsx("div",{className:"search-container",children:Ee.jsx("input",{type:"text",placeholder:"🔍 Buscar tarea...",value:i,onChange:n=>e(n.target.value)})})}function W_({pending:i,completed:e}){return Ee.jsxs("div",{id:"task-counter",children:["Pendientes: ",Ee.jsx("span",{children:i})," | Completadas: ",Ee.jsx("span",{children:e})]})}const Q_=()=>{};var Dp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},K_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],f=i[n++],g=i[n++],y=((a&7)<<18|(c&63)<<12|(f&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],f=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},Hm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],f=a+1<i.length,g=f?i[a+1]:0,y=a+2<i.length,v=y?i[a+2]:0,S=c>>2,N=(c&3)<<4|g>>4;let D=(g&15)<<2|v>>6,z=v&63;y||(z=64,f||(D=64)),s.push(n[S],n[N],n[D],n[z])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(qm(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):K_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],g=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const N=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||g==null||v==null||N==null)throw new G_;const D=c<<2|g>>4;if(s.push(D),v!==64){const z=g<<4&240|v>>2;if(s.push(z),N!==64){const K=v<<6&192|N;s.push(K)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class G_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const X_=function(i){const e=qm(i);return Hm.encodeByteArray(e,!0)},Wl=function(i){return X_(i).replace(/\./g,"")},Y_=function(i){try{return Hm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_=()=>J_().__FIREBASE_DEFAULTS__,ev=()=>{if(typeof process>"u"||typeof Dp>"u")return;const i=Dp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},tv=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Y_(i[1]);return e&&JSON.parse(e)},Oh=()=>{try{return Q_()||Z_()||ev()||tv()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},nv=i=>Oh()?.emulatorHosts?.[i],rv=i=>{const e=nv(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Wm=()=>Oh()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sv(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Wl(JSON.stringify(n)),Wl(JSON.stringify(f)),""].join(".")}const ea={};function av(){const i={prod:[],emulator:[]};for(const e of Object.keys(ea))ea[e]?i.emulator.push(e):i.prod.push(e);return i}function lv(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let xp=!1;function uv(i,e){if(typeof window>"u"||typeof document>"u"||!Mh(window.location.host)||ea[i]===e||ea[i]||xp)return;ea[i]=e;function n(D){return`__firebase__banner__${D}`}const s="__firebase__banner",c=av().prod.length>0;function f(){const D=document.getElementById(s);D&&D.remove()}function g(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function y(D,z){D.setAttribute("width","24"),D.setAttribute("id",z),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function v(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{xp=!0,f()},D}function S(D,z){D.setAttribute("id",z),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function N(){const D=lv(s),z=n("text"),K=document.getElementById(z)||document.createElement("span"),X=n("learnmore"),$=document.getElementById(X)||document.createElement("a"),_e=n("preprendIcon"),Z=document.getElementById(_e)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const se=D.element;g(se),S($,X);const ge=v();y(Z,_e),se.append(Z,K,$,ge),document.body.appendChild(se)}c?(K.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",z)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hv(){const i=Oh()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fv(){return!hv()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dv(){try{return typeof indexedDB=="object"}catch{return!1}}function pv(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="FirebaseError";class Ks extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=mv,Object.setPrototypeOf(this,Ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qm.prototype.create)}}class Qm{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?gv(c,s):"Error",g=`${this.serviceName}: ${f} (${a}).`;return new Ks(a,g,s)}}function gv(i,e){return i.replace(yv,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const yv=/\{\$([^}]+)}/g;function Ql(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],f=e[a];if(Op(c)&&Op(f)){if(!Ql(c,f))return!1}else if(c!==f)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Op(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(i){return i&&i._delegate?i._delegate:i}class sa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new iv;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ev(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,f]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(c);s===g&&f.resolve(a)}return a}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(e),this.onInitCallbacks.set(s,a);const c=this.instances.get(s);return c&&e(c,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:vv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vv(i){return i===xi?void 0:i}function Ev(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new _v(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ke||(ke={}));const Tv={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Iv=ke.INFO,Sv={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Av=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=Sv[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Km{constructor(e){this.name=e,this._logLevel=Iv,this._logHandler=Av,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const Cv=(i,e)=>e.some(n=>i instanceof n);let Mp,Lp;function Rv(){return Mp||(Mp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Pv(){return Lp||(Lp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gm=new WeakMap,hh=new WeakMap,Xm=new WeakMap,nh=new WeakMap,Lh=new WeakMap;function kv(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",f)},c=()=>{n(Wr(i.result)),a()},f=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&Gm.set(n,i)}).catch(()=>{}),Lh.set(e,i),e}function Vv(i){if(hh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",f),i.removeEventListener("abort",f)},c=()=>{n(),a()},f=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",f),i.addEventListener("abort",f)});hh.set(i,e)}let fh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return hh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Xm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function Nv(i){fh=i(fh)}function Dv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(rh(this),e,...n);return Xm.set(s,e.sort?e.sort():[e]),Wr(s)}:Pv().includes(i)?function(...e){return i.apply(rh(this),e),Wr(Gm.get(this))}:function(...e){return Wr(i.apply(rh(this),e))}}function xv(i){return typeof i=="function"?Dv(i):(i instanceof IDBTransaction&&Vv(i),Cv(i,Rv())?new Proxy(i,fh):i)}function Wr(i){if(i instanceof IDBRequest)return kv(i);if(nh.has(i))return nh.get(i);const e=xv(i);return e!==i&&(nh.set(i,e),Lh.set(e,i)),e}const rh=i=>Lh.get(i);function Ov(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const f=indexedDB.open(i,e),g=Wr(f);return s&&f.addEventListener("upgradeneeded",y=>{s(Wr(f.result),y.oldVersion,y.newVersion,Wr(f.transaction),y)}),n&&f.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),g.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),g}const Mv=["get","getKey","getAll","getAllKeys","count"],Lv=["put","add","delete","clear"],ih=new Map;function Fp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(ih.get(e))return ih.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=Lv.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||Mv.includes(n)))return;const c=async function(f,...g){const y=this.transaction(f,a?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(g.shift())),(await Promise.all([v[n](...g),a&&y.done]))[0]};return ih.set(e,c),c}Nv(i=>({...i,get:(e,n,s)=>Fp(e,n)||i.get(e,n,s),has:(e,n)=>!!Fp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Uv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Uv(i){return i.getComponent()?.type==="VERSION"}const dh="@firebase/app",Up="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yr=new Km("@firebase/app"),jv="@firebase/app-compat",zv="@firebase/analytics-compat",Bv="@firebase/analytics",bv="@firebase/app-check-compat",$v="@firebase/app-check",qv="@firebase/auth",Hv="@firebase/auth-compat",Wv="@firebase/database",Qv="@firebase/data-connect",Kv="@firebase/database-compat",Gv="@firebase/functions",Xv="@firebase/functions-compat",Yv="@firebase/installations",Jv="@firebase/installations-compat",Zv="@firebase/messaging",eE="@firebase/messaging-compat",tE="@firebase/performance",nE="@firebase/performance-compat",rE="@firebase/remote-config",iE="@firebase/remote-config-compat",sE="@firebase/storage",oE="@firebase/storage-compat",aE="@firebase/firestore",lE="@firebase/ai",uE="@firebase/firestore-compat",cE="firebase",hE="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="[DEFAULT]",fE={[dh]:"fire-core",[jv]:"fire-core-compat",[Bv]:"fire-analytics",[zv]:"fire-analytics-compat",[$v]:"fire-app-check",[bv]:"fire-app-check-compat",[qv]:"fire-auth",[Hv]:"fire-auth-compat",[Wv]:"fire-rtdb",[Qv]:"fire-data-connect",[Kv]:"fire-rtdb-compat",[Gv]:"fire-fn",[Xv]:"fire-fn-compat",[Yv]:"fire-iid",[Jv]:"fire-iid-compat",[Zv]:"fire-fcm",[eE]:"fire-fcm-compat",[tE]:"fire-perf",[nE]:"fire-perf-compat",[rE]:"fire-rc",[iE]:"fire-rc-compat",[sE]:"fire-gcs",[oE]:"fire-gcs-compat",[aE]:"fire-fst",[uE]:"fire-fst-compat",[lE]:"fire-vertex","fire-js":"fire-js",[cE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Map,dE=new Map,mh=new Map;function jp(i,e){try{i.container.addComponent(e)}catch(n){yr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Gl(i){const e=i.name;if(mh.has(e))return yr.debug(`There were multiple attempts to register component ${e}.`),!1;mh.set(e,i);for(const n of Kl.values())jp(n,i);for(const n of dE.values())jp(n,i);return!0}function pE(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function mE(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qr=new Qm("app","Firebase",gE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=hE;function Ym(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:ph,automaticDataCollectionEnabled:!0,...e},a=s.name;if(typeof a!="string"||!a)throw Qr.create("bad-app-name",{appName:String(a)});if(n||(n=Wm()),!n)throw Qr.create("no-options");const c=Kl.get(a);if(c){if(Ql(n,c.options)&&Ql(s,c.config))return c;throw Qr.create("duplicate-app",{appName:a})}const f=new wv(a);for(const y of mh.values())f.addComponent(y);const g=new yE(n,s,f);return Kl.set(a,g),g}function vE(i=ph){const e=Kl.get(i);if(!e&&i===ph&&Wm())return Ym();if(!e)throw Qr.create("no-app",{appName:i});return e}function Us(i,e,n){let s=fE[i]??i;n&&(s+=`-${n}`);const a=s.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${s}" with version "${e}":`];a&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yr.warn(f.join(" "));return}Gl(new sa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firebase-heartbeat-database",wE=1,oa="firebase-heartbeat-store";let sh=null;function Jm(){return sh||(sh=Ov(EE,wE,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(oa)}catch(n){console.warn(n)}}}}).catch(i=>{throw Qr.create("idb-open",{originalErrorMessage:i.message})})),sh}async function TE(i){try{const n=(await Jm()).transaction(oa),s=await n.objectStore(oa).get(Zm(i));return await n.done,s}catch(e){if(e instanceof Ks)yr.warn(e.message);else{const n=Qr.create("idb-get",{originalErrorMessage:e?.message});yr.warn(n.message)}}}async function zp(i,e){try{const s=(await Jm()).transaction(oa,"readwrite");await s.objectStore(oa).put(e,Zm(i)),await s.done}catch(n){if(n instanceof Ks)yr.warn(n.message);else{const s=Qr.create("idb-set",{originalErrorMessage:n?.message});yr.warn(s.message)}}}function Zm(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=1024,SE=30;class AE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RE(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bp();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>SE){const a=PE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){yr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Bp(),{heartbeatsToSend:n,unsentEntries:s}=CE(this._heartbeatsCache.heartbeats),a=Wl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return yr.warn(e),""}}}function Bp(){return new Date().toISOString().substring(0,10)}function CE(i,e=IE){const n=[];let s=i.slice();for(const a of i){const c=n.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),bp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),bp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class RE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dv()?pv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TE(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return zp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return zp(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function bp(i){return Wl(JSON.stringify({version:2,heartbeats:i})).length}function PE(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(i){Gl(new sa("platform-logger",e=>new Fv(e),"PRIVATE")),Gl(new sa("heartbeat",e=>new AE(e),"PRIVATE")),Us(dh,Up,i),Us(dh,Up,"esm2020"),Us("fire-js","")}kE("");var $p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kr,eg;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,T){function A(){}A.prototype=T.prototype,V.D=T.prototype,V.prototype=new A,V.prototype.constructor=V,V.C=function(k,x,O){for(var I=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)I[Ze-2]=arguments[Ze];return T.prototype[x].apply(k,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(V,T,A){A||(A=0);var k=Array(16);if(typeof T=="string")for(var x=0;16>x;++x)k[x]=T.charCodeAt(A++)|T.charCodeAt(A++)<<8|T.charCodeAt(A++)<<16|T.charCodeAt(A++)<<24;else for(x=0;16>x;++x)k[x]=T[A++]|T[A++]<<8|T[A++]<<16|T[A++]<<24;T=V.g[0],A=V.g[1],x=V.g[2];var O=V.g[3],I=T+(O^A&(x^O))+k[0]+3614090360&4294967295;T=A+(I<<7&4294967295|I>>>25),I=O+(x^T&(A^x))+k[1]+3905402710&4294967295,O=T+(I<<12&4294967295|I>>>20),I=x+(A^O&(T^A))+k[2]+606105819&4294967295,x=O+(I<<17&4294967295|I>>>15),I=A+(T^x&(O^T))+k[3]+3250441966&4294967295,A=x+(I<<22&4294967295|I>>>10),I=T+(O^A&(x^O))+k[4]+4118548399&4294967295,T=A+(I<<7&4294967295|I>>>25),I=O+(x^T&(A^x))+k[5]+1200080426&4294967295,O=T+(I<<12&4294967295|I>>>20),I=x+(A^O&(T^A))+k[6]+2821735955&4294967295,x=O+(I<<17&4294967295|I>>>15),I=A+(T^x&(O^T))+k[7]+4249261313&4294967295,A=x+(I<<22&4294967295|I>>>10),I=T+(O^A&(x^O))+k[8]+1770035416&4294967295,T=A+(I<<7&4294967295|I>>>25),I=O+(x^T&(A^x))+k[9]+2336552879&4294967295,O=T+(I<<12&4294967295|I>>>20),I=x+(A^O&(T^A))+k[10]+4294925233&4294967295,x=O+(I<<17&4294967295|I>>>15),I=A+(T^x&(O^T))+k[11]+2304563134&4294967295,A=x+(I<<22&4294967295|I>>>10),I=T+(O^A&(x^O))+k[12]+1804603682&4294967295,T=A+(I<<7&4294967295|I>>>25),I=O+(x^T&(A^x))+k[13]+4254626195&4294967295,O=T+(I<<12&4294967295|I>>>20),I=x+(A^O&(T^A))+k[14]+2792965006&4294967295,x=O+(I<<17&4294967295|I>>>15),I=A+(T^x&(O^T))+k[15]+1236535329&4294967295,A=x+(I<<22&4294967295|I>>>10),I=T+(x^O&(A^x))+k[1]+4129170786&4294967295,T=A+(I<<5&4294967295|I>>>27),I=O+(A^x&(T^A))+k[6]+3225465664&4294967295,O=T+(I<<9&4294967295|I>>>23),I=x+(T^A&(O^T))+k[11]+643717713&4294967295,x=O+(I<<14&4294967295|I>>>18),I=A+(O^T&(x^O))+k[0]+3921069994&4294967295,A=x+(I<<20&4294967295|I>>>12),I=T+(x^O&(A^x))+k[5]+3593408605&4294967295,T=A+(I<<5&4294967295|I>>>27),I=O+(A^x&(T^A))+k[10]+38016083&4294967295,O=T+(I<<9&4294967295|I>>>23),I=x+(T^A&(O^T))+k[15]+3634488961&4294967295,x=O+(I<<14&4294967295|I>>>18),I=A+(O^T&(x^O))+k[4]+3889429448&4294967295,A=x+(I<<20&4294967295|I>>>12),I=T+(x^O&(A^x))+k[9]+568446438&4294967295,T=A+(I<<5&4294967295|I>>>27),I=O+(A^x&(T^A))+k[14]+3275163606&4294967295,O=T+(I<<9&4294967295|I>>>23),I=x+(T^A&(O^T))+k[3]+4107603335&4294967295,x=O+(I<<14&4294967295|I>>>18),I=A+(O^T&(x^O))+k[8]+1163531501&4294967295,A=x+(I<<20&4294967295|I>>>12),I=T+(x^O&(A^x))+k[13]+2850285829&4294967295,T=A+(I<<5&4294967295|I>>>27),I=O+(A^x&(T^A))+k[2]+4243563512&4294967295,O=T+(I<<9&4294967295|I>>>23),I=x+(T^A&(O^T))+k[7]+1735328473&4294967295,x=O+(I<<14&4294967295|I>>>18),I=A+(O^T&(x^O))+k[12]+2368359562&4294967295,A=x+(I<<20&4294967295|I>>>12),I=T+(A^x^O)+k[5]+4294588738&4294967295,T=A+(I<<4&4294967295|I>>>28),I=O+(T^A^x)+k[8]+2272392833&4294967295,O=T+(I<<11&4294967295|I>>>21),I=x+(O^T^A)+k[11]+1839030562&4294967295,x=O+(I<<16&4294967295|I>>>16),I=A+(x^O^T)+k[14]+4259657740&4294967295,A=x+(I<<23&4294967295|I>>>9),I=T+(A^x^O)+k[1]+2763975236&4294967295,T=A+(I<<4&4294967295|I>>>28),I=O+(T^A^x)+k[4]+1272893353&4294967295,O=T+(I<<11&4294967295|I>>>21),I=x+(O^T^A)+k[7]+4139469664&4294967295,x=O+(I<<16&4294967295|I>>>16),I=A+(x^O^T)+k[10]+3200236656&4294967295,A=x+(I<<23&4294967295|I>>>9),I=T+(A^x^O)+k[13]+681279174&4294967295,T=A+(I<<4&4294967295|I>>>28),I=O+(T^A^x)+k[0]+3936430074&4294967295,O=T+(I<<11&4294967295|I>>>21),I=x+(O^T^A)+k[3]+3572445317&4294967295,x=O+(I<<16&4294967295|I>>>16),I=A+(x^O^T)+k[6]+76029189&4294967295,A=x+(I<<23&4294967295|I>>>9),I=T+(A^x^O)+k[9]+3654602809&4294967295,T=A+(I<<4&4294967295|I>>>28),I=O+(T^A^x)+k[12]+3873151461&4294967295,O=T+(I<<11&4294967295|I>>>21),I=x+(O^T^A)+k[15]+530742520&4294967295,x=O+(I<<16&4294967295|I>>>16),I=A+(x^O^T)+k[2]+3299628645&4294967295,A=x+(I<<23&4294967295|I>>>9),I=T+(x^(A|~O))+k[0]+4096336452&4294967295,T=A+(I<<6&4294967295|I>>>26),I=O+(A^(T|~x))+k[7]+1126891415&4294967295,O=T+(I<<10&4294967295|I>>>22),I=x+(T^(O|~A))+k[14]+2878612391&4294967295,x=O+(I<<15&4294967295|I>>>17),I=A+(O^(x|~T))+k[5]+4237533241&4294967295,A=x+(I<<21&4294967295|I>>>11),I=T+(x^(A|~O))+k[12]+1700485571&4294967295,T=A+(I<<6&4294967295|I>>>26),I=O+(A^(T|~x))+k[3]+2399980690&4294967295,O=T+(I<<10&4294967295|I>>>22),I=x+(T^(O|~A))+k[10]+4293915773&4294967295,x=O+(I<<15&4294967295|I>>>17),I=A+(O^(x|~T))+k[1]+2240044497&4294967295,A=x+(I<<21&4294967295|I>>>11),I=T+(x^(A|~O))+k[8]+1873313359&4294967295,T=A+(I<<6&4294967295|I>>>26),I=O+(A^(T|~x))+k[15]+4264355552&4294967295,O=T+(I<<10&4294967295|I>>>22),I=x+(T^(O|~A))+k[6]+2734768916&4294967295,x=O+(I<<15&4294967295|I>>>17),I=A+(O^(x|~T))+k[13]+1309151649&4294967295,A=x+(I<<21&4294967295|I>>>11),I=T+(x^(A|~O))+k[4]+4149444226&4294967295,T=A+(I<<6&4294967295|I>>>26),I=O+(A^(T|~x))+k[11]+3174756917&4294967295,O=T+(I<<10&4294967295|I>>>22),I=x+(T^(O|~A))+k[2]+718787259&4294967295,x=O+(I<<15&4294967295|I>>>17),I=A+(O^(x|~T))+k[9]+3951481745&4294967295,V.g[0]=V.g[0]+T&4294967295,V.g[1]=V.g[1]+(x+(I<<21&4294967295|I>>>11))&4294967295,V.g[2]=V.g[2]+x&4294967295,V.g[3]=V.g[3]+O&4294967295}s.prototype.u=function(V,T){T===void 0&&(T=V.length);for(var A=T-this.blockSize,k=this.B,x=this.h,O=0;O<T;){if(x==0)for(;O<=A;)a(this,V,O),O+=this.blockSize;if(typeof V=="string"){for(;O<T;)if(k[x++]=V.charCodeAt(O++),x==this.blockSize){a(this,k),x=0;break}}else for(;O<T;)if(k[x++]=V[O++],x==this.blockSize){a(this,k),x=0;break}}this.h=x,this.o+=T},s.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var T=1;T<V.length-8;++T)V[T]=0;var A=8*this.o;for(T=V.length-8;T<V.length;++T)V[T]=A&255,A/=256;for(this.u(V),V=Array(16),T=A=0;4>T;++T)for(var k=0;32>k;k+=8)V[A++]=this.g[T]>>>k&255;return V};function c(V,T){var A=g;return Object.prototype.hasOwnProperty.call(A,V)?A[V]:A[V]=T(V)}function f(V,T){this.h=T;for(var A=[],k=!0,x=V.length-1;0<=x;x--){var O=V[x]|0;k&&O==T||(A[x]=O,k=!1)}this.g=A}var g={};function y(V){return-128<=V&&128>V?c(V,function(T){return new f([T|0],0>T?-1:0)}):new f([V|0],0>V?-1:0)}function v(V){if(isNaN(V)||!isFinite(V))return N;if(0>V)return $(v(-V));for(var T=[],A=1,k=0;V>=A;k++)T[k]=V/A|0,A*=4294967296;return new f(T,0)}function S(V,T){if(V.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(V.charAt(0)=="-")return $(S(V.substring(1),T));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(T,8)),k=N,x=0;x<V.length;x+=8){var O=Math.min(8,V.length-x),I=parseInt(V.substring(x,x+O),T);8>O?(O=v(Math.pow(T,O)),k=k.j(O).add(v(I))):(k=k.j(A),k=k.add(v(I)))}return k}var N=y(0),D=y(1),z=y(16777216);i=f.prototype,i.m=function(){if(X(this))return-$(this).m();for(var V=0,T=1,A=0;A<this.g.length;A++){var k=this.i(A);V+=(0<=k?k:4294967296+k)*T,T*=4294967296}return V},i.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(K(this))return"0";if(X(this))return"-"+$(this).toString(V);for(var T=v(Math.pow(V,6)),A=this,k="";;){var x=ge(A,T).g;A=_e(A,x.j(T));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(V);if(A=x,K(A))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},i.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function K(V){if(V.h!=0)return!1;for(var T=0;T<V.g.length;T++)if(V.g[T]!=0)return!1;return!0}function X(V){return V.h==-1}i.l=function(V){return V=_e(this,V),X(V)?-1:K(V)?0:1};function $(V){for(var T=V.g.length,A=[],k=0;k<T;k++)A[k]=~V.g[k];return new f(A,~V.h).add(D)}i.abs=function(){return X(this)?$(this):this},i.add=function(V){for(var T=Math.max(this.g.length,V.g.length),A=[],k=0,x=0;x<=T;x++){var O=k+(this.i(x)&65535)+(V.i(x)&65535),I=(O>>>16)+(this.i(x)>>>16)+(V.i(x)>>>16);k=I>>>16,O&=65535,I&=65535,A[x]=I<<16|O}return new f(A,A[A.length-1]&-2147483648?-1:0)};function _e(V,T){return V.add($(T))}i.j=function(V){if(K(this)||K(V))return N;if(X(this))return X(V)?$(this).j($(V)):$($(this).j(V));if(X(V))return $(this.j($(V)));if(0>this.l(z)&&0>V.l(z))return v(this.m()*V.m());for(var T=this.g.length+V.g.length,A=[],k=0;k<2*T;k++)A[k]=0;for(k=0;k<this.g.length;k++)for(var x=0;x<V.g.length;x++){var O=this.i(k)>>>16,I=this.i(k)&65535,Ze=V.i(x)>>>16,Rt=V.i(x)&65535;A[2*k+2*x]+=I*Rt,Z(A,2*k+2*x),A[2*k+2*x+1]+=O*Rt,Z(A,2*k+2*x+1),A[2*k+2*x+1]+=I*Ze,Z(A,2*k+2*x+1),A[2*k+2*x+2]+=O*Ze,Z(A,2*k+2*x+2)}for(k=0;k<T;k++)A[k]=A[2*k+1]<<16|A[2*k];for(k=T;k<2*T;k++)A[k]=0;return new f(A,0)};function Z(V,T){for(;(V[T]&65535)!=V[T];)V[T+1]+=V[T]>>>16,V[T]&=65535,T++}function se(V,T){this.g=V,this.h=T}function ge(V,T){if(K(T))throw Error("division by zero");if(K(V))return new se(N,N);if(X(V))return T=ge($(V),T),new se($(T.g),$(T.h));if(X(T))return T=ge(V,$(T)),new se($(T.g),T.h);if(30<V.g.length){if(X(V)||X(T))throw Error("slowDivide_ only works with positive integers.");for(var A=D,k=T;0>=k.l(V);)A=Fe(A),k=Fe(k);var x=Te(A,1),O=Te(k,1);for(k=Te(k,2),A=Te(A,2);!K(k);){var I=O.add(k);0>=I.l(V)&&(x=x.add(A),O=I),k=Te(k,1),A=Te(A,1)}return T=_e(V,x.j(T)),new se(x,T)}for(x=N;0<=V.l(T);){for(A=Math.max(1,Math.floor(V.m()/T.m())),k=Math.ceil(Math.log(A)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=v(A),I=O.j(T);X(I)||0<I.l(V);)A-=k,O=v(A),I=O.j(T);K(O)&&(O=D),x=x.add(O),V=_e(V,I)}return new se(x,V)}i.A=function(V){return ge(this,V).h},i.and=function(V){for(var T=Math.max(this.g.length,V.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)&V.i(k);return new f(A,this.h&V.h)},i.or=function(V){for(var T=Math.max(this.g.length,V.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)|V.i(k);return new f(A,this.h|V.h)},i.xor=function(V){for(var T=Math.max(this.g.length,V.g.length),A=[],k=0;k<T;k++)A[k]=this.i(k)^V.i(k);return new f(A,this.h^V.h)};function Fe(V){for(var T=V.g.length+1,A=[],k=0;k<T;k++)A[k]=V.i(k)<<1|V.i(k-1)>>>31;return new f(A,V.h)}function Te(V,T){var A=T>>5;T%=32;for(var k=V.g.length-A,x=[],O=0;O<k;O++)x[O]=0<T?V.i(O+A)>>>T|V.i(O+A+1)<<32-T:V.i(O+A);return new f(x,V.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,eg=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=v,f.fromString=S,Kr=f}).apply(typeof $p<"u"?$p:typeof self<"u"?self:typeof window<"u"?window:{});var Ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tg,Xo,ng,jl,gh,rg,ig,sg;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,m){return l==Array.prototype||l==Object.prototype||(l[d]=m.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ol=="object"&&Ol];for(var d=0;d<l.length;++d){var m=l[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var s=n(this);function a(l,d){if(d)e:{var m=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var M=l[E];if(!(M in m))break e;m=m[M]}l=l[l.length-1],E=m[l],d=d(E),d!=E&&d!=null&&e(m,l,{configurable:!0,writable:!0,value:d})}}function c(l,d){l instanceof String&&(l+="");var m=0,E=!1,M={next:function(){if(!E&&m<l.length){var j=m++;return{value:d(j,l[j]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}a("Array.prototype.values",function(l){return l||function(){return c(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},g=this||self;function y(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function v(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function S(l,d,m){return l.call.apply(l.bind,arguments)}function N(l,d,m){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),l.apply(d,M)}}return function(){return l.apply(d,arguments)}}function D(l,d,m){return D=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:N,D.apply(null,arguments)}function z(l,d){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function K(l,d){function m(){}m.prototype=d.prototype,l.aa=d.prototype,l.prototype=new m,l.prototype.constructor=l,l.Qb=function(E,M,j){for(var Y=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)Y[Ue-2]=arguments[Ue];return d.prototype[M].apply(E,Y)}}function X(l){const d=l.length;if(0<d){const m=Array(d);for(let E=0;E<d;E++)m[E]=l[E];return m}return[]}function $(l,d){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(y(E)){const M=l.length||0,j=E.length||0;l.length=M+j;for(let Y=0;Y<j;Y++)l[M+Y]=E[Y]}else l.push(E)}}class _e{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Z(l){return/^[\s\xa0]*$/.test(l)}function se(){var l=g.navigator;return l&&(l=l.userAgent)?l:""}function ge(l){return ge[" "](l),l}ge[" "]=function(){};var Fe=se().indexOf("Gecko")!=-1&&!(se().toLowerCase().indexOf("webkit")!=-1&&se().indexOf("Edge")==-1)&&!(se().indexOf("Trident")!=-1||se().indexOf("MSIE")!=-1)&&se().indexOf("Edge")==-1;function Te(l,d,m){for(const E in l)d.call(m,l[E],E,l)}function V(l,d){for(const m in l)d.call(void 0,l[m],m,l)}function T(l){const d={};for(const m in l)d[m]=l[m];return d}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,d){let m,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(m in E)l[m]=E[m];for(let j=0;j<A.length;j++)m=A[j],Object.prototype.hasOwnProperty.call(E,m)&&(l[m]=E[m])}}function x(l){var d=1;l=l.split(":");const m=[];for(;0<d&&l.length;)m.push(l.shift()),d--;return l.length&&m.push(l.join(":")),m}function O(l){g.setTimeout(()=>{throw l},0)}function I(){var l=ue;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Ze{constructor(){this.h=this.g=null}add(d,m){const E=Rt.get();E.set(d,m),this.h?this.h.next=E:this.g=E,this.h=E}}var Rt=new _e(()=>new Pt,l=>l.reset());class Pt{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let je,J=!1,ue=new Ze,C=()=>{const l=g.Promise.resolve(void 0);je=()=>{l.then(b)}};var b=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(m){O(m)}var d=Rt;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}J=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const m=()=>{};g.addEventListener("test",m,d),g.removeEventListener("test",m,d)}catch{}return l}();function De(l,d){if(de.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var m=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(Fe){e:{try{ge(d.nodeName);var M=!0;break e}catch{}M=!1}M||(d=null)}}else m=="mouseover"?d=l.fromElement:m=="mouseout"&&(d=l.toElement);this.relatedTarget=d,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ve[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&De.aa.h.call(this)}}K(De,de);var Ve={2:"touch",3:"pen",4:"mouse"};De.prototype.h=function(){De.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function kt(l,d,m,E,M){this.listener=l,this.proxy=null,this.src=d,this.type=m,this.capture=!!E,this.ha=M,this.key=++Oe,this.da=this.fa=!1}function Bi(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Jn(l){this.src=l,this.g={},this.h=0}Jn.prototype.add=function(l,d,m,E,M){var j=l.toString();l=this.g[j],l||(l=this.g[j]=[],this.h++);var Y=Er(l,d,E,M);return-1<Y?(d=l[Y],m||(d.fa=!1)):(d=new kt(d,this.src,j,!!E,M),d.fa=m,l.push(d)),d};function bi(l,d){var m=d.type;if(m in l.g){var E=l.g[m],M=Array.prototype.indexOf.call(E,d,void 0),j;(j=0<=M)&&Array.prototype.splice.call(E,M,1),j&&(Bi(d),l.g[m].length==0&&(delete l.g[m],l.h--))}}function Er(l,d,m,E){for(var M=0;M<l.length;++M){var j=l[M];if(!j.da&&j.listener==d&&j.capture==!!m&&j.ha==E)return M}return-1}var si="closure_lm_"+(1e6*Math.random()|0),$i={};function Zs(l,d,m,E,M){if(Array.isArray(d)){for(var j=0;j<d.length;j++)Zs(l,d[j],m,E,M);return null}return m=no(m),l&&l[xe]?l.K(d,m,v(E)?!!E.capture:!1,M):eo(l,d,m,!1,E,M)}function eo(l,d,m,E,M,j){if(!d)throw Error("Invalid event type");var Y=v(M)?!!M.capture:!!M,Ue=Hi(l);if(Ue||(l[si]=Ue=new Jn(l)),m=Ue.add(d,m,E,Y,j),m.proxy)return m;if(E=_a(),m.proxy=E,E.src=l,E.listener=m,l.addEventListener)we||(M=Y),M===void 0&&(M=!1),l.addEventListener(d.toString(),E,M);else if(l.attachEvent)l.attachEvent(er(d.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function _a(){function l(m){return d.call(l.src,l.listener,m)}const d=to;return l}function qi(l,d,m,E,M){if(Array.isArray(d))for(var j=0;j<d.length;j++)qi(l,d[j],m,E,M);else E=v(E)?!!E.capture:!!E,m=no(m),l&&l[xe]?(l=l.i,d=String(d).toString(),d in l.g&&(j=l.g[d],m=Er(j,m,E,M),-1<m&&(Bi(j[m]),Array.prototype.splice.call(j,m,1),j.length==0&&(delete l.g[d],l.h--)))):l&&(l=Hi(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Er(d,m,E,M)),(m=-1<l?d[l]:null)&&Zn(m))}function Zn(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[xe])bi(d.i,l);else{var m=l.type,E=l.proxy;d.removeEventListener?d.removeEventListener(m,E,l.capture):d.detachEvent?d.detachEvent(er(m),E):d.addListener&&d.removeListener&&d.removeListener(E),(m=Hi(d))?(bi(m,l),m.h==0&&(m.src=null,d[si]=null)):Bi(l)}}}function er(l){return l in $i?$i[l]:$i[l]="on"+l}function to(l,d){if(l.da)l=!0;else{d=new De(d,this);var m=l.listener,E=l.ha||l.src;l.fa&&Zn(l),l=m.call(E,d)}return l}function Hi(l){return l=l[si],l instanceof Jn?l:null}var Wi="__closure_events_fn_"+(1e9*Math.random()>>>0);function no(l){return typeof l=="function"?l:(l[Wi]||(l[Wi]=function(d){return l.handleEvent(d)}),l[Wi])}function at(){re.call(this),this.i=new Jn(this),this.M=this,this.F=null}K(at,re),at.prototype[xe]=!0,at.prototype.removeEventListener=function(l,d,m,E){qi(this,l,d,m,E)};function lt(l,d){var m,E=l.F;if(E)for(m=[];E;E=E.F)m.push(E);if(l=l.M,E=d.type||d,typeof d=="string")d=new de(d,l);else if(d instanceof de)d.target=d.target||l;else{var M=d;d=new de(E,l),k(d,M)}if(M=!0,m)for(var j=m.length-1;0<=j;j--){var Y=d.g=m[j];M=tr(Y,E,!0,d)&&M}if(Y=d.g=l,M=tr(Y,E,!0,d)&&M,M=tr(Y,E,!1,d)&&M,m)for(j=0;j<m.length;j++)Y=d.g=m[j],M=tr(Y,E,!1,d)&&M}at.prototype.N=function(){if(at.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var m=l.g[d],E=0;E<m.length;E++)Bi(m[E]);delete l.g[d],l.h--}}this.F=null},at.prototype.K=function(l,d,m,E){return this.i.add(String(l),d,!1,m,E)},at.prototype.L=function(l,d,m,E){return this.i.add(String(l),d,!0,m,E)};function tr(l,d,m,E){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var M=!0,j=0;j<d.length;++j){var Y=d[j];if(Y&&!Y.da&&Y.capture==m){var Ue=Y.listener,ut=Y.ha||Y.src;Y.fa&&bi(l.i,Y),M=Ue.call(ut,E)!==!1&&M}}return M&&!E.defaultPrevented}function ro(l,d,m){if(typeof l=="function")m&&(l=D(l,m));else if(l&&typeof l.handleEvent=="function")l=D(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:g.setTimeout(l,d||0)}function wr(l){l.g=ro(()=>{l.g=null,l.i&&(l.i=!1,wr(l))},l.l);const d=l.h;l.h=null,l.m.apply(null,d)}class oi extends re{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:wr(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ai(l){re.call(this),this.h=l,this.g={}}K(ai,re);var io=[];function so(l){Te(l.g,function(d,m){this.g.hasOwnProperty(m)&&Zn(d)},l),l.g={}}ai.prototype.N=function(){ai.aa.N.call(this),so(this)},ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oo=g.JSON.stringify,ao=g.JSON.parse,lo=class{stringify(l){return g.JSON.stringify(l,void 0)}parse(l){return g.JSON.parse(l,void 0)}};function li(){}li.prototype.h=null;function Qi(l){return l.h||(l.h=l.i())}function Ki(){}var on={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function On(){de.call(this,"d")}K(On,de);function Gi(){de.call(this,"c")}K(Gi,de);var Mn={},uo=null;function ui(){return uo=uo||new at}Mn.La="serverreachability";function co(l){de.call(this,Mn.La,l)}K(co,de);function nr(l){const d=ui();lt(d,new co(d))}Mn.STAT_EVENT="statevent";function ho(l,d){de.call(this,Mn.STAT_EVENT,l),this.stat=d}K(ho,de);function et(l){const d=ui();lt(d,new ho(d,l))}Mn.Ma="timingevent";function Xi(l,d){de.call(this,Mn.Ma,l),this.size=d}K(Xi,de);function _n(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){l()},d)}function ci(){this.g=!0}ci.prototype.xa=function(){this.g=!1};function hi(l,d,m,E,M,j){l.info(function(){if(l.g)if(j)for(var Y="",Ue=j.split("&"),ut=0;ut<Ue.length;ut++){var Re=Ue[ut].split("=");if(1<Re.length){var mt=Re[0];Re=Re[1];var rt=mt.split("_");Y=2<=rt.length&&rt[1]=="type"?Y+(mt+"="+Re+"&"):Y+(mt+"=redacted&")}}else Y=null;else Y=j;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+d+`
`+m+`
`+Y})}function Yi(l,d,m,E,M,j,Y){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+d+`
`+m+`
`+j+" "+Y})}function vn(l,d,m,E){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Au(l,m)+(E?" "+E:"")})}function fo(l,d){l.info(function(){return"TIMEOUT: "+d})}ci.prototype.info=function(){};function Au(l,d){if(!l.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(l=0;l<m.length;l++)if(Array.isArray(m[l])){var E=m[l];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var j=M[0];if(j!="noop"&&j!="stop"&&j!="close")for(var Y=1;Y<M.length;Y++)M[Y]=""}}}}return oo(m)}catch{return d}}var Ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},va={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},En;function fi(){}K(fi,li),fi.prototype.g=function(){return new XMLHttpRequest},fi.prototype.i=function(){return{}},En=new fi;function wn(l,d,m,E){this.j=l,this.i=d,this.l=m,this.R=E||1,this.U=new ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ea}function Ea(){this.i=null,this.g="",this.h=!1}var po={},Zi={};function es(l,d,m){l.L=1,l.v=Cr(Jt(d)),l.m=m,l.P=!0,mo(l,null)}function mo(l,d){l.F=Date.now(),Be(l),l.A=Jt(l.v);var m=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Pr(m.i,"t",E),l.C=0,m=l.j.J,l.h=new Ea,l.g=Ua(l.j,m?d:null,!l.m),0<l.O&&(l.M=new oi(D(l.Y,l,l.g),l.O)),d=l.U,m=l.g,E=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(io[0]=M.toString()),M=io);for(var j=0;j<M.length;j++){var Y=Zs(m,M[j],E||d.handleEvent,!1,d.h||d);if(!Y)break;d.g[Y.key]=Y}d=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),nr(),hi(l.i,l.u,l.A,l.l,l.R,l.m)}wn.prototype.ca=function(l){l=l.target;const d=this.M;d&&bt(l)==3?d.j():this.Y(l)},wn.prototype.Y=function(l){try{if(l==this.g)e:{const rt=bt(this.g);var d=this.g.Ba();const un=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||wo(this.g)))){this.J||rt!=4||d==7||(d==8||0>=un?nr(3):nr(2)),di(this);var m=this.g.Z();this.X=m;t:if(wa(this)){var E=wo(this.g);l="";var M=E.length,j=bt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),Tr(this);var Y="";break t}this.h.i=new g.TextDecoder}for(d=0;d<M;d++)this.h.h=!0,l+=this.h.i.decode(E[d],{stream:!(j&&d==M-1)});E.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=m==200,Yi(this.i,this.u,this.A,this.l,this.R,rt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,ut=this.g;if((Ue=ut.g?ut.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Ue)){var Re=Ue;break t}}Re=null}if(m=Re)vn(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,go(this,m);else{this.o=!1,this.s=3,et(12),an(this),Tr(this);break e}}if(this.P){m=!0;let en;for(;!this.J&&this.C<Y.length;)if(en=Cu(this,Y),en==Zi){rt==4&&(this.s=4,et(14),m=!1),vn(this.i,this.l,null,"[Incomplete Response]");break}else if(en==po){this.s=4,et(15),vn(this.i,this.l,Y,"[Invalid Chunk]"),m=!1;break}else vn(this.i,this.l,en,null),go(this,en);if(wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||Y.length!=0||this.h.h||(this.s=1,et(16),m=!1),this.o=this.o&&m,!m)vn(this.i,this.l,Y,"[Invalid Chunked Response]"),an(this),Tr(this);else if(0<Y.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Io(mt),mt.M=!0,et(11))}}else vn(this.i,this.l,Y,null),go(this,Y);rt==4&&an(this),this.o&&!this.J&&(rt==4?hs(this.j,this):(this.o=!1,Be(this)))}else os(this.g),m==400&&0<Y.indexOf("Unknown SID")?(this.s=3,et(12)):(this.s=0,et(13)),an(this),Tr(this)}}}catch{}finally{}};function wa(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Cu(l,d){var m=l.C,E=d.indexOf(`
`,m);return E==-1?Zi:(m=Number(d.substring(m,E)),isNaN(m)?po:(E+=1,E+m>d.length?Zi:(d=d.slice(E,E+m),l.C=E+m,d)))}wn.prototype.cancel=function(){this.J=!0,an(this)};function Be(l){l.S=Date.now()+l.I,Ta(l,l.I)}function Ta(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=_n(D(l.ba,l),d)}function di(l){l.B&&(g.clearTimeout(l.B),l.B=null)}wn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(fo(this.i,this.A),this.L!=2&&(nr(),et(17)),an(this),this.s=2,Tr(this)):Ta(this,this.S-l)};function Tr(l){l.j.G==0||l.J||hs(l.j,l)}function an(l){di(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,so(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function go(l,d){try{var m=l.j;if(m.G!=0&&(m.g==l||Ft(m.h,l))){if(!l.K&&Ft(m.h,l)&&m.G==3){try{var E=m.Da.g.parse(d)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<l.F)cs(m),Cn(m);else break e;us(m),et(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=_n(D(m.Za,m),6e3));if(1>=Sa(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else ar(m,11)}else if((l.K||m.g==l)&&cs(m),!Z(d))for(M=m.Da.g.parse(d),d=0;d<M.length;d++){let Re=M[d];if(m.T=Re[0],Re=Re[1],m.G==2)if(Re[0]=="c"){m.K=Re[1],m.ia=Re[2];const mt=Re[3];mt!=null&&(m.la=mt,m.j.info("VER="+m.la));const rt=Re[4];rt!=null&&(m.Aa=rt,m.j.info("SVER="+m.Aa));const un=Re[5];un!=null&&typeof un=="number"&&0<un&&(E=1.5*un,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const en=l.g;if(en){const Ei=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ei){var j=E.h;j.g||Ei.indexOf("spdy")==-1&&Ei.indexOf("quic")==-1&&Ei.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(yo(j,j.h),j.h=null))}if(E.D){const ds=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;ds&&(E.ya=ds,ze(E.I,E.D,ds))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-l.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var Y=l;if(E.qa=Fa(E,E.J?E.ia:null,E.W),Y.K){Aa(E.h,Y);var Ue=Y,ut=E.L;ut&&(Ue.I=ut),Ue.B&&(di(Ue),Be(Ue)),E.g=Y}else vi(E);0<m.i.length&&jn(m)}else Re[0]!="stop"&&Re[0]!="close"||ar(m,7);else m.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?ar(m,7):wt(m):Re[0]!="noop"&&m.l&&m.l.ta(Re),m.v=0)}}nr(4)}catch{}}var Ia=class{constructor(l,d){this.g=l,this.map=d}};function pi(l){this.l=l||10,g.PerformanceNavigationTiming?(l=g.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Sa(l){return l.h?1:l.g?l.g.size:0}function Ft(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function yo(l,d){l.g?l.g.add(d):l.h=d}function Aa(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}pi.prototype.cancel=function(){if(this.i=Ca(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Ca(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(const m of l.g.values())d=d.concat(m.D);return d}return X(l.i)}function ts(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var d=[],m=l.length,E=0;E<m;E++)d.push(l[E]);return d}d=[],m=0;for(E in l)d[m++]=l[E];return d}function ns(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var d=[];l=l.length;for(var m=0;m<l;m++)d.push(m);return d}d=[],m=0;for(const E in l)d[m++]=E;return d}}}function Ir(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var m=ns(l),E=ts(l),M=E.length,j=0;j<M;j++)d.call(void 0,E[j],m&&m[j],l)}var mi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ru(l,d){if(l){l=l.split("&");for(var m=0;m<l.length;m++){var E=l[m].indexOf("="),M=null;if(0<=E){var j=l[m].substring(0,E);M=l[m].substring(E+1)}else j=l[m];d(j,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function rr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof rr){this.h=l.h,gi(this,l.j),this.o=l.o,this.g=l.g,Sr(this,l.s),this.l=l.l;var d=l.i,m=new Ln;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Ar(this,m),this.m=l.m}else l&&(d=String(l).match(mi))?(this.h=!1,gi(this,d[1]||"",!0),this.o=Ce(d[2]||""),this.g=Ce(d[3]||"",!0),Sr(this,d[4]),this.l=Ce(d[5]||"",!0),Ar(this,d[6]||"",!0),this.m=Ce(d[7]||"")):(this.h=!1,this.i=new Ln(null,this.h))}rr.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Rr(d,rs,!0),":");var m=this.g;return(m||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Rr(d,rs,!0),"@"),l.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&l.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&l.push("/"),l.push(Rr(m,m.charAt(0)=="/"?ka:Pa,!0))),(m=this.i.toString())&&l.push("?",m),(m=this.m)&&l.push("#",Rr(m,_o)),l.join("")};function Jt(l){return new rr(l)}function gi(l,d,m){l.j=m?Ce(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Sr(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function Ar(l,d,m){d instanceof Ln?(l.i=d,Fn(l.i,l.h)):(m||(d=Rr(d,Va)),l.i=new Ln(d,l.h))}function ze(l,d,m){l.i.set(d,m)}function Cr(l){return ze(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ce(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Rr(l,d,m){return typeof l=="string"?(l=encodeURI(l).replace(d,Ra),m&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ra(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var rs=/[#\/\?@]/g,Pa=/[#\?:]/g,ka=/[#\?]/g,Va=/[#\?@]/g,_o=/#/g;function Ln(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Et(l){l.g||(l.g=new Map,l.h=0,l.i&&Ru(l.i,function(d,m){l.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}i=Ln.prototype,i.add=function(l,d){Et(this),this.i=null,l=ln(this,l);var m=this.g.get(l);return m||this.g.set(l,m=[]),m.push(d),this.h+=1,this};function Tn(l,d){Et(l),d=ln(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function In(l,d){return Et(l),d=ln(l,d),l.g.has(d)}i.forEach=function(l,d){Et(this),this.g.forEach(function(m,E){m.forEach(function(M){l.call(d,M,E,this)},this)},this)},i.na=function(){Et(this);const l=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let E=0;E<d.length;E++){const M=l[E];for(let j=0;j<M.length;j++)m.push(d[E])}return m},i.V=function(l){Et(this);let d=[];if(typeof l=="string")In(this,l)&&(d=d.concat(this.g.get(ln(this,l))));else{l=Array.from(this.g.values());for(let m=0;m<l.length;m++)d=d.concat(l[m])}return d},i.set=function(l,d){return Et(this),this.i=null,l=ln(this,l),In(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},i.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Pr(l,d,m){Tn(l,d),0<m.length&&(l.i=null,l.g.set(ln(l,d),X(m)),l.h+=m.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var E=d[m];const j=encodeURIComponent(String(E)),Y=this.V(E);for(E=0;E<Y.length;E++){var M=j;Y[E]!==""&&(M+="="+encodeURIComponent(String(Y[E]))),l.push(M)}}return this.i=l.join("&")};function ln(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function Fn(l,d){d&&!l.j&&(Et(l),l.i=null,l.g.forEach(function(m,E){var M=E.toLowerCase();E!=M&&(Tn(this,E),Pr(this,M,m))},l)),l.j=d}function Pu(l,d){const m=new ci;if(g.Image){const E=new Image;E.onload=z(Bt,m,"TestLoadImage: loaded",!0,d,E),E.onerror=z(Bt,m,"TestLoadImage: error",!1,d,E),E.onabort=z(Bt,m,"TestLoadImage: abort",!1,d,E),E.ontimeout=z(Bt,m,"TestLoadImage: timeout",!1,d,E),g.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else d(!1)}function Na(l,d){const m=new ci,E=new AbortController,M=setTimeout(()=>{E.abort(),Bt(m,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:E.signal}).then(j=>{clearTimeout(M),j.ok?Bt(m,"TestPingServer: ok",!0,d):Bt(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),Bt(m,"TestPingServer: error",!1,d)})}function Bt(l,d,m,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(m)}catch{}}function ku(){this.g=new lo}function Da(l,d,m){const E=m||"";try{Ir(l,function(M,j){let Y=M;v(M)&&(Y=oo(M)),d.push(E+j+"="+encodeURIComponent(Y))})}catch(M){throw d.push(E+"type="+encodeURIComponent("_badmap")),M}}function ir(l){this.l=l.Ub||null,this.j=l.eb||!1}K(ir,li),ir.prototype.g=function(){return new yi(this.l,this.j)},ir.prototype.i=function(l){return function(){return l}}({});function yi(l,d){at.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}K(yi,at),i=yi.prototype,i.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,An(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||g).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Sn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,An(this)),this.g&&(this.readyState=3,An(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xa(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function xa(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Sn(this):An(this),this.readyState==3&&xa(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Sn(this))},i.Qa=function(l){this.g&&(this.response=l,Sn(this))},i.ga=function(){this.g&&Sn(this)};function Sn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,An(l)}i.setRequestHeader=function(l,d){this.u.append(l,d)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,l.push(m[0]+": "+m[1]),m=d.next();return l.join(`\r
`)};function An(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function sr(l){let d="";return Te(l,function(m,E){d+=E,d+=":",d+=m,d+=`\r
`}),d}function kr(l,d,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=sr(m),typeof l=="string"?m!=null&&encodeURIComponent(String(m)):ze(l,d,m))}function Qe(l){at.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}K(Qe,at);var Vu=/^https?$/i,vo=["POST","PUT"];i=Qe.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,d,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():En.g(),this.v=this.o?Qi(this.o):Qi(En),this.g.onreadystatechange=D(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(j){_i(this,j);return}if(l=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)m.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const j of E.keys())m.set(j,E.get(j));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(j=>j.toLowerCase()=="content-type"),M=g.FormData&&l instanceof g.FormData,!(0<=Array.prototype.indexOf.call(vo,d,void 0))||E||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,Y]of m)this.g.setRequestHeader(j,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ss(this),this.u=!0,this.g.send(l),this.u=!1}catch(j){_i(this,j)}};function _i(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,is(l),Zt(l)}function is(l){l.A||(l.A=!0,lt(l,"complete"),lt(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,lt(this,"complete"),lt(this,"abort"),Zt(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Qe.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Eo(this):this.bb())},i.bb=function(){Eo(this)};function Eo(l){if(l.h&&typeof f<"u"&&(!l.v[1]||bt(l)!=4||l.Z()!=2)){if(l.u&&bt(l)==4)ro(l.Ea,0,l);else if(lt(l,"readystatechange"),bt(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var E;if(E=Y===0){var M=String(l.D).match(mi)[1]||null;!M&&g.self&&g.self.location&&(M=g.self.location.protocol.slice(0,-1)),E=!Vu.test(M?M.toLowerCase():"")}m=E}if(m)lt(l,"complete"),lt(l,"success");else{l.m=6;try{var j=2<bt(l)?l.g.statusText:""}catch{j=""}l.l=j+" ["+l.Z()+"]",is(l)}}finally{Zt(l)}}}}function Zt(l,d){if(l.g){ss(l);const m=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||lt(l,"ready");try{m.onreadystatechange=E}catch{}}}function ss(l){l.I&&(g.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function bt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<bt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),ao(d)}};function wo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function os(l){const d={};l=(l.g&&2<=bt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(Z(l[E]))continue;var m=x(l[E]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const j=d[M]||[];d[M]=j,j.push(m)}V(d,function(E){return E.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Un(l,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[l]||d}function To(l){this.Aa=0,this.i=[],this.j=new ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Un("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Un("baseRetryDelayMs",5e3,l),this.cb=Un("retryDelaySeedMs",1e4,l),this.Wa=Un("forwardChannelMaxRetries",2,l),this.wa=Un("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new pi(l&&l.concurrentRequestLimit),this.Da=new ku,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=To.prototype,i.la=8,i.G=1,i.connect=function(l,d,m,E){et(0),this.W=l,this.H=d||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=Fa(this,null,this.W),jn(this)};function wt(l){if(as(l),l.G==3){var d=l.U++,m=Jt(l.I);if(ze(m,"SID",l.K),ze(m,"RID",d),ze(m,"TYPE","terminate"),or(l,m),d=new wn(l,l.j,d),d.L=2,d.v=Cr(Jt(m)),m=!1,g.navigator&&g.navigator.sendBeacon)try{m=g.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&g.Image&&(new Image().src=d.v,m=!0),m||(d.g=Ua(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Be(d)}La(l)}function Cn(l){l.g&&(Io(l),l.g.cancel(),l.g=null)}function as(l){Cn(l),l.u&&(g.clearTimeout(l.u),l.u=null),cs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&g.clearTimeout(l.s),l.s=null)}function jn(l){if(!Yt(l.h)&&!l.s){l.s=!0;var d=l.Ga;je||C(),J||(je(),J=!0),ue.add(d,l),l.B=0}}function Nu(l,d){return Sa(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=_n(D(l.Ga,l,d),Ma(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new wn(this,this.j,l);let j=this.o;if(this.S&&(j?(j=T(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(M.H=j,j=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(d+=E,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=Vr(this,M,d),m=Jt(this.I),ze(m,"RID",l),ze(m,"CVER",22),this.D&&ze(m,"X-HTTP-Session-Id",this.D),or(this,m),j&&(this.O?d="headers="+encodeURIComponent(String(sr(j)))+"&"+d:this.m&&kr(m,this.m,j)),yo(this.h,M),this.Ua&&ze(m,"TYPE","init"),this.P?(ze(m,"$req",d),ze(m,"SID","null"),M.T=!0,es(M,m,null)):es(M,m,d),this.G=2}}else this.G==3&&(l?ls(this,l):this.i.length==0||Yt(this.h)||ls(this))};function ls(l,d){var m;d?m=d.l:m=l.U++;const E=Jt(l.I);ze(E,"SID",l.K),ze(E,"RID",m),ze(E,"AID",l.T),or(l,E),l.m&&l.o&&kr(E,l.m,l.o),m=new wn(l,l.j,m,l.B+1),l.m===null&&(m.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Vr(l,m,1e3),m.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),yo(l.h,m),es(m,E,d)}function or(l,d){l.H&&Te(l.H,function(m,E){ze(d,E,m)}),l.l&&Ir({},function(m,E){ze(d,E,m)})}function Vr(l,d,m){m=Math.min(l.i.length,m);var E=l.l?D(l.l.Na,l.l,l):null;e:{var M=l.i;let j=-1;for(;;){const Y=["count="+m];j==-1?0<m?(j=M[0].g,Y.push("ofs="+j)):j=0:Y.push("ofs="+j);let Ue=!0;for(let ut=0;ut<m;ut++){let Re=M[ut].g;const mt=M[ut].map;if(Re-=j,0>Re)j=Math.max(0,M[ut].g-100),Ue=!1;else try{Da(mt,Y,"req"+Re+"_")}catch{E&&E(mt)}}if(Ue){E=Y.join("&");break e}}}return l=l.i.splice(0,m),d.D=l,E}function vi(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;je||C(),J||(je(),J=!0),ue.add(d,l),l.v=0}}function us(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=_n(D(l.Fa,l),Ma(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Oa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=_n(D(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,et(10),Cn(this),Oa(this))};function Io(l){l.A!=null&&(g.clearTimeout(l.A),l.A=null)}function Oa(l){l.g=new wn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=Jt(l.qa);ze(d,"RID","rpc"),ze(d,"SID",l.K),ze(d,"AID",l.T),ze(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&ze(d,"TO",l.ja),ze(d,"TYPE","xmlhttp"),or(l,d),l.m&&l.o&&kr(d,l.m,l.o),l.L&&(l.g.I=l.L);var m=l.g;l=l.ia,m.L=1,m.v=Cr(Jt(d)),m.m=null,m.P=!0,mo(m,l)}i.Za=function(){this.C!=null&&(this.C=null,Cn(this),us(this),et(19))};function cs(l){l.C!=null&&(g.clearTimeout(l.C),l.C=null)}function hs(l,d){var m=null;if(l.g==d){cs(l),Io(l),l.g=null;var E=2}else if(Ft(l.h,d))m=d.D,Aa(l.h,d),E=1;else return;if(l.G!=0){if(d.o)if(E==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var M=l.B;E=ui(),lt(E,new Xi(E,m)),jn(l)}else vi(l);else if(M=d.s,M==3||M==0&&0<d.X||!(E==1&&Nu(l,d)||E==2&&us(l)))switch(m&&0<m.length&&(d=l.h,d.i=d.i.concat(m)),M){case 1:ar(l,5);break;case 4:ar(l,10);break;case 3:ar(l,6);break;default:ar(l,2)}}}function Ma(l,d){let m=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(m*=2),m*d}function ar(l,d){if(l.j.info("Error code "+d),d==2){var m=D(l.fb,l),E=l.Xa;const M=!E;E=new rr(E||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||gi(E,"https"),Cr(E),M?Pu(E.toString(),m):Na(E.toString(),m)}else et(2);l.G=0,l.l&&l.l.sa(d),La(l),as(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),et(2)):(this.j.info("Failed to ping google.com"),et(1))};function La(l){if(l.G=0,l.ka=[],l.l){const d=Ca(l.h);(d.length!=0||l.i.length!=0)&&($(l.ka,d),$(l.ka,l.i),l.h.i.length=0,X(l.i),l.i.length=0),l.l.ra()}}function Fa(l,d,m){var E=m instanceof rr?Jt(m):new rr(m);if(E.g!="")d&&(E.g=d+"."+E.g),Sr(E,E.s);else{var M=g.location;E=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;var j=new rr(null);E&&gi(j,E),d&&(j.g=d),M&&Sr(j,M),m&&(j.l=m),E=j}return m=l.D,d=l.ya,m&&d&&ze(E,m,d),ze(E,"VER",l.la),or(l,E),E}function Ua(l,d,m){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Qe(new ir({eb:m})):new Qe(l.pa),d.Ha(l.J),d}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function So(){}i=So.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function fs(){}fs.prototype.g=function(l,d){return new Ut(l,d)};function Ut(l,d){at.call(this),this.g=new To(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!Z(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Z(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new zn(this)}K(Ut,at),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){wt(this.g)},Ut.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var m={};m.__data__=l,l=m}else this.u&&(m={},m.__data__=oo(l),l=m);d.i.push(new Ia(d.Ya++,l)),d.G==3&&jn(d)},Ut.prototype.N=function(){this.g.l=null,delete this.j,wt(this.g),delete this.g,Ut.aa.N.call(this)};function ja(l){On.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(const m in d){l=m;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}K(ja,On);function za(){Gi.call(this),this.status=1}K(za,Gi);function zn(l){this.g=l}K(zn,So),zn.prototype.ua=function(){lt(this.g,"a")},zn.prototype.ta=function(l){lt(this.g,new ja(l))},zn.prototype.sa=function(l){lt(this.g,new za)},zn.prototype.ra=function(){lt(this.g,"b")},fs.prototype.createWebChannel=fs.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,sg=function(){return new fs},ig=function(){return ui()},rg=Mn,gh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ji.NO_ERROR=0,Ji.TIMEOUT=8,Ji.HTTP_ERROR=6,jl=Ji,va.COMPLETE="complete",ng=va,Ki.EventType=on,on.OPEN="a",on.CLOSE="b",on.ERROR="c",on.MESSAGE="d",at.prototype.listen=at.prototype.K,Xo=Ki,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,tg=Qe}).apply(typeof Ol<"u"?Ol:typeof self<"u"?self:typeof window<"u"?window:{});const qp="@firebase/firestore",Hp="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Km("@firebase/firestore");function Os(){return Fi.logLevel}function te(i,...e){if(Fi.logLevel<=ke.DEBUG){const n=e.map(Fh);Fi.debug(`Firestore (${Gs}): ${i}`,...n)}}function _r(i,...e){if(Fi.logLevel<=ke.ERROR){const n=e.map(Fh);Fi.error(`Firestore (${Gs}): ${i}`,...n)}}function Bs(i,...e){if(Fi.logLevel<=ke.WARN){const n=e.map(Fh);Fi.warn(`Firestore (${Gs}): ${i}`,...n)}}function Fh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,og(i,s,n)}function og(i,e,n){let s=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw _r(s),new Error(s)}function Le(i,e,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,i||og(e,a,s)}function ve(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends Ks{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class NE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class DE{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0,42304);let s=this.i;const a=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new Mi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Mi,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await a(this.currentUser)})},g=y=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Mi)}},0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Le(typeof s.accessToken=="string",31837,{l:s}),new ag(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class xE{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OE{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new xE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Wp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ME{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mE(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Le(this.o===void 0,3512);const s=c=>{c.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,te("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Wp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Wp(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=LE(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%62))}return s}}function Se(i,e){return i<e?-1:i>e?1:0}function yh(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const a=i.charAt(s),c=e.charAt(s);if(a!==c)return oh(a)===oh(c)?Se(a,c):oh(a)?1:-1}return Se(i.length,e.length)}const FE=55296,UE=57343;function oh(i){const e=i.charCodeAt(0);return e>=FE&&e<=UE}function bs(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="__name__";class Hn{constructor(e,n,s){n===void 0?n=0:n>e.length&&pe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&pe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Hn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hn?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=Hn.compareSegments(e.get(a),n.get(a));if(c!==0)return c}return Se(e.length,n.length)}static compareSegments(e,n){const s=Hn.isNumericId(e),a=Hn.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?Hn.extractNumericId(e).compare(Hn.extractNumericId(n)):yh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kr.fromString(e.substring(4,e.length-2))}}class He extends Hn{construct(e,n,s){return new He(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new le(H.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new He(n)}static emptyPath(){return new He([])}}const jE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends Hn{construct(e,n,s){return new At(e,n,s)}static isValidIdentifier(e){return jE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Qp}static keyField(){return new At([Qp])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new le(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;a<e.length;){const g=e[a];if(g==="\\"){if(a+1===e.length)throw new le(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new le(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else g==="`"?(f=!f,a++):g!=="."||f?(s+=g,a++):(c(),a++)}if(c(),f)throw new le(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(He.fromString(e))}static fromName(e){return new ce(He.fromString(e).popFirst(5))}static empty(){return new ce(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lg(i,e,n){if(!n)throw new le(H.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function zE(i,e,n,s){if(e===!0&&s===!0)throw new le(H.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Kp(i){if(!ce.isDocumentKey(i))throw new le(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Gp(i){if(ce.isDocumentKey(i))throw new le(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function ug(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function jh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":pe(12329,{type:typeof i})}function Gr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new le(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jh(i);throw new le(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(i,e){const n={typeString:i};return e&&(n.value=e),n}function da(i,e){if(!ug(i))throw new le(H.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const a=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const f=i[s];if(a&&typeof f!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new le(H.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=-62135596800,Yp=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Yp);return new We(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Xp)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Yp}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(da(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Xp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:ot("string",We._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new We(0,0))}static max(){return new ye(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=-1;function BE(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=ye.fromTimestamp(s===1e9?new We(n+1,0):new We(n,s));return new Yr(a,ce.empty(),e)}function bE(i){return new Yr(i.readTime,i.key,aa)}class Yr{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Yr(ye.min(),ce.empty(),aa)}static max(){return new Yr(ye.max(),ce.empty(),aa)}}function $E(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(i.documentKey,e.documentKey),n!==0?n:Se(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class HE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(i){if(i.code!==H.FAILED_PRECONDITION||i.message!==qE)throw i;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,s)=>{n(e)})}static reject(e){return new B((n,s)=>{s(e)})}static waitFor(e){return new B((n,s)=>{let a=0,c=0,f=!1;e.forEach(g=>{++a,g.next(()=>{++c,f&&c===a&&n()},y=>s(y))}),f=!0,c===a&&n()})}static or(e){let n=B.resolve(!1);for(const s of e)n=n.next(a=>a?B.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new B((s,a)=>{const c=e.length,f=new Array(c);let g=0;for(let y=0;y<c;y++){const v=y;n(e[v]).next(S=>{f[v]=S,++g,g===c&&s(f)},S=>a(S))}})}static doWhile(e,n){return new B((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function WE(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ys(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}lu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=-1;function uu(i){return i==null}function Xl(i){return i===0&&1/i==-1/0}function QE(i){return typeof i=="number"&&Number.isInteger(i)&&!Xl(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="";function KE(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Jp(e)),e=GE(i.get(n),e);return Jp(e)}function GE(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case cg:n+="";break;default:n+=c}}return n}function Jp(i){return i+cg+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function ri(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function hg(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Ye(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Ye(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ml(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ml(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ml(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ml(this.root,e,this.comparator,!0)}}class Ml{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??St.RED,this.left=a??St.EMPTY,this.right=c??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new St(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return St.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw pe(27949);return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw pe(57766)}get value(){throw pe(16141)}get color(){throw pe(16727)}get left(){throw pe(29726)}get right(){throw pe(36894)}copy(e,n,s,a,c){return this}insert(e,n,s){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Ye(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new em(this.data.getIterator())}getIteratorFrom(e){return new em(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class em{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new sn([])}unionWith(e){let n=new pt(At.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new sn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bs(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new fg("Invalid base64 string: "+c):c}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const XE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(i){if(Le(!!i,39018),typeof i=="string"){let e=0;const n=XE.exec(i);if(Le(!!n,46558,{timestamp:i}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:nt(i.seconds),nanos:nt(i.nanos)}}function nt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Zr(i){return typeof i=="string"?Ct.fromBase64String(i):Ct.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="server_timestamp",pg="__type__",mg="__previous_value__",gg="__local_write_time__";function Bh(i){return(i?.mapValue?.fields||{})[pg]?.stringValue===dg}function cu(i){const e=i.mapValue.fields[mg];return Bh(e)?cu(e):e}function la(i){const e=Jr(i.mapValue.fields[gg].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,s,a,c,f,g,y,v,S){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=v,this.isUsingEmulator=S}}const Yl="(default)";class ua{constructor(e,n){this.projectId=e,this.database=n||Yl}static empty(){return new ua("","")}get isDefaultDatabase(){return this.database===Yl}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="__type__",JE="__max__",Ll={mapValue:{}},_g="__vector__",Jl="value";function ei(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Bh(i)?4:e0(i)?9007199254740991:ZE(i)?10:11:pe(28295,{value:i})}function Xn(i,e){if(i===e)return!0;const n=ei(i);if(n!==ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return la(i).isEqual(la(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=Jr(a.timestampValue),g=Jr(c.timestampValue);return f.seconds===g.seconds&&f.nanos===g.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return Zr(a.bytesValue).isEqual(Zr(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return nt(a.geoPointValue.latitude)===nt(c.geoPointValue.latitude)&&nt(a.geoPointValue.longitude)===nt(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return nt(a.integerValue)===nt(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=nt(a.doubleValue),g=nt(c.doubleValue);return f===g?Xl(f)===Xl(g):isNaN(f)&&isNaN(g)}return!1}(i,e);case 9:return bs(i.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(a,c){const f=a.mapValue.fields||{},g=c.mapValue.fields||{};if(Zp(f)!==Zp(g))return!1;for(const y in f)if(f.hasOwnProperty(y)&&(g[y]===void 0||!Xn(f[y],g[y])))return!1;return!0}(i,e);default:return pe(52216,{left:i})}}function ca(i,e){return(i.values||[]).find(n=>Xn(n,e))!==void 0}function $s(i,e){if(i===e)return 0;const n=ei(i),s=ei(e);if(n!==s)return Se(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(i.booleanValue,e.booleanValue);case 2:return function(c,f){const g=nt(c.integerValue||c.doubleValue),y=nt(f.integerValue||f.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(i,e);case 3:return tm(i.timestampValue,e.timestampValue);case 4:return tm(la(i),la(e));case 5:return yh(i.stringValue,e.stringValue);case 6:return function(c,f){const g=Zr(c),y=Zr(f);return g.compareTo(y)}(i.bytesValue,e.bytesValue);case 7:return function(c,f){const g=c.split("/"),y=f.split("/");for(let v=0;v<g.length&&v<y.length;v++){const S=Se(g[v],y[v]);if(S!==0)return S}return Se(g.length,y.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,f){const g=Se(nt(c.latitude),nt(f.latitude));return g!==0?g:Se(nt(c.longitude),nt(f.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return nm(i.arrayValue,e.arrayValue);case 10:return function(c,f){const g=c.fields||{},y=f.fields||{},v=g[Jl]?.arrayValue,S=y[Jl]?.arrayValue,N=Se(v?.values?.length||0,S?.values?.length||0);return N!==0?N:nm(v,S)}(i.mapValue,e.mapValue);case 11:return function(c,f){if(c===Ll.mapValue&&f===Ll.mapValue)return 0;if(c===Ll.mapValue)return 1;if(f===Ll.mapValue)return-1;const g=c.fields||{},y=Object.keys(g),v=f.fields||{},S=Object.keys(v);y.sort(),S.sort();for(let N=0;N<y.length&&N<S.length;++N){const D=yh(y[N],S[N]);if(D!==0)return D;const z=$s(g[y[N]],v[S[N]]);if(z!==0)return z}return Se(y.length,S.length)}(i.mapValue,e.mapValue);default:throw pe(23264,{he:n})}}function tm(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Se(i,e);const n=Jr(i),s=Jr(e),a=Se(n.seconds,s.seconds);return a!==0?a:Se(n.nanos,s.nanos)}function nm(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=$s(n[a],s[a]);if(c)return c}return Se(n.length,s.length)}function qs(i){return _h(i)}function _h(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=Jr(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return Zr(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return ce.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=_h(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const f of s)c?c=!1:a+=",",a+=`${f}:${_h(n.fields[f])}`;return a+"}"}(i.mapValue):pe(61005,{value:i})}function zl(i){switch(ei(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cu(i);return e?16+zl(e):16;case 5:return 2*i.stringValue.length;case 6:return Zr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+zl(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return ri(s.fields,(c,f)=>{a+=c.length+zl(f)}),a}(i.mapValue);default:throw pe(13486,{value:i})}}function vh(i){return!!i&&"integerValue"in i}function bh(i){return!!i&&"arrayValue"in i}function rm(i){return!!i&&"nullValue"in i}function im(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Bl(i){return!!i&&"mapValue"in i}function ZE(i){return(i?.mapValue?.fields||{})[yg]?.stringValue===_g}function ta(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return ri(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ta(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ta(i.arrayValue.values[n]);return e}return{...i}}function e0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===JE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Bl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ta(n)}setAll(e){let n=At.emptyPath(),s={},a=[];e.forEach((f,g)=>{if(!n.isImmediateParentOf(g)){const y=this.getFieldsMap(n);this.applyChanges(y,s,a),s={},a=[],n=g.popLast()}f?s[g.lastSegment()]=ta(f):a.push(g.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());Bl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];Bl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){ri(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new Xt(ta(this.value))}}function vg(i){const e=[];return ri(i.fields,(n,s)=>{const a=new At([n]);if(Bl(s)){const c=vg(s.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)}),new sn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,s,a,c,f,g){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=f,this.documentState=g}static newInvalidDocument(e){return new Lt(e,0,ye.min(),ye.min(),ye.min(),Xt.empty(),0)}static newFoundDocument(e,n,s,a){return new Lt(e,1,n,ye.min(),s,a,0)}static newNoDocument(e,n){return new Lt(e,2,n,ye.min(),ye.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,ye.min(),ye.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.position=e,this.inclusive=n}}function sm(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],f=i.position[a];if(c.field.isKeyField()?s=ce.comparator(ce.fromName(f.referenceValue),n.key):s=$s(f,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function om(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Xn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function t0(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{}class ft extends Eg{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new r0(e,n,s):n==="array-contains"?new o0(e,s):n==="in"?new a0(e,s):n==="not-in"?new l0(e,s):n==="array-contains-any"?new u0(e,s):new ft(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new i0(e,s):new s0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison($s(n,this.value)):n!==null&&ei(this.value)===ei(n)&&this.matchesComparison($s(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends Eg{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yn(e,n)}matches(e){return wg(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wg(i){return i.op==="and"}function Tg(i){return n0(i)&&wg(i)}function n0(i){for(const e of i.filters)if(e instanceof Yn)return!1;return!0}function Eh(i){if(i instanceof ft)return i.field.canonicalString()+i.op.toString()+qs(i.value);if(Tg(i))return i.filters.map(e=>Eh(e)).join(",");{const e=i.filters.map(n=>Eh(n)).join(",");return`${i.op}(${e})`}}function Ig(i,e){return i instanceof ft?function(s,a){return a instanceof ft&&s.op===a.op&&s.field.isEqual(a.field)&&Xn(s.value,a.value)}(i,e):i instanceof Yn?function(s,a){return a instanceof Yn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,f,g)=>c&&Ig(f,a.filters[g]),!0):!1}(i,e):void pe(19439)}function Sg(i){return i instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${qs(n.value)}`}(i):i instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(Sg).join(" ,")+"}"}(i):"Filter"}class r0 extends ft{constructor(e,n,s){super(e,n,s),this.key=ce.fromName(s.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class i0 extends ft{constructor(e,n){super(e,"in",n),this.keys=Ag("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class s0 extends ft{constructor(e,n){super(e,"not-in",n),this.keys=Ag("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Ag(i,e){return(e.arrayValue?.values||[]).map(n=>ce.fromName(n.referenceValue))}class o0 extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return bh(n)&&ca(n.arrayValue,this.value)}}class a0 extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ca(this.value.arrayValue,n)}}class l0 extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ca(this.value.arrayValue,n)}}class u0 extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!bh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ca(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n=null,s=[],a=[],c=null,f=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=f,this.endAt=g,this.Te=null}}function am(i,e=null,n=[],s=[],a=null,c=null,f=null){return new c0(i,e,n,s,a,c,f)}function $h(i){const e=ve(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>Eh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>qs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>qs(s)).join(",")),e.Te=n}return e.Te}function qh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!t0(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!Ig(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!om(i.startAt,e.startAt)&&om(i.endAt,e.endAt)}function wh(i){return ce.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n=null,s=[],a=[],c=null,f="F",g=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=f,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function h0(i,e,n,s,a,c,f,g){return new hu(i,e,n,s,a,c,f,g)}function Hh(i){return new hu(i)}function lm(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function f0(i){return i.collectionGroup!==null}function na(i){const e=ve(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let g=new pt(At.comparator);return f.filters.forEach(y=>{y.getFlattenedFilters().forEach(v=>{v.isInequality()&&(g=g.add(v.field))})}),g})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new eu(c,s))}),n.has(At.keyField().canonicalString())||e.Ie.push(new eu(At.keyField(),s))}return e.Ie}function Wn(i){const e=ve(i);return e.Ee||(e.Ee=d0(e,na(i))),e.Ee}function d0(i,e){if(i.limitType==="F")return am(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new eu(a.field,c)});const n=i.endAt?new Zl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Zl(i.startAt.position,i.startAt.inclusive):null;return am(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function Th(i,e,n){return new hu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function fu(i,e){return qh(Wn(i),Wn(e))&&i.limitType===e.limitType}function Cg(i){return`${$h(Wn(i))}|lt:${i.limitType}`}function Ms(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>Sg(a)).join(", ")}]`),uu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(f){return`${f.field.canonicalString()} (${f.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>qs(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>qs(a)).join(",")),`Target(${s})`}(Wn(i))}; limitType=${i.limitType})`}function du(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ce.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of na(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(f,g,y){const v=sm(f,g,y);return f.inclusive?v<=0:v<0}(s.startAt,na(s),a)||s.endAt&&!function(f,g,y){const v=sm(f,g,y);return f.inclusive?v>=0:v>0}(s.endAt,na(s),a))}(i,e)}function p0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Rg(i){return(e,n)=>{let s=!1;for(const a of na(i)){const c=m0(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function m0(i,e,n){const s=i.field.isKeyField()?ce.comparator(e.key,n.key):function(c,f,g){const y=f.data.field(c),v=g.data.field(c);return y!==null&&v!==null?$s(y,v):pe(42886)}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return pe(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return hg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0=new Ye(ce.comparator);function vr(){return g0}const Pg=new Ye(ce.comparator);function Yo(...i){let e=Pg;for(const n of i)e=e.insert(n.key,n);return e}function kg(i){let e=Pg;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Oi(){return ra()}function Vg(){return ra()}function ra(){return new ji(i=>i.toString(),(i,e)=>i.isEqual(e))}const y0=new Ye(ce.comparator),_0=new pt(ce.comparator);function Ae(...i){let e=_0;for(const n of i)e=e.add(n);return e}const v0=new pt(Se);function E0(){return v0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xl(e)?"-0":e}}function Ng(i){return{integerValue:""+i}}function w0(i,e){return QE(e)?Ng(e):Wh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this._=void 0}}function T0(i,e,n){return i instanceof tu?function(a,c){const f={fields:{[pg]:{stringValue:dg},[gg]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Bh(c)&&(c=cu(c)),c&&(f.fields[mg]=c),{mapValue:f}}(n,e):i instanceof ha?xg(i,e):i instanceof fa?Og(i,e):function(a,c){const f=Dg(a,c),g=um(f)+um(a.Ae);return vh(f)&&vh(a.Ae)?Ng(g):Wh(a.serializer,g)}(i,e)}function I0(i,e,n){return i instanceof ha?xg(i,e):i instanceof fa?Og(i,e):n}function Dg(i,e){return i instanceof nu?function(s){return vh(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class tu extends pu{}class ha extends pu{constructor(e){super(),this.elements=e}}function xg(i,e){const n=Mg(e);for(const s of i.elements)n.some(a=>Xn(a,s))||n.push(s);return{arrayValue:{values:n}}}class fa extends pu{constructor(e){super(),this.elements=e}}function Og(i,e){let n=Mg(e);for(const s of i.elements)n=n.filter(a=>!Xn(a,s));return{arrayValue:{values:n}}}class nu extends pu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function um(i){return nt(i.integerValue||i.doubleValue)}function Mg(i){return bh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function S0(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof ha&&a instanceof ha||s instanceof fa&&a instanceof fa?bs(s.elements,a.elements,Xn):s instanceof nu&&a instanceof nu?Xn(s.Ae,a.Ae):s instanceof tu&&a instanceof tu}(i.transform,e.transform)}class A0{constructor(e,n){this.version=e,this.transformResults=n}}class xn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bl(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class mu{}function Lg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Qh(i.key,xn.none()):new pa(i.key,i.data,xn.none());{const n=i.data,s=Xt.empty();let a=new pt(At.comparator);for(let c of e.fields)if(!a.has(c)){let f=n.field(c);f===null&&c.length>1&&(c=c.popLast(),f=n.field(c)),f===null?s.delete(c):s.set(c,f),a=a.add(c)}return new ii(i.key,s,new sn(a.toArray()),xn.none())}}function C0(i,e,n){i instanceof pa?function(a,c,f){const g=a.value.clone(),y=hm(a.fieldTransforms,c,f.transformResults);g.setAll(y),c.convertToFoundDocument(f.version,g).setHasCommittedMutations()}(i,e,n):i instanceof ii?function(a,c,f){if(!bl(a.precondition,c))return void c.convertToUnknownDocument(f.version);const g=hm(a.fieldTransforms,c,f.transformResults),y=c.data;y.setAll(Fg(a)),y.setAll(g),c.convertToFoundDocument(f.version,y).setHasCommittedMutations()}(i,e,n):function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()}(0,e,n)}function ia(i,e,n,s){return i instanceof pa?function(c,f,g,y){if(!bl(c.precondition,f))return g;const v=c.value.clone(),S=fm(c.fieldTransforms,y,f);return v.setAll(S),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),null}(i,e,n,s):i instanceof ii?function(c,f,g,y){if(!bl(c.precondition,f))return g;const v=fm(c.fieldTransforms,y,f),S=f.data;return S.setAll(Fg(c)),S.setAll(v),f.convertToFoundDocument(f.version,S).setHasLocalMutations(),g===null?null:g.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(N=>N.field))}(i,e,n,s):function(c,f,g){return bl(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):g}(i,e,n)}function R0(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=Dg(s.transform,a||null);c!=null&&(n===null&&(n=Xt.empty()),n.set(s.field,c))}return n||null}function cm(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&bs(s,a,(c,f)=>S0(c,f))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class pa extends mu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ii extends mu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Fg(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function hm(i,e,n){const s=new Map;Le(i.length===n.length,32656,{Re:n.length,Ve:i.length});for(let a=0;a<n.length;a++){const c=i[a],f=c.transform,g=e.data.field(c.field);s.set(c.field,I0(f,g,n[a]))}return s}function fm(i,e,n){const s=new Map;for(const a of i){const c=a.transform,f=n.data.field(a.field);s.set(a.field,T0(c,f,e))}return s}class Qh extends mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P0 extends mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&C0(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ia(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ia(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=Vg();return this.mutations.forEach(a=>{const c=e.get(a.key),f=c.overlayedDocument;let g=this.applyToLocalView(f,c.mutatedFields);g=n.has(a.key)?null:g;const y=Lg(f,g);y!==null&&s.set(a.key,y),f.isValidDocument()||f.convertToNoDocument(ye.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&bs(this.mutations,e.mutations,(n,s)=>cm(n,s))&&bs(this.baseMutations,e.baseMutations,(n,s)=>cm(n,s))}}class Kh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Le(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let a=function(){return y0}();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,s[f].version);return new Kh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st,Pe;function D0(i){switch(i){case H.OK:return pe(64938);case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0;default:return pe(15467,{code:i})}}function Ug(i){if(i===void 0)return _r("GRPC error has no .code"),H.UNKNOWN;switch(i){case st.OK:return H.OK;case st.CANCELLED:return H.CANCELLED;case st.UNKNOWN:return H.UNKNOWN;case st.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case st.INTERNAL:return H.INTERNAL;case st.UNAVAILABLE:return H.UNAVAILABLE;case st.UNAUTHENTICATED:return H.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case st.NOT_FOUND:return H.NOT_FOUND;case st.ALREADY_EXISTS:return H.ALREADY_EXISTS;case st.PERMISSION_DENIED:return H.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case st.ABORTED:return H.ABORTED;case st.OUT_OF_RANGE:return H.OUT_OF_RANGE;case st.UNIMPLEMENTED:return H.UNIMPLEMENTED;case st.DATA_LOSS:return H.DATA_LOSS;default:return pe(39323,{code:i})}}(Pe=st||(st={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=new Kr([4294967295,4294967295],0);function dm(i){const e=x0().encode(i),n=new eg;return n.update(e),new Uint8Array(n.digest())}function pm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Kr([n,s],0),new Kr([a,c],0)]}class Gh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Jo(`Invalid padding: ${n}`);if(s<0)throw new Jo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Jo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Jo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Kr.fromNumber(this.ge)}ye(e,n,s){let a=e.add(n.multiply(Kr.fromNumber(s)));return a.compare(O0)===1&&(a=new Kr([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=dm(e),[s,a]=pm(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,a,c);if(!this.we(f))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new Gh(c,a,n);return s.forEach(g=>f.insert(g)),f}insert(e){if(this.ge===0)return;const n=dm(e),[s,a]=pm(n);for(let c=0;c<this.hashCount;c++){const f=this.ye(s,a,c);this.Se(f)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ma.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new gu(ye.min(),a,new Ye(Se),vr(),Ae())}}class ma{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ma(s,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,n,s,a){this.be=e,this.removedTargetIds=n,this.key=s,this.De=a}}class jg{constructor(e,n){this.targetId=e,this.Ce=n}}class zg{constructor(e,n,s=Ct.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class mm{constructor(){this.ve=0,this.Fe=gm(),this.Me=Ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),s=Ae();return this.Fe.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:pe(38017,{changeType:c})}}),new ma(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=gm()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class M0{constructor(e){this.Ge=e,this.ze=new Map,this.je=vr(),this.Je=Fl(),this.He=Fl(),this.Ye=new Ye(Se)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:pe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((s,a)=>{this.rt(a)&&n(a)})}st(e){const n=e.targetId,s=e.Ce.count,a=this.ot(n);if(a){const c=a.target;if(wh(c))if(s===0){const f=new ce(c.path);this.et(n,f,Lt.newNoDocument(f,ye.min()))}else Le(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const g=this.ut(e),y=g?this.ct(g,e,f):1;if(y!==0){this.it(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,v)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let f,g;try{f=Zr(s).toUint8Array()}catch(y){if(y instanceof fg)return Bs("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new Gh(f,a,c)}catch(y){return Bs(y instanceof Jo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const f=this.Ge.ht(),g=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(g)||(this.et(n,c,null),a++)}),a}Tt(e){const n=new Map;this.ze.forEach((c,f)=>{const g=this.ot(f);if(g){if(c.current&&wh(g.target)){const y=new ce(g.target.path);this.It(y).has(f)||this.Et(f,y)||this.et(f,y,Lt.newNoDocument(y,e))}c.Be&&(n.set(f,c.ke()),c.qe())}});let s=Ae();this.He.forEach((c,f)=>{let g=!0;f.forEachWhile(y=>{const v=this.ot(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(c))}),this.je.forEach((c,f)=>f.setReadTime(e));const a=new gu(e,n,this.Ye,this.je,s);return this.je=vr(),this.Je=Fl(),this.He=Fl(),this.Ye=new Ye(Se),a}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new mm,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new pt(Se),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new pt(Se),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Fl(){return new Ye(ce.comparator)}function gm(){return new Ye(ce.comparator)}const L0={asc:"ASCENDING",desc:"DESCENDING"},F0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U0={and:"AND",or:"OR"};class j0{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ih(i,e){return i.useProto3Json||uu(e)?e:{value:e}}function ru(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function z0(i,e){return ru(i,e.toTimestamp())}function Qn(i){return Le(!!i,49232),ye.fromTimestamp(function(n){const s=Jr(n);return new We(s.seconds,s.nanos)}(i))}function Xh(i,e){return Sh(i,e).canonicalString()}function Sh(i,e){const n=function(a){return new He(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function bg(i){const e=He.fromString(i);return Le(Qg(e),10190,{key:e.toString()}),e}function Ah(i,e){return Xh(i.databaseId,e.path)}function ah(i,e){const n=bg(e);if(n.get(1)!==i.databaseId.projectId)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new le(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ce(qg(n))}function $g(i,e){return Xh(i.databaseId,e)}function B0(i){const e=bg(i);return e.length===4?He.emptyPath():qg(e)}function Ch(i){return new He(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function qg(i){return Le(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function ym(i,e,n){return{name:Ah(i,e),fields:n.value.mapValue.fields}}function b0(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:pe(39313,{state:v})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(v,S){return v.useProto3Json?(Le(S===void 0||typeof S=="string",58123),Ct.fromBase64String(S||"")):(Le(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),Ct.fromUint8Array(S||new Uint8Array))}(i,e.targetChange.resumeToken),f=e.targetChange.cause,g=f&&function(v){const S=v.code===void 0?H.UNKNOWN:Ug(v.code);return new le(S,v.message||"")}(f);n=new zg(s,a,c,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=ah(i,s.document.name),c=Qn(s.document.updateTime),f=s.document.createTime?Qn(s.document.createTime):ye.min(),g=new Xt({mapValue:{fields:s.document.fields}}),y=Lt.newFoundDocument(a,c,f,g),v=s.targetIds||[],S=s.removedTargetIds||[];n=new $l(v,S,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=ah(i,s.document),c=s.readTime?Qn(s.readTime):ye.min(),f=Lt.newNoDocument(a,c),g=s.removedTargetIds||[];n=new $l([],g,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=ah(i,s.document),c=s.removedTargetIds||[];n=new $l([],c,a,null)}else{if(!("filter"in e))return pe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,f=new N0(a,c),g=s.targetId;n=new jg(g,f)}}return n}function $0(i,e){let n;if(e instanceof pa)n={update:ym(i,e.key,e.value)};else if(e instanceof Qh)n={delete:Ah(i,e.key)};else if(e instanceof ii)n={update:ym(i,e.key,e.data),updateMask:J0(e.fieldMask)};else{if(!(e instanceof P0))return pe(16599,{Vt:e.type});n={verify:Ah(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,f){const g=f.transform;if(g instanceof tu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof ha)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof fa)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof nu)return{fieldPath:f.field.canonicalString(),increment:g.Ae};throw pe(20930,{transform:f.transform})}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:z0(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:pe(27497)}(i,e.precondition)),n}function q0(i,e){return i&&i.length>0?(Le(e!==void 0,14353),i.map(n=>function(a,c){let f=a.updateTime?Qn(a.updateTime):Qn(c);return f.isEqual(ye.min())&&(f=Qn(c)),new A0(f,a.transformResults||[])}(n,e))):[]}function H0(i,e){return{documents:[$g(i,e.path)]}}function W0(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=$g(i,a);const c=function(v){if(v.length!==0)return Wg(Yn.create(v,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const f=function(v){if(v.length!==0)return v.map(S=>function(D){return{field:Ls(D.field),direction:G0(D.dir)}}(S))}(e.orderBy);f&&(n.structuredQuery.orderBy=f);const g=Ih(i,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{ft:n,parent:a}}function Q0(i){let e=B0(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Le(s===1,65062);const S=n.from[0];S.allDescendants?a=S.collectionId:e=e.child(S.collectionId)}let c=[];n.where&&(c=function(N){const D=Hg(N);return D instanceof Yn&&Tg(D)?D.getFilters():[D]}(n.where));let f=[];n.orderBy&&(f=function(N){return N.map(D=>function(K){return new eu(Fs(K.field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(K.direction))}(D))}(n.orderBy));let g=null;n.limit&&(g=function(N){let D;return D=typeof N=="object"?N.value:N,uu(D)?null:D}(n.limit));let y=null;n.startAt&&(y=function(N){const D=!!N.before,z=N.values||[];return new Zl(z,D)}(n.startAt));let v=null;return n.endAt&&(v=function(N){const D=!N.before,z=N.values||[];return new Zl(z,D)}(n.endAt)),h0(e,a,f,c,g,"F",y,v)}function K0(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return pe(28987,{purpose:a})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Hg(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Fs(n.unaryFilter.field);return ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Fs(n.unaryFilter.field);return ft.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Fs(n.unaryFilter.field);return ft.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Fs(n.unaryFilter.field);return ft.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return pe(61313);default:return pe(60726)}}(i):i.fieldFilter!==void 0?function(n){return ft.create(Fs(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return pe(58110);default:return pe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(s=>Hg(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return pe(1026)}}(n.compositeFilter.op))}(i):pe(30097,{filter:i})}function G0(i){return L0[i]}function X0(i){return F0[i]}function Y0(i){return U0[i]}function Ls(i){return{fieldPath:i.canonicalString()}}function Fs(i){return At.fromServerFormat(i.fieldPath)}function Wg(i){return i instanceof ft?function(n){if(n.op==="=="){if(im(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NAN"}};if(rm(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(im(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NAN"}};if(rm(n.value))return{unaryFilter:{field:Ls(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ls(n.field),op:X0(n.op),value:n.value}}}(i):i instanceof Yn?function(n){const s=n.getFilters().map(a=>Wg(a));return s.length===1?s[0]:{compositeFilter:{op:Y0(n.op),filters:s}}}(i):pe(54877,{filter:i})}function J0(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Qg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e,n,s,a,c=ye.min(),f=ye.min(),g=Ct.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(e){return new Hr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e){this.yt=e}}function ew(i){const e=Q0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Th(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.Cn=new nw}addToCollectionParentIndex(e,n){return this.Cn.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Yr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Yr.min())}updateCollectionGroup(e,n,s){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class nw{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new pt(He.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new pt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kg=41943040;class Gt{static withCacheSize(e){return new Gt(e,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gt.DEFAULT_COLLECTION_PERCENTILE=10,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gt.DEFAULT=new Gt(Kg,Gt.DEFAULT_COLLECTION_PERCENTILE,Gt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gt.DISABLED=new Gt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Hs(0)}static cr(){return new Hs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="LruGarbageCollector",rw=1048576;function Em([i,e],[n,s]){const a=Se(i,n);return a===0?Se(e,s):a}class iw{constructor(e){this.Ir=e,this.buffer=new pt(Em),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Em(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sw{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){te(vm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ys(n)?te(vm,"Ignoring IndexedDB error during garbage collection: ",n):await Xs(n)}await this.Vr(3e5)})}}class ow{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return B.resolve(lu.ce);const s=new iw(n);return this.mr.forEachTarget(e,a=>s.Ar(a.sequenceNumber)).next(()=>this.mr.pr(e,a=>s.Ar(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(_m)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_m):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,a,c,f,g,y,v;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),a=this.params.maximumSequenceNumbersToCollect):a=N,f=Date.now(),this.nthSequenceNumber(e,a))).next(N=>(s=N,g=Date.now(),this.removeTargets(e,s,n))).next(N=>(c=N,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(N=>(v=Date.now(),Os()<=ke.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-S}ms
	Determined least recently used ${a} in `+(g-f)+`ms
	Removed ${c} targets in `+(y-g)+`ms
	Removed ${N} documents in `+(v-y)+`ms
Total Duration: ${v-S}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:N})))}}function aw(i,e){return new ow(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(){this.changes=new ji(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?B.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&ia(s.mutation,a,sn.empty(),We.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ae()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ae()){const a=Oi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let f=Yo();return c.forEach((g,y)=>{f=f.insert(g,y.overlayedDocument)}),f}))}getOverlayedDocuments(e,n){const s=Oi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ae()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((f,g)=>{n.set(f,g)})})}computeViews(e,n,s,a){let c=vr();const f=ra(),g=function(){return ra()}();return n.forEach((y,v)=>{const S=s.get(v.key);a.has(v.key)&&(S===void 0||S.mutation instanceof ii)?c=c.insert(v.key,v):S!==void 0?(f.set(v.key,S.mutation.getFieldMask()),ia(S.mutation,v,S.mutation.getFieldMask(),We.now())):f.set(v.key,sn.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((v,S)=>f.set(v,S)),n.forEach((v,S)=>g.set(v,new uw(S,f.get(v)??null))),g))}recalculateAndSaveOverlays(e,n){const s=ra();let a=new Ye((f,g)=>f-g),c=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(f=>{for(const g of f)g.keys().forEach(y=>{const v=n.get(y);if(v===null)return;let S=s.get(y)||sn.empty();S=g.applyToLocalView(v,S),s.set(y,S);const N=(a.get(g.batchId)||Ae()).add(y);a=a.insert(g.batchId,N)})}).next(()=>{const f=[],g=a.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),v=y.key,S=y.value,N=Vg();S.forEach(D=>{if(!c.has(D)){const z=Lg(n.get(D),s.get(D));z!==null&&N.set(D,z),c=c.add(D)}}),f.push(this.documentOverlayCache.saveOverlays(e,v,N))}return B.waitFor(f)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(f){return ce.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):f0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):B.resolve(Oi());let g=aa,y=c;return f.next(v=>B.forEach(v,(S,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),c.get(S)?B.resolve():this.remoteDocumentCache.getEntry(e,S).next(D=>{y=y.insert(S,D)}))).next(()=>this.populateOverlays(e,v,c)).next(()=>this.computeViews(e,y,v,Ae())).next(S=>({batchId:g,changes:kg(S)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(s=>{let a=Yo();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let f=Yo();return this.indexManager.getCollectionParents(e,c).next(g=>B.forEach(g,y=>{const v=function(N,D){return new hu(D,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)}(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next(S=>{S.forEach((N,D)=>{f=f.insert(N,D)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(f=>{c.forEach((y,v)=>{const S=v.getKey();f.get(S)===null&&(f=f.insert(S,Lt.newInvalidDocument(S)))});let g=Yo();return f.forEach((y,v)=>{const S=c.get(y);S!==void 0&&ia(S.mutation,v,sn.empty(),We.now()),du(n,v)&&(g=g.insert(y,v))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return B.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Qn(a.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(a){return{name:a.name,query:ew(a.bundledQuery),readTime:Qn(a.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(){this.overlays=new Ye(ce.comparator),this.qr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Oi();return B.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.St(e,n,c)}),B.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.qr.delete(s)),B.resolve()}getOverlaysForCollection(e,n,s){const a=Oi(),c=n.length+1,f=new ce(n.child("")),g=this.overlays.getIteratorFrom(f);for(;g.hasNext();){const y=g.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return B.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Ye((v,S)=>v-S);const f=this.overlays.getIterator();for(;f.hasNext();){const v=f.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let S=c.get(v.largestBatchId);S===null&&(S=Oi(),c=c.insert(v.largestBatchId,S)),S.set(v.getKey(),v)}}const g=Oi(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((v,S)=>g.set(v,S)),!(g.size()>=a)););return B.resolve(g)}St(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const f=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new V0(n,s));let c=this.qr.get(n);c===void 0&&(c=Ae(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(){this.Qr=new pt(vt.$r),this.Ur=new pt(vt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new vt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.Gr(new vt(e,n))}zr(e,n){e.forEach(s=>this.removeReference(s,n))}jr(e){const n=new ce(new He([])),s=new vt(n,e),a=new vt(n,e+1),c=[];return this.Ur.forEachInRange([s,a],f=>{this.Gr(f),c.push(f.key)}),c}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new He([])),s=new vt(n,e),a=new vt(n,e+1);let c=Ae();return this.Ur.forEachInRange([s,a],f=>{c=c.add(f.key)}),c}containsKey(e){const n=new vt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class vt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||Se(e.Yr,n.Yr)}static Kr(e,n){return Se(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new pt(vt.$r)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new k0(c,n,s,a);this.mutationQueue.push(f);for(const g of a)this.Zr=this.Zr.add(new vt(g.key,c)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return B.resolve(f)}lookupMutationBatch(e,n){return B.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.ei(s),c=a<0?0:a;return B.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?zh:this.tr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new vt(n,0),a=new vt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,a],f=>{const g=this.Xr(f.Yr);c.push(g)}),B.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new pt(Se);return n.forEach(a=>{const c=new vt(a,0),f=new vt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],g=>{s=s.add(g.Yr)})}),B.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;ce.isDocumentKey(c)||(c=c.child(""));const f=new vt(new ce(c),0);let g=new pt(Se);return this.Zr.forEachWhile(y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(g=g.add(y.Yr)),!0)},f),B.resolve(this.ti(g))}ti(e){const n=[];return e.forEach(s=>{const a=this.Xr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Le(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return B.forEach(n.mutations,a=>{const c=new vt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Zr=s})}ir(e){}containsKey(e,n){const s=new vt(n,0),a=this.Zr.firstAfterOrEqual(s);return B.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e){this.ri=e,this.docs=function(){return new Ye(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,f=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return B.resolve(s?s.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let s=vr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Lt.newInvalidDocument(a))}),B.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=vr();const f=n.path,g=new ce(f.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:v,value:{document:S}}=y.getNext();if(!f.isPrefixOf(v.path))break;v.path.length>f.length+1||$E(bE(S),s)<=0||(a.has(S.key)||du(n,S))&&(c=c.insert(S.key,S.mutableCopy()))}return B.resolve(c)}getAllFromCollectionGroup(e,n,s,a){pe(9500)}ii(e,n){return B.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new gw(this)}getSize(e){return B.resolve(this.size)}}class gw extends lw{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(s)}),B.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e){this.persistence=e,this.si=new ji(n=>$h(n),qh),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new Yh,this.targetCount=0,this.ai=Hs.ur()}forEachTarget(e,n){return this.si.forEach((s,a)=>n(a)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),B.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Hs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Pr(n),B.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.si.forEach((f,g)=>{g.sequenceNumber<=n&&s.get(g.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,g.targetId)),a++)}),B.waitFor(c).next(()=>a)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return B.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),B.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(f=>{c.push(a.markPotentiallyOrphaned(e,f))}),B.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return B.resolve(s)}containsKey(e,n){return B.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,n){this.ui={},this.overlays={},this.ci=new lu(0),this.li=!1,this.li=!0,this.hi=new dw,this.referenceDelegate=e(this),this.Pi=new yw(this),this.indexManager=new tw,this.remoteDocumentCache=function(a){return new mw(a)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new Z0(n),this.Ii=new hw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new pw(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){te("MemoryPersistence","Starting transaction:",e);const a=new _w(this.ci.next());return this.referenceDelegate.Ei(),s(a).next(c=>this.referenceDelegate.di(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ai(e,n){return B.or(Object.values(this.ui).map(s=>()=>s.containsKey(e,n)))}}class _w extends HE{constructor(e){super(),this.currentSequenceNumber=e}}class Jh{constructor(e){this.persistence=e,this.Ri=new Yh,this.Vi=null}static mi(e){return new Jh(e)}get fi(){if(this.Vi)return this.Vi;throw pe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),B.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),B.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(a=>this.fi.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.fi.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.fi,s=>{const a=ce.fromPath(s);return this.gi(e,a).next(c=>{c||n.removeEntry(a,ye.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return B.or([()=>B.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class iu{constructor(e,n){this.persistence=e,this.pi=new ji(s=>KE(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=aw(this,n)}static mi(e,n){return new iu(e,n)}Ei(){}di(e){return B.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}wr(e){let n=0;return this.pr(e,s=>{n++}).next(()=>n)}pr(e,n){return B.forEach(this.pi,(s,a)=>this.br(e,s,a).next(c=>c?B.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(e,f=>this.br(e,f,n).next(g=>{g||(s++,c.removeEntry(f,ye.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),B.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),B.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zl(e.data.value)),n}br(e,n,s){return B.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.pi.get(n);return B.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=a}static As(e,n){let s=Ae(),a=Ae();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new Zh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return fv()?8:WE(cv())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.ys(e,n).next(f=>{c.result=f}).next(()=>{if(!c.result)return this.ws(e,n,a,s).next(f=>{c.result=f})}).next(()=>{if(c.result)return;const f=new vw;return this.Ss(e,n,f).next(g=>{if(c.result=g,this.Vs)return this.bs(e,n,f,g.size)})}).next(()=>c.result)}bs(e,n,s,a){return s.documentReadCount<this.fs?(Os()<=ke.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Ms(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),B.resolve()):(Os()<=ke.DEBUG&&te("QueryEngine","Query:",Ms(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(Os()<=ke.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Ms(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wn(n))):B.resolve())}ys(e,n){if(lm(n))return B.resolve(null);let s=Wn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=Th(n,null,"F"),s=Wn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const f=Ae(...c);return this.ps.getDocuments(e,f).next(g=>this.indexManager.getMinOffset(e,s).next(y=>{const v=this.Ds(n,g);return this.Cs(n,v,f,y.readTime)?this.ys(e,Th(n,null,"F")):this.vs(e,v,n,y)}))})))}ws(e,n,s,a){return lm(n)||a.isEqual(ye.min())?B.resolve(null):this.ps.getDocuments(e,s).next(c=>{const f=this.Ds(n,c);return this.Cs(n,f,s,a)?B.resolve(null):(Os()<=ke.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Ms(n)),this.vs(e,f,n,BE(a,aa)).next(g=>g))})}Ds(e,n){let s=new pt(Rg(e));return n.forEach((a,c)=>{du(e,c)&&(s=s.add(c))}),s}Cs(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,n,s){return Os()<=ke.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Ms(n)),this.ps.getDocumentsMatchingQuery(e,n,Yr.min(),s)}vs(e,n,s,a){return this.ps.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(f=>{c=c.insert(f.key,f)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef="LocalStore",ww=3e8;class Tw{constructor(e,n,s,a){this.persistence=e,this.Fs=n,this.serializer=a,this.Ms=new Ye(Se),this.xs=new ji(c=>$h(c),qh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function Iw(i,e,n,s){return new Tw(i,e,n,s)}async function Xg(i,e){const n=ve(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const f=[],g=[];let y=Ae();for(const v of a){f.push(v.batchId);for(const S of v.mutations)y=y.add(S.key)}for(const v of c){g.push(v.batchId);for(const S of v.mutations)y=y.add(S.key)}return n.localDocuments.getDocuments(s,y).next(v=>({Ls:v,removedBatchIds:f,addedBatchIds:g}))})})}function Sw(i,e){const n=ve(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return function(g,y,v,S){const N=v.batch,D=N.keys();let z=B.resolve();return D.forEach(K=>{z=z.next(()=>S.getEntry(y,K)).next(X=>{const $=v.docVersions.get(K);Le($!==null,48541),X.version.compareTo($)<0&&(N.applyToRemoteDocument(X,v),X.isValidDocument()&&(X.setReadTime(v.commitVersion),S.addEntry(X)))})}),z.next(()=>g.mutationQueue.removeMutationBatch(y,N))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let y=Ae();for(let v=0;v<g.mutationResults.length;++v)g.mutationResults[v].transformResults.length>0&&(y=y.add(g.batch.mutations[v].key));return y}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function Yg(i){const e=ve(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Aw(i,e){const n=ve(i),s=e.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const f=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const g=[];e.targetChanges.forEach((S,N)=>{const D=a.get(N);if(!D)return;g.push(n.Pi.removeMatchingKeys(c,S.removedDocuments,N).next(()=>n.Pi.addMatchingKeys(c,S.addedDocuments,N)));let z=D.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(N)!==null?z=z.withResumeToken(Ct.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):S.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(S.resumeToken,s)),a=a.insert(N,z),function(X,$,_e){return X.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=ww?!0:_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0}(D,z,S)&&g.push(n.Pi.updateTargetData(c,z))});let y=vr(),v=Ae();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(c,S))}),g.push(Cw(c,f,e.documentUpdates).next(S=>{y=S.ks,v=S.qs})),!s.isEqual(ye.min())){const S=n.Pi.getLastRemoteSnapshotVersion(c).next(N=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s));g.push(S)}return B.waitFor(g).next(()=>f.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,y,v)).next(()=>y)}).then(c=>(n.Ms=a,c))}function Cw(i,e,n){let s=Ae(),a=Ae();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let f=vr();return n.forEach((g,y)=>{const v=c.get(g);y.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(g)),y.isNoDocument()&&y.version.isEqual(ye.min())?(e.removeEntry(g,y.readTime),f=f.insert(g,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),f=f.insert(g,y)):te(ef,"Ignoring outdated watch update for ",g,". Current version:",v.version," Watch version:",y.version)}),{ks:f,qs:a}})}function Rw(i,e){const n=ve(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=zh),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Pw(i,e){const n=ve(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Pi.getTargetData(s,e).next(c=>c?(a=c,B.resolve(a)):n.Pi.allocateTargetId(s).next(f=>(a=new Hr(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s})}async function Rh(i,e,n){const s=ve(i),a=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,f=>s.persistence.referenceDelegate.removeTarget(f,a))}catch(f){if(!Ys(f))throw f;te(ef,`Failed to update sequence numbers for target ${e}: ${f}`)}s.Ms=s.Ms.remove(e),s.xs.delete(a.target)}function wm(i,e,n){const s=ve(i);let a=ye.min(),c=Ae();return s.persistence.runTransaction("Execute query","readwrite",f=>function(y,v,S){const N=ve(y),D=N.xs.get(S);return D!==void 0?B.resolve(N.Ms.get(D)):N.Pi.getTargetData(v,S)}(s,f,Wn(e)).next(g=>{if(g)return a=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(f,g.targetId).next(y=>{c=y})}).next(()=>s.Fs.getDocumentsMatchingQuery(f,e,n?a:ye.min(),n?c:Ae())).next(g=>(kw(s,p0(e),g),{documents:g,Qs:c})))}function kw(i,e,n){let s=i.Os.get(e)||ye.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.Os.set(e,s)}class Tm{constructor(){this.activeTargetIds=E0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vw{constructor(){this.Mo=new Tm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Tm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="ConnectivityMonitor";class Sm{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){te(Im,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){te(Im,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=null;function Ph(){return Ul===null?Ul=function(){return 268435456+Math.round(2147483648*Math.random())}():Ul++,"0x"+Ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="RestConnection",Dw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xw{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===Yl?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(e,n,s,a,c){const f=Ph(),g=this.zo(e,n.toUriEncodedString());te(lh,`Sending RPC '${e}' ${f}:`,g,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,a,c);const{host:v}=new URL(g),S=Mh(v);return this.Jo(e,g,y,s,S).then(N=>(te(lh,`Received RPC '${e}' ${f}: `,N),N),N=>{throw Bs(lh,`RPC '${e}' ${f} failed with error: `,N,"url: ",g,"request:",s),N})}Ho(e,n,s,a,c,f){return this.Go(e,n,s,a,c)}jo(e,n,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((a,c)=>e[c]=a),s&&s.headers.forEach((a,c)=>e[c]=a)}zo(e,n){const s=Dw[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot="WebChannelConnection";class Mw extends xw{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,a,c){const f=Ph();return new Promise((g,y)=>{const v=new tg;v.setWithCredentials(!0),v.listenOnce(ng.COMPLETE,()=>{try{switch(v.getLastErrorCode()){case jl.NO_ERROR:const N=v.getResponseJson();te(Ot,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(N)),g(N);break;case jl.TIMEOUT:te(Ot,`RPC '${e}' ${f} timed out`),y(new le(H.DEADLINE_EXCEEDED,"Request time out"));break;case jl.HTTP_ERROR:const D=v.getStatus();if(te(Ot,`RPC '${e}' ${f} failed with status:`,D,"response text:",v.getResponseText()),D>0){let z=v.getResponseJson();Array.isArray(z)&&(z=z[0]);const K=z?.error;if(K&&K.status&&K.message){const X=function(_e){const Z=_e.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(Z)>=0?Z:H.UNKNOWN}(K.status);y(new le(X,K.message))}else y(new le(H.UNKNOWN,"Server responded with status "+v.getStatus()))}else y(new le(H.UNAVAILABLE,"Connection failed."));break;default:pe(9055,{l_:e,streamId:f,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{te(Ot,`RPC '${e}' ${f} completed.`)}});const S=JSON.stringify(a);te(Ot,`RPC '${e}' ${f} sending request:`,a),v.send(n,"POST",S,s,15)})}T_(e,n,s){const a=Ph(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=sg(),g=ig(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const S=c.join("");te(Ot,`Creating RPC '${e}' stream ${a}: ${S}`,y);const N=f.createWebChannel(S,y);this.I_(N);let D=!1,z=!1;const K=new Ow({Yo:$=>{z?te(Ot,`Not sending because RPC '${e}' stream ${a} is closed:`,$):(D||(te(Ot,`Opening RPC '${e}' stream ${a} transport.`),N.open(),D=!0),te(Ot,`RPC '${e}' stream ${a} sending:`,$),N.send($))},Zo:()=>N.close()}),X=($,_e,Z)=>{$.listen(_e,se=>{try{Z(se)}catch(ge){setTimeout(()=>{throw ge},0)}})};return X(N,Xo.EventType.OPEN,()=>{z||(te(Ot,`RPC '${e}' stream ${a} transport opened.`),K.o_())}),X(N,Xo.EventType.CLOSE,()=>{z||(z=!0,te(Ot,`RPC '${e}' stream ${a} transport closed`),K.a_(),this.E_(N))}),X(N,Xo.EventType.ERROR,$=>{z||(z=!0,Bs(Ot,`RPC '${e}' stream ${a} transport errored. Name:`,$.name,"Message:",$.message),K.a_(new le(H.UNAVAILABLE,"The operation could not be completed")))}),X(N,Xo.EventType.MESSAGE,$=>{if(!z){const _e=$.data[0];Le(!!_e,16349);const Z=_e,se=Z?.error||Z[0]?.error;if(se){te(Ot,`RPC '${e}' stream ${a} received error:`,se);const ge=se.status;let Fe=function(T){const A=st[T];if(A!==void 0)return Ug(A)}(ge),Te=se.message;Fe===void 0&&(Fe=H.INTERNAL,Te="Unknown error status: "+ge+" with message "+se.message),z=!0,K.a_(new le(Fe,Te)),N.close()}else te(Ot,`RPC '${e}' stream ${a} received:`,_e),K.u_(_e)}}),X(g,rg.STAT_EVENT,$=>{$.stat===gh.PROXY?te(Ot,`RPC '${e}' stream ${a} detected buffering proxy`):$.stat===gh.NOPROXY&&te(Ot,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{K.__()},0),K}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(i){return new j0(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n,s=1e3,a=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am="PersistentStream";class Zg{constructor(e,n,s,a,c,f,g,y){this.Mi=e,this.S_=s,this.b_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Jg(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(_r(n.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.D_===n&&this.G_(s,a)},s=>{e(()=>{const a=new le(H.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)})})}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{s(()=>this.z_(a))}),this.stream.onMessage(a=>{s(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return te(Am,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(te(Am,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lw extends Zg{constructor(e,n,s,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=b0(this.serializer,e),s=function(c){if(!("targetChange"in c))return ye.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?ye.min():f.readTime?Qn(f.readTime):ye.min()}(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=Ch(this.serializer),n.addTarget=function(c,f){let g;const y=f.target;if(g=wh(y)?{documents:H0(c,y)}:{query:W0(c,y).ft},g.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){g.resumeToken=Bg(c,f.resumeToken);const v=Ih(c,f.expectedCount);v!==null&&(g.expectedCount=v)}else if(f.snapshotVersion.compareTo(ye.min())>0){g.readTime=ru(c,f.snapshotVersion.toTimestamp());const v=Ih(c,f.expectedCount);v!==null&&(g.expectedCount=v)}return g}(this.serializer,e);const s=K0(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=Ch(this.serializer),n.removeTarget=e,this.q_(n)}}class Fw extends Zg{constructor(e,n,s,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=q0(e.writeResults,e.commitTime),s=Qn(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=Ch(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>$0(this.serializer,s))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{}class jw extends Uw{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Go(e,Sh(n,s),a,c,f)).catch(c=>{throw c.name==="FirebaseError"?(c.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new le(H.UNKNOWN,c.toString())})}Ho(e,n,s,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,g])=>this.connection.Ho(e,Sh(n,s),a,f,g,c)).catch(f=>{throw f.name==="FirebaseError"?(f.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new le(H.UNKNOWN,f.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class zw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_r(n),this.aa=!1):te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="RemoteStore";class Bw{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo(f=>{s.enqueueAndForget(async()=>{zi(this)&&(te(Ui,"Restarting streams for network reachability change."),await async function(y){const v=ve(y);v.Ea.add(4),await ga(v),v.Ra.set("Unknown"),v.Ea.delete(4),await _u(v)}(this))})}),this.Ra=new zw(s,a)}}async function _u(i){if(zi(i))for(const e of i.da)await e(!0)}async function ga(i){for(const e of i.da)await e(!1)}function ey(i,e){const n=ve(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),sf(n)?rf(n):Js(n).O_()&&nf(n,e))}function tf(i,e){const n=ve(i),s=Js(n);n.Ia.delete(e),s.O_()&&ty(n,e),n.Ia.size===0&&(s.O_()?s.L_():zi(n)&&n.Ra.set("Unknown"))}function nf(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Js(i).Y_(e)}function ty(i,e){i.Va.Ue(e),Js(i).Z_(e)}function rf(i){i.Va=new M0({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Js(i).start(),i.Ra.ua()}function sf(i){return zi(i)&&!Js(i).x_()&&i.Ia.size>0}function zi(i){return ve(i).Ea.size===0}function ny(i){i.Va=void 0}async function bw(i){i.Ra.set("Online")}async function $w(i){i.Ia.forEach((e,n)=>{nf(i,e)})}async function qw(i,e){ny(i),sf(i)?(i.Ra.ha(e),rf(i)):i.Ra.set("Unknown")}async function Hw(i,e,n){if(i.Ra.set("Online"),e instanceof zg&&e.state===2&&e.cause)try{await async function(a,c){const f=c.cause;for(const g of c.targetIds)a.Ia.has(g)&&(await a.remoteSyncer.rejectListen(g,f),a.Ia.delete(g),a.Va.removeTarget(g))}(i,e)}catch(s){te(Ui,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await su(i,s)}else if(e instanceof $l?i.Va.Ze(e):e instanceof jg?i.Va.st(e):i.Va.tt(e),!n.isEqual(ye.min()))try{const s=await Yg(i.localStore);n.compareTo(s)>=0&&await function(c,f){const g=c.Va.Tt(f);return g.targetChanges.forEach((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const S=c.Ia.get(v);S&&c.Ia.set(v,S.withResumeToken(y.resumeToken,f))}}),g.targetMismatches.forEach((y,v)=>{const S=c.Ia.get(y);if(!S)return;c.Ia.set(y,S.withResumeToken(Ct.EMPTY_BYTE_STRING,S.snapshotVersion)),ty(c,y);const N=new Hr(S.target,y,v,S.sequenceNumber);nf(c,N)}),c.remoteSyncer.applyRemoteEvent(g)}(i,n)}catch(s){te(Ui,"Failed to raise snapshot:",s),await su(i,s)}}async function su(i,e,n){if(!Ys(e))throw e;i.Ea.add(1),await ga(i),i.Ra.set("Offline"),n||(n=()=>Yg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{te(Ui,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await _u(i)})}function ry(i,e){return e().catch(n=>su(i,n,e))}async function vu(i){const e=ve(i),n=ti(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zh;for(;Ww(e);)try{const a=await Rw(e.localStore,s);if(a===null){e.Ta.length===0&&n.L_();break}s=a.batchId,Qw(e,a)}catch(a){await su(e,a)}iy(e)&&sy(e)}function Ww(i){return zi(i)&&i.Ta.length<10}function Qw(i,e){i.Ta.push(e);const n=ti(i);n.O_()&&n.X_&&n.ea(e.mutations)}function iy(i){return zi(i)&&!ti(i).x_()&&i.Ta.length>0}function sy(i){ti(i).start()}async function Kw(i){ti(i).ra()}async function Gw(i){const e=ti(i);for(const n of i.Ta)e.ea(n.mutations)}async function Xw(i,e,n){const s=i.Ta.shift(),a=Kh.from(s,e,n);await ry(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await vu(i)}async function Yw(i,e){e&&ti(i).X_&&await async function(s,a){if(function(f){return D0(f)&&f!==H.ABORTED}(a.code)){const c=s.Ta.shift();ti(s).B_(),await ry(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await vu(s)}}(i,e),iy(i)&&sy(i)}async function Cm(i,e){const n=ve(i);n.asyncQueue.verifyOperationInProgress(),te(Ui,"RemoteStore received new credentials");const s=zi(n);n.Ea.add(3),await ga(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await _u(n)}async function Jw(i,e){const n=ve(i);e?(n.Ea.delete(2),await _u(n)):e||(n.Ea.add(2),await ga(n),n.Ra.set("Unknown"))}function Js(i){return i.ma||(i.ma=function(n,s,a){const c=ve(n);return c.sa(),new Lw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Xo:bw.bind(null,i),t_:$w.bind(null,i),r_:qw.bind(null,i),H_:Hw.bind(null,i)}),i.da.push(async e=>{e?(i.ma.B_(),sf(i)?rf(i):i.Ra.set("Unknown")):(await i.ma.stop(),ny(i))})),i.ma}function ti(i){return i.fa||(i.fa=function(n,s,a){const c=ve(n);return c.sa(),new Fw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:Kw.bind(null,i),r_:Yw.bind(null,i),ta:Gw.bind(null,i),na:Xw.bind(null,i)}),i.da.push(async e=>{e?(i.fa.B_(),await vu(i)):(await i.fa.stop(),i.Ta.length>0&&(te(Ui,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))})),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(f=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const f=Date.now()+s,g=new of(e,n,f,a,c);return g.start(s),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function af(i,e){if(_r("AsyncQueue",`${e}: ${i}`),Ys(i))return new le(H.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{static emptySet(e){return new js(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ce.comparator(n.key,s.key):(n,s)=>ce.comparator(n.key,s.key),this.keyedMap=Yo(),this.sortedSet=new Ye(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof js)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new js;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(){this.ga=new Ye(ce.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):pe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,s)=>{e.push(s)}),e}}class Ws{constructor(e,n,s,a,c,f,g,y,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,c){const f=[];return n.forEach(g=>{f.push({type:0,doc:g})}),new Ws(e,n,js.emptySet(n),f,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class eT{constructor(){this.queries=Pm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=ve(n),c=a.queries;a.queries=Pm(),c.forEach((f,g)=>{for(const y of g.Sa)y.onError(s)})})(this,new le(H.ABORTED,"Firestore shutting down"))}}function Pm(){return new ji(i=>Cg(i),fu)}async function tT(i,e){const n=ve(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.ba()&&e.Da()&&(s=2):(c=new Zw,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(a,!0);break;case 1:c.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(f){const g=af(f,`Initialization of query '${Ms(e.query)}' failed`);return void e.onError(g)}n.queries.set(a,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&lf(n)}async function nT(i,e){const n=ve(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?a=e.Da()?0:1:!c.ba()&&e.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function rT(i,e){const n=ve(i);let s=!1;for(const a of e){const c=a.query,f=n.queries.get(c);if(f){for(const g of f.Sa)g.Fa(a)&&(s=!0);f.wa=a}}s&&lf(n)}function iT(i,e,n){const s=ve(i),a=s.queries.get(e);if(a)for(const c of a.Sa)c.onError(n);s.queries.delete(e)}function lf(i){i.Ca.forEach(e=>{e.next()})}var kh,km;(km=kh||(kh={})).Ma="default",km.Cache="cache";class sT{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Ws(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ws.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this.key=e}}class ay{constructor(e){this.key=e}}class oT{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=Rg(e),this.tu=new js(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new Rm,a=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,f=a,g=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((S,N)=>{const D=a.get(S),z=du(this.query,N)?N:null,K=!!D&&this.mutatedKeys.has(D.key),X=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let $=!1;D&&z?D.data.isEqual(z.data)?K!==X&&(s.track({type:3,doc:z}),$=!0):this.su(D,z)||(s.track({type:2,doc:z}),$=!0,(y&&this.eu(z,y)>0||v&&this.eu(z,v)<0)&&(g=!0)):!D&&z?(s.track({type:0,doc:z}),$=!0):D&&!z&&(s.track({type:1,doc:D}),$=!0,(y||v)&&(g=!0)),$&&(z?(f=f.add(z),c=X?c.add(S):c.delete(S)):(f=f.delete(S),c=c.delete(S)))}),this.query.limit!==null)for(;f.size>this.query.limit;){const S=this.query.limitType==="F"?f.last():f.first();f=f.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{tu:f,iu:s,Cs:g,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort((S,N)=>function(z,K){const X=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return pe(20277,{Rt:$})}};return X(z)-X(K)}(S.type,N.type)||this.eu(S.doc,N.doc)),this.ou(s),a=a??!1;const g=n&&!a?this._u():[],y=this.Xa.size===0&&this.current&&!a?1:0,v=y!==this.Za;return this.Za=y,f.length!==0||v?{snapshot:new Ws(this.query,e.tu,c,f,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Rm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const n=[];return e.forEach(s=>{this.Xa.has(s)||n.push(new ay(s))}),this.Xa.forEach(s=>{e.has(s)||n.push(new oy(s))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ws.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const uf="SyncEngine";class aT{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class lT{constructor(e){this.key=e,this.hu=!1}}class uT{constructor(e,n,s,a,c,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ji(g=>Cg(g),fu),this.Iu=new Map,this.Eu=new Set,this.du=new Ye(ce.comparator),this.Au=new Map,this.Ru=new Yh,this.Vu={},this.mu=new Map,this.fu=Hs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function cT(i,e,n=!0){const s=dy(i);let a;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await ly(s,e,n,!0),a}async function hT(i,e){const n=dy(i);await ly(n,e,!0,!1)}async function ly(i,e,n,s){const a=await Pw(i.localStore,Wn(e)),c=a.targetId,f=i.sharedClientState.addLocalQueryTarget(c,n);let g;return s&&(g=await fT(i,e,c,f==="current",a.resumeToken)),i.isPrimaryClient&&n&&ey(i.remoteStore,a),g}async function fT(i,e,n,s,a){i.pu=(N,D,z)=>async function(X,$,_e,Z){let se=$.view.ru(_e);se.Cs&&(se=await wm(X.localStore,$.query,!1).then(({documents:V})=>$.view.ru(V,se)));const ge=Z&&Z.targetChanges.get($.targetId),Fe=Z&&Z.targetMismatches.get($.targetId)!=null,Te=$.view.applyChanges(se,X.isPrimaryClient,ge,Fe);return Nm(X,$.targetId,Te.au),Te.snapshot}(i,N,D,z);const c=await wm(i.localStore,e,!0),f=new oT(e,c.Qs),g=f.ru(c.documents),y=ma.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=f.applyChanges(g,i.isPrimaryClient,y);Nm(i,n,v.au);const S=new aT(e,n,f);return i.Tu.set(e,S),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),v.snapshot}async function dT(i,e,n){const s=ve(i),a=s.Tu.get(e),c=s.Iu.get(a.targetId);if(c.length>1)return s.Iu.set(a.targetId,c.filter(f=>!fu(f,e))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Rh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&tf(s.remoteStore,a.targetId),Vh(s,a.targetId)}).catch(Xs)):(Vh(s,a.targetId),await Rh(s.localStore,a.targetId,!0))}async function pT(i,e){const n=ve(i),s=n.Tu.get(e),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),tf(n.remoteStore,s.targetId))}async function mT(i,e,n){const s=TT(i);try{const a=await function(f,g){const y=ve(f),v=We.now(),S=g.reduce((z,K)=>z.add(K.key),Ae());let N,D;return y.persistence.runTransaction("Locally write mutations","readwrite",z=>{let K=vr(),X=Ae();return y.Ns.getEntries(z,S).next($=>{K=$,K.forEach((_e,Z)=>{Z.isValidDocument()||(X=X.add(_e))})}).next(()=>y.localDocuments.getOverlayedDocuments(z,K)).next($=>{N=$;const _e=[];for(const Z of g){const se=R0(Z,N.get(Z.key).overlayedDocument);se!=null&&_e.push(new ii(Z.key,se,vg(se.value.mapValue),xn.exists(!0)))}return y.mutationQueue.addMutationBatch(z,v,_e,g)}).next($=>{D=$;const _e=$.applyToLocalDocumentSet(N,X);return y.documentOverlayCache.saveOverlays(z,$.batchId,_e)})}).then(()=>({batchId:D.batchId,changes:kg(N)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(f,g,y){let v=f.Vu[f.currentUser.toKey()];v||(v=new Ye(Se)),v=v.insert(g,y),f.Vu[f.currentUser.toKey()]=v}(s,a.batchId,n),await ya(s,a.changes),await vu(s.remoteStore)}catch(a){const c=af(a,"Failed to persist write");n.reject(c)}}async function uy(i,e){const n=ve(i);try{const s=await Aw(n.localStore,e);e.targetChanges.forEach((a,c)=>{const f=n.Au.get(c);f&&(Le(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.hu=!0:a.modifiedDocuments.size>0?Le(f.hu,14607):a.removedDocuments.size>0&&(Le(f.hu,42227),f.hu=!1))}),await ya(n,s,e)}catch(s){await Xs(s)}}function Vm(i,e,n){const s=ve(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach((c,f)=>{const g=f.view.va(e);g.snapshot&&a.push(g.snapshot)}),function(f,g){const y=ve(f);y.onlineState=g;let v=!1;y.queries.forEach((S,N)=>{for(const D of N.Sa)D.va(g)&&(v=!0)}),v&&lf(y)}(s.eventManager,e),a.length&&s.Pu.H_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function gT(i,e,n){const s=ve(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Au.get(e),c=a&&a.key;if(c){let f=new Ye(ce.comparator);f=f.insert(c,Lt.newNoDocument(c,ye.min()));const g=Ae().add(c),y=new gu(ye.min(),new Map,new Ye(Se),f,g);await uy(s,y),s.du=s.du.remove(c),s.Au.delete(e),cf(s)}else await Rh(s.localStore,e,!1).then(()=>Vh(s,e,n)).catch(Xs)}async function yT(i,e){const n=ve(i),s=e.batch.batchId;try{const a=await Sw(n.localStore,e);hy(n,s,null),cy(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ya(n,a)}catch(a){await Xs(a)}}async function _T(i,e,n){const s=ve(i);try{const a=await function(f,g){const y=ve(f);return y.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let S;return y.mutationQueue.lookupMutationBatch(v,g).next(N=>(Le(N!==null,37113),S=N.keys(),y.mutationQueue.removeMutationBatch(v,N))).next(()=>y.mutationQueue.performConsistencyCheck(v)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(v,S,g)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,S)).next(()=>y.localDocuments.getDocuments(v,S))})}(s.localStore,e);hy(s,e,n),cy(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ya(s,a)}catch(a){await Xs(a)}}function cy(i,e){(i.mu.get(e)||[]).forEach(n=>{n.resolve()}),i.mu.delete(e)}function hy(i,e,n){const s=ve(i);let a=s.Vu[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.Vu[s.currentUser.toKey()]=a}}function Vh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach(s=>{i.Ru.containsKey(s)||fy(i,s)})}function fy(i,e){i.Eu.delete(e.path.canonicalString());const n=i.du.get(e);n!==null&&(tf(i.remoteStore,n),i.du=i.du.remove(e),i.Au.delete(n),cf(i))}function Nm(i,e,n){for(const s of n)s instanceof oy?(i.Ru.addReference(s.key,e),vT(i,s)):s instanceof ay?(te(uf,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||fy(i,s.key)):pe(19791,{wu:s})}function vT(i,e){const n=e.key,s=n.path.canonicalString();i.du.get(n)||i.Eu.has(s)||(te(uf,"New document in limbo: "+n),i.Eu.add(s),cf(i))}function cf(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new ce(He.fromString(e)),s=i.fu.next();i.Au.set(s,new lT(n)),i.du=i.du.insert(n,s),ey(i.remoteStore,new Hr(Wn(Hh(n.path)),s,"TargetPurposeLimboResolution",lu.ce))}}async function ya(i,e,n){const s=ve(i),a=[],c=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach((g,y)=>{f.push(s.pu(y,e,n).then(v=>{if((v||n)&&s.isPrimaryClient){const S=v?!v.fromCache:n?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,S?"current":"not-current")}if(v){a.push(v);const S=Zh.As(y.targetId,v);c.push(S)}}))}),await Promise.all(f),s.Pu.H_(a),await async function(y,v){const S=ve(y);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>B.forEach(v,D=>B.forEach(D.Es,z=>S.persistence.referenceDelegate.addReference(N,D.targetId,z)).next(()=>B.forEach(D.ds,z=>S.persistence.referenceDelegate.removeReference(N,D.targetId,z)))))}catch(N){if(!Ys(N))throw N;te(ef,"Failed to update sequence numbers: "+N)}for(const N of v){const D=N.targetId;if(!N.fromCache){const z=S.Ms.get(D),K=z.snapshotVersion,X=z.withLastLimboFreeSnapshotVersion(K);S.Ms=S.Ms.insert(D,X)}}}(s.localStore,c))}async function ET(i,e){const n=ve(i);if(!n.currentUser.isEqual(e)){te(uf,"User change. New user:",e.toKey());const s=await Xg(n.localStore,e);n.currentUser=e,function(c,f){c.mu.forEach(g=>{g.forEach(y=>{y.reject(new le(H.CANCELLED,f))})}),c.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ya(n,s.Ls)}}function wT(i,e){const n=ve(i),s=n.Au.get(e);if(s&&s.hu)return Ae().add(s.key);{let a=Ae();const c=n.Iu.get(e);if(!c)return a;for(const f of c){const g=n.Tu.get(f);a=a.unionWith(g.view.nu)}return a}}function dy(i){const e=ve(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=uy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gT.bind(null,e),e.Pu.H_=rT.bind(null,e.eventManager),e.Pu.yu=iT.bind(null,e.eventManager),e}function TT(i){const e=ve(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_T.bind(null,e),e}class ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Iw(this.persistence,new Ew,e.initialUser,this.serializer)}Cu(e){return new Gg(Jh.mi,this.serializer)}Du(e){return new Vw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ou.provider={build:()=>new ou};class IT extends ou{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Le(this.persistence.referenceDelegate instanceof iu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new sw(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Gt.withCacheSize(this.cacheSizeBytes):Gt.DEFAULT;return new Gg(s=>iu.mi(s,n),this.serializer)}}class Nh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Vm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ET.bind(null,this.syncEngine),await Jw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eT}()}createDatastore(e){const n=yu(e.databaseInfo.databaseId),s=function(c){return new Mw(c)}(e.databaseInfo);return function(c,f,g,y){return new jw(c,f,g,y)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,f,g){return new Bw(s,a,c,f,g)}(this.localStore,this.datastore,e.asyncQueue,n=>Vm(this.syncEngine,n,0),function(){return Sm.v()?new Sm:new Nw}())}createSyncEngine(e,n){return function(a,c,f,g,y,v,S){const N=new uT(a,c,f,g,y,v);return S&&(N.gu=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const s=ve(n);te(Ui,"RemoteStore shutting down."),s.Ea.add(5),await ga(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Nh.provider={build:()=>new Nh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="FirestoreClient";class AT{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Mt.UNAUTHENTICATED,this.clientId=Uh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async f=>{te(ni,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f}),this.appCheckCredentials.start(s,f=>(te(ni,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=af(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function ch(i,e){i.asyncQueue.verifyOperationInProgress(),te(ni,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await Xg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function Dm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await CT(i);te(ni,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>Cm(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>Cm(e.remoteStore,a)),i._onlineComponents=e}async function CT(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){te(ni,"Using user provided OfflineComponentProvider");try{await ch(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===H.FAILED_PRECONDITION||a.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;Bs("Error using user provided cache. Falling back to memory cache: "+n),await ch(i,new ou)}}else te(ni,"Using default OfflineComponentProvider"),await ch(i,new IT(void 0));return i._offlineComponents}async function py(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(te(ni,"Using user provided OnlineComponentProvider"),await Dm(i,i._uninitializedComponentsProvider._online)):(te(ni,"Using default OnlineComponentProvider"),await Dm(i,new Nh))),i._onlineComponents}function RT(i){return py(i).then(e=>e.syncEngine)}async function xm(i){const e=await py(i),n=e.eventManager;return n.onListen=cT.bind(null,e.syncEngine),n.onUnlisten=dT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=hT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=pT.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="firestore.googleapis.com",Mm=!0;class Lm{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gy,this.ssl=Mm}else this.host=e.host,this.ssl=e.ssl??Mm;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Kg;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rw)throw new le(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=my(e.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le(H.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Eu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new VE;switch(s.type){case"firstParty":return new OE(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new le(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=Om.get(n);s&&(te("ComponentProvider","Removing Datastore"),Om.delete(n),s.terminate())}(this),Promise.resolve()}}function PT(i,e,n,s={}){i=Gr(i,Eu);const a=Mh(e),c=i._getSettings(),f={...c,emulatorOptions:i._getEmulatorOptions()},g=`${e}:${n}`;a&&(sv(`https://${g}`),uv("Firestore",!0)),c.host!==gy&&c.host!==g&&Bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...c,host:g,ssl:a,emulatorOptions:s};if(!Ql(y,f)&&(i._setSettings(y),s.mockUserToken)){let v,S;if(typeof s.mockUserToken=="string")v=s.mockUserToken,S=Mt.MOCK_USER;else{v=ov(s.mockUserToken,i._app?.options.projectId);const N=s.mockUserToken.sub||s.mockUserToken.user_id;if(!N)throw new le(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Mt(N)}i._authCredentials=new NE(new ag(v,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new wu(this.firestore,e,this._query)}}class dt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dt(this.firestore,e,this._key)}toJSON(){return{type:dt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(da(n,dt._jsonSchema))return new dt(e,s||null,new ce(He.fromString(n.referencePath)))}}dt._jsonSchemaVersion="firestore/documentReference/1.0",dt._jsonSchema={type:ot("string",dt._jsonSchemaVersion),referencePath:ot("string")};class Xr extends wu{constructor(e,n,s){super(e,n,Hh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dt(this.firestore,null,new ce(e))}withConverter(e){return new Xr(this.firestore,e,this._path)}}function Fm(i,e,...n){if(i=gr(i),lg("collection","path",e),i instanceof Eu){const s=He.fromString(e,...n);return Gp(s),new Xr(i,null,s)}{if(!(i instanceof dt||i instanceof Xr))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(He.fromString(e,...n));return Gp(s),new Xr(i.firestore,null,s)}}function ql(i,e,...n){if(i=gr(i),arguments.length===1&&(e=Uh.newId()),lg("doc","path",e),i instanceof Eu){const s=He.fromString(e,...n);return Kp(s),new dt(i,null,new ce(s))}{if(!(i instanceof dt||i instanceof Xr))throw new le(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(He.fromString(e,...n));return Kp(s),new dt(i.firestore,i instanceof Xr?i.converter:null,new ce(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="AsyncQueue";class jm{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Jg(this,"async_queue_retry"),this._c=()=>{const s=uh();s&&te(Um,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=uh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Mi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ys(e))throw e;te(Um,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(s=>{throw this.nc=s,this.rc=!1,_r("INTERNAL UNHANDLED ERROR: ",zm(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const a=of.createAndSchedule(this,e,n,s,c=>this.hc(c));return this.tc.push(a),a}uc(){this.nc&&pe(47125,{Pc:zm(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function zm(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(i){return function(n,s){if(typeof n!="object"||n===null)return!1;const a=n;for(const c of s)if(c in a&&typeof a[c]=="function")return!0;return!1}(i,["next","error","complete"])}class Qs extends Eu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new jm,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new jm(e),this._firestoreClient=void 0,await e}}}function kT(i,e){const n=typeof i=="object"?i:vE(),s=typeof i=="string"?i:Yl,a=pE(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=rv("firestore");c&&PT(a,...c)}return a}function yy(i){if(i._terminated)throw new le(H.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||VT(i),i._firestoreClient}function VT(i){const e=i._freezeSettings(),n=function(a,c,f,g){return new YE(a,c,f,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,my(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new AT(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yn(Ct.fromBase64String(e))}catch(n){throw new le(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new yn(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(da(e,yn._jsonSchema))return yn.fromBase64String(e.bytes)}}yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:ot("string",yn._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Kn._jsonSchemaVersion}}static fromJSON(e){if(da(e,Kn._jsonSchema))return new Kn(e.latitude,e.longitude)}}Kn._jsonSchemaVersion="firestore/geoPoint/1.0",Kn._jsonSchema={type:ot("string",Kn._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(da(e,Gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Gn(e.vectorValues);throw new le(H.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gn._jsonSchemaVersion="firestore/vectorValue/1.0",Gn._jsonSchema={type:ot("string",Gn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=/^__.*__$/;class DT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ii(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}class _y{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new ii(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vy(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw pe(40011,{Ac:i})}}class ff{constructor(e,n,s,a,c,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ff({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return au(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(vy(this.Ac)&&NT.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class xT{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||yu(e)}Cc(e,n,s,a=!1){return new ff({Ac:e,methodName:n,Dc:s,path:At.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ey(i){const e=i._freezeSettings(),n=yu(i._databaseId);return new xT(i._databaseId,!!e.ignoreUndefinedProperties,n)}function OT(i,e,n,s,a,c={}){const f=i.Cc(c.merge||c.mergeFields?2:0,e,n,a);df("Data must be an object, but it was:",f,s);const g=wy(s,f);let y,v;if(c.merge)y=new sn(f.fieldMask),v=f.fieldTransforms;else if(c.mergeFields){const S=[];for(const N of c.mergeFields){const D=Dh(e,N,n);if(!f.contains(D))throw new le(H.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);Iy(S,D)||S.push(D)}y=new sn(S),v=f.fieldTransforms.filter(N=>y.covers(N.field))}else y=null,v=f.fieldTransforms;return new DT(new Xt(g),y,v)}class Iu extends hf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Iu}}function MT(i,e,n,s){const a=i.Cc(1,e,n);df("Data must be an object, but it was:",a,s);const c=[],f=Xt.empty();ri(s,(y,v)=>{const S=pf(e,y,n);v=gr(v);const N=a.yc(S);if(v instanceof Iu)c.push(S);else{const D=Su(v,N);D!=null&&(c.push(S),f.set(S,D))}});const g=new sn(c);return new _y(f,g,a.fieldTransforms)}function LT(i,e,n,s,a,c){const f=i.Cc(1,e,n),g=[Dh(e,s,n)],y=[a];if(c.length%2!=0)throw new le(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let D=0;D<c.length;D+=2)g.push(Dh(e,c[D])),y.push(c[D+1]);const v=[],S=Xt.empty();for(let D=g.length-1;D>=0;--D)if(!Iy(v,g[D])){const z=g[D];let K=y[D];K=gr(K);const X=f.yc(z);if(K instanceof Iu)v.push(z);else{const $=Su(K,X);$!=null&&(v.push(z),S.set(z,$))}}const N=new sn(v);return new _y(S,N,f.fieldTransforms)}function Su(i,e){if(Ty(i=gr(i)))return df("Unsupported field value:",e,i),wy(i,e);if(i instanceof hf)return function(s,a){if(!vy(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(s,a){const c=[];let f=0;for(const g of s){let y=Su(g,a.wc(f));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),f++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=gr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return w0(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=We.fromDate(s);return{timestampValue:ru(a.serializer,c)}}if(s instanceof We){const c=new We(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ru(a.serializer,c)}}if(s instanceof Kn)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof yn)return{bytesValue:Bg(a.serializer,s._byteString)};if(s instanceof dt){const c=a.databaseId,f=s.firestore._databaseId;if(!f.isEqual(c))throw a.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Xh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof Gn)return function(f,g){return{mapValue:{fields:{[yg]:{stringValue:_g},[Jl]:{arrayValue:{values:f.toArray().map(v=>{if(typeof v!="number")throw g.Sc("VectorValues must only contain numeric values.");return Wh(g.serializer,v)})}}}}}}(s,a);throw a.Sc(`Unsupported field value: ${jh(s)}`)}(i,e)}function wy(i,e){const n={};return hg(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ri(i,(s,a)=>{const c=Su(a,e.mc(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function Ty(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof We||i instanceof Kn||i instanceof yn||i instanceof dt||i instanceof hf||i instanceof Gn)}function df(i,e,n){if(!Ty(n)||!ug(n)){const s=jh(n);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Dh(i,e,n){if((e=gr(e))instanceof Tu)return e._internalPath;if(typeof e=="string")return pf(i,e);throw au("Field path arguments must be of type string or ",i,!1,void 0,n)}const FT=new RegExp("[~\\*/\\[\\]]");function pf(i,e,n){if(e.search(FT)>=0)throw au(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Tu(...e.split("."))._internalPath}catch{throw au(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function au(i,e,n,s,a){const c=s&&!s.isEmpty(),f=a!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(c||f)&&(y+=" (found",c&&(y+=` in field ${s}`),f&&(y+=` in document ${a}`),y+=")"),new le(H.INVALID_ARGUMENT,g+i+y)}function Iy(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new dt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new UT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ay("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class UT extends Sy{data(){return super.data()}}function Ay(i,e){return typeof e=="string"?pf(i,e):e instanceof Tu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new le(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zT{convertValue(e,n="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return ri(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){const n=e.fields?.[Jl].arrayValue?.values?.map(s=>nt(s.doubleValue));return new Gn(n)}convertGeoPoint(e){return new Kn(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=cu(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(la(e));default:return null}}convertTimestamp(e){const n=Jr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=He.fromString(e);Le(Qg(s),9688,{name:e});const a=new ua(s.get(1),s.get(3)),c=new ce(s.popFirst(5));return a.isEqual(n)||_r(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(i,e,n){let s;return s=i?i.toFirestore(e):e,s}class Zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Li extends Sy{constructor(e,n,s,a,c,f){super(e,n,s,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ay("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Li._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Li._jsonSchemaVersion="firestore/documentSnapshot/1.0",Li._jsonSchema={type:ot("string",Li._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};class Hl extends Li{data(e={}){return super.data(e)}}class zs{constructor(e,n,s,a){this._firestore=e,this._userDataWriter=n,this._snapshot=a,this.metadata=new Zo(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(s=>{e.call(n,new Hl(this._firestore,this._userDataWriter,s.key,s,new Zo(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map(g=>{const y=new Hl(a._firestore,a._userDataWriter,g.doc.key,g.doc,new Zo(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:f++}})}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(g=>c||g.type!==3).map(g=>{const y=new Hl(a._firestore,a._userDataWriter,g.doc.key,g.doc,new Zo(a._snapshot.mutatedKeys.has(g.doc.key),a._snapshot.fromCache),a.query.converter);let v=-1,S=-1;return g.type!==0&&(v=f.indexOf(g.doc.key),f=f.delete(g.doc.key)),g.type!==1&&(f=f.add(g.doc),S=f.indexOf(g.doc.key)),{type:bT(g.type),doc:y,oldIndex:v,newIndex:S}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(H.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Uh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach(c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bT(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return pe(61501,{type:i})}}zs._jsonSchemaVersion="firestore/querySnapshot/1.0",zs._jsonSchema={type:ot("string",zs._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};class Cy extends zT{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dt(this.firestore,null,n)}}function bm(i,e,n,...s){i=Gr(i,dt);const a=Gr(i.firestore,Qs),c=Ey(a);let f;return f=typeof(e=gr(e))=="string"||e instanceof Tu?LT(c,"updateDoc",i._key,e,n,s):MT(c,"updateDoc",i._key,e),mf(a,[f.toMutation(i._key,xn.exists(!0))])}function $T(i){return mf(Gr(i.firestore,Qs),[new Qh(i._key,xn.none())])}function qT(i,e){const n=Gr(i.firestore,Qs),s=ql(i),a=BT(i.converter,e);return mf(n,[OT(Ey(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,xn.exists(!1))]).then(()=>s)}function HT(i,...e){i=gr(i);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Bm(e[s])||(n=e[s++]);const a={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Bm(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let c,f,g;if(i instanceof dt)f=Gr(i.firestore,Qs),g=Hh(i._key.path),c={next:y=>{e[s]&&e[s](WT(f,i,y))},error:e[s+1],complete:e[s+2]};else{const y=Gr(i,wu);f=Gr(y.firestore,Qs),g=y._query;const v=new Cy(f);c={next:S=>{e[s]&&e[s](new zs(f,v,y,S))},error:e[s+1],complete:e[s+2]},jT(i._query)}return function(v,S,N,D){const z=new ST(D),K=new sT(S,z,N);return v.asyncQueue.enqueueAndForget(async()=>tT(await xm(v),K)),()=>{z.Nu(),v.asyncQueue.enqueueAndForget(async()=>nT(await xm(v),K))}}(yy(f),g,a,c)}function mf(i,e){return function(s,a){const c=new Mi;return s.asyncQueue.enqueueAndForget(async()=>mT(await RT(s),a,c)),c.promise}(yy(i),e)}function WT(i,e,n){const s=n.docs.get(e._key),a=new Cy(i);return new Li(i,a,e._key,s,new Zo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(a){Gs=a})(_E),Gl(new sa("firestore",(s,{instanceIdentifier:a,options:c})=>{const f=s.getProvider("app").getImmediate(),g=new Qs(new DE(s.getProvider("auth-internal")),new ME(f,s.getProvider("app-check-internal")),function(v,S){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new le(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(v.options.projectId,S)}(f,a),f);return c={useFetchStreams:n,...c},g._setSettings(c),g},"PUBLIC").setMultipleInstances(!0)),Us(qp,Hp,e),Us(qp,Hp,"esm2020")})();var QT="firebase",KT="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us(QT,KT,"app");const GT={apiKey:"AIzaSyDNJQaPrmG9f0vW5FxQt0RepSGm5nUA9Sk",authDomain:"gestor-de-tareas-4fc77.firebaseapp.com",projectId:"gestor-de-tareas-4fc77",storageBucket:"gestor-de-tareas-4fc77.appspot.com",messagingSenderId:"4204651043",appId:"1:4204651043:web:7add3a1724a41f49e30796",measurementId:"G-6FCM56T0ZV"},XT=Ym(GT),Go=kT(XT);function YT(){const[i,e]=gn.useState([]);gn.useEffect(()=>{const Z=HT(Fm(Go,"tasks"),se=>{const ge=se.docs.map(Fe=>({id:Fe.id,...Fe.data()}));e(ge)});return()=>Z()},[]);const[n,s]=gn.useState("all"),[a,c]=gn.useState("fecha"),[f,g]=gn.useState(""),y=i.filter(Z=>Z.text.toLowerCase().includes(f.toLowerCase())?n==="completed"?Z.completed:n==="pending"?!Z.completed:!0:!1).sort((Z,se)=>{if(a==="prioridad"){const ge={alta:1,media:2,baja:3};return ge[Z.priority]-ge[se.priority]}else if(a==="vencimiento")return new Date(Z.date||0)-new Date(se.date||0);return Z.createdAt-se.createdAt}),v=async Z=>{await qT(Fm(Go,"tasks"),{...Z,createdAt:Date.now()})},S=async Z=>{await $T(ql(Go,"tasks",Z))},N=async(Z,se)=>{await bm(ql(Go,"tasks",Z),{text:se})},D=i.filter(Z=>!Z.completed).length,z=i.filter(Z=>Z.completed).length,K=async(Z,se)=>{await bm(ql(Go,"tasks",Z),{completed:!se})};gn.useEffect(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",Z=>{Z.data?.type==="PLAY_SOUND"&&new Audio("/alert.mp3").play().catch(()=>console.log("Sonido bloqueado por navegador"))})},[]);const[X,$]=gn.useState(()=>{const Z=localStorage.getItem("notifiedTasks");return Z?JSON.parse(Z):[]}),_e=()=>{navigator.serviceWorker.ready.then(Z=>{const se=new Date().toISOString().split("T")[0];i.forEach(ge=>{if(!ge.date||ge.completed)return;const Fe=(new Date(ge.date)-new Date(se))/(1e3*60*60*24);let Te=null;if(Fe<=1&&Fe>=0?Te="proxima":Fe<0&&(Te="vencida"),Te&&!X.includes(ge.text)){Z.active?.postMessage({type:"SHOW_NOTIFICATION",task:ge,status:Te});const V=[...X,ge.text];$(V),localStorage.setItem("notifiedTasks",JSON.stringify(V))}})})};return gn.useEffect(()=>{if(Notification.requestPermission().then(se=>{console.log("Permiso de notificación:",se)}),!("Notification"in window))return;(async()=>{Notification.permission!=="granted"?await Notification.requestPermission()==="granted"&&_e():_e()})()},[]),Ee.jsxs("div",{className:"container",children:[Ee.jsxs("div",{className:"header",children:[Ee.jsx("h1",{children:"Gestor de Tareas"}),Ee.jsx("button",{id:"toggle-theme",onClick:()=>document.body.classList.toggle("dark"),children:"🌓"})]}),Ee.jsx(B_,{onAdd:v}),Ee.jsx(q_,{filter:n,setFilter:s,order:a,setOrder:c}),Ee.jsx(H_,{search:f,setSearch:g}),Ee.jsx($_,{tasks:y,toggleComplete:K,deleteTask:S,editTask:N}),Ee.jsx(W_,{pending:D,completed:z})]})}z_.createRoot(document.getElementById("root")).render(Ee.jsx(x_.StrictMode,{children:Ee.jsx(YT,{})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/gestor-tareas-react/service-worker.js").then(()=>console.log("Service Worker registrado")).catch(i=>console.error("Error al registrar SW",i));
